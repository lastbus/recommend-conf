/*
Copyright (c) 2003-2012, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license

2016/5/18 IBM.徐毅 在显示列表里面添加图片［压缩］功能选项。
*/
(function(){function B(a){return d.instances[a]}function W(a){this.id=a.name;a=a.element.getDocument().getWindow().$;var b=d.oC.getWindow().$;this.inPopup=!(!a||!a.opener);this.inIframe=!this.inPopup&&a!=b.top&&"iframe"==a.frameElement.nodeName.toLowerCase();this.inFrame=!this.inPopup&&a!=b.top&&"frame"==a.frameElement.nodeName.toLowerCase();this.inUrlPopup=!(!this.inPopup||!b.opener)}function Z(a,b,c){b.on("appReady",function(f){f.removeListener();a.document=b.document.$;a.folders=b.folders;a.files=
b.aG["filesview.filesview"].data().files;a.basketFiles=b.basketFiles;a.resourceTypes=b.resourceTypes;a.connector=b.connector;a.lang=b.lang;a.langCode=b.langCode;a.config=b.config;b.aG["foldertree.foldertree"].on("afterAddFolder",function(b){b.removeListener();c&&c(a)},a)},a,null,999)}var d=function(){var a={jY:"C7OA1WG",_:{},status:"unloaded",basePath:function(){var b=window.CKFINDER_BASEPATH||"";if(!b)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var d=a[c].src.match(/(^|.*[\\\/])CKFINDER(?:_basic)?(?:_v2)?(?:_source)?.js(?:\?.*)?$/i);
if(d){b=d[1];break}}-1==b.indexOf("://")&&(b=0===b.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+b:location.href.match(/^[^\?]*\/(?:)/)[0]+b);return b}(),getUrl:function(b){-1==b.indexOf("://")&&0!==b.indexOf("/")&&(b=this.basePath+b);this.jY&&"/"!=b.charAt(b.length-1)&&(b+=(0<=b.indexOf("?")?"&":"?")+"t="+this.jY);return b}},b=window.CKFINDER_GETURL;if(b){var c=a.getUrl;a.getUrl=function(f){return b.call(a,f)||c.call(a,f)}}return a}(),aa={callback:1,selectThumbnailActionFunction:1,selectActionFunction:1};
d.jd=function(){var a={},b;for(b in this)this.hasOwnProperty(b)&&("function"==typeof this[b]&&!aa[b]||"undefined"==typeof this[b]||(a[b]=this[b]));this.callback&&(a.callback=this.callback);return a};d.lj=function(a){a=a||this.basePath;var b="";a&&0!==a.length||(a=CKFinder.DEFAULT_basePath);"/"!=a.substr(a.length-1,1)&&(a+="/");a+="ckfinder.html";var c;this.hh&&(c=this.hh,"function"==typeof c&&(c=c.toString().match(/function ([^(]+)/)[1]),b+="?action=js&amp;func="+c);this.jx&&(b=b+(b?"&amp;":"?")+
("data="+encodeURIComponent(this.jx)));if(this.disableThumbnailSelection)b+=b?"&amp;":"?",b+="dts=1";else if(this.lH||this.hh)c=this.lH||this.hh,"function"==typeof c&&(c=c.toString().match(/function ([^(]+)/)[1]),b+=b?"&amp;":"?",b+="thumbFunc="+c,this.nm?b+="&amp;tdata="+encodeURIComponent(this.nm):!this.lH&&this.jx&&(b+="&amp;tdata="+encodeURIComponent(this.jx));this.startupPath&&(b+=b?"&amp;":"?",b+="start="+encodeURIComponent(this.startupPath+(this.startupFolderExpanded?":1":":0")));void 0===
this.rememberLastFolder||this.rememberLastFolder||(b+=b?"&amp;":"?",b+="rlf=0");this.id&&(b+=b?"&amp;":"?",b+="id="+encodeURIComponent(this.id));this.skin&&(b+=b?"&amp;":"?",b+="skin="+encodeURIComponent(this.skin));return a+b};W.prototype={_:{},addFileContextMenuOption:function(a,b,c){var f=B(this.id),e="FileContextMenu_"+a.command;f.bD(e,{exec:function(a){var c=a.aG["filesview.filesview"].tools.dH();b(a.cg,c)}});a.command=e;a.group||(a.group="file1");f.gp(e,a);f.aG["filesview.filesview"].on("beforeContextMenu",
function(b){if(c){var a=c(this.tools.dH());a&&(b.data.bj[e]=-1==a?d.aY:d.aS)}else b.data.bj[e]=d.aS})},disableFileContextMenuOption:function(a,b){var c=B(this.id),f=b?"FileContextMenu_"+a:a,e=function(b){delete b.data.bj[f]};c.aG["filesview.filesview"].on("beforeContextMenu",e);return function(){c.aG["filesview.filesview"].removeListener("beforeContextMenu",e)}},addFolderContextMenuOption:function(a,b,c){var f=B(this.id),e="FolderContextMenu_"+a.command;f.bD(e,{exec:function(a){b(a.cg,a.aV)}});a.command=
e;a.group||(a.group="folder1");f.gp(e,a);f.aG["foldertree.foldertree"].on("beforeContextMenu",function(b){if(c){var a=c(this.app.aV);a&&(b.data.bj[e]=-1==a?d.aY:d.aS)}else b.data.bj[e]=d.aS})},disableFolderContextMenuOption:function(a,b){var c=B(this.id),f=b?"FolderContextMenu_"+a:a,e=function(b){delete b.data.bj[f]};c.aG["foldertree.foldertree"].on("beforeContextMenu",e);return function(){c.aG["foldertree.foldertree"].removeListener("beforeContextMenu",e)}},addFolderDropMenuOption:function(a,b,c){var f=
B(this.id),e="FolderDropMenu_"+a.command;f.bD(e,{exec:function(a){b(a.cg,a.cK.oa())}});a.command=e;var k=new d.iD(f,e,a);f.aG["foldertree.foldertree"].on("beforeDropMenu",function(b){if(c?c.call(f.cg,b.data.folder):1)b.data.iG[e]=k})},disableFolderDropMenuOption:function(a,b){var c=B(this.id),f=b?"FolderDropMenu_"+a:a,e=function(b){delete b.data.iG[f]};c.aG["foldertree.foldertree"].on("beforeDropMenu",e);return function(){c.aG["foldertree.foldertree"].removeListener("beforeDropMenu",e)}},getSelectedFile:function(){return B(this.id).aG["filesview.filesview"].tools.dH()},
getSelectedFiles:function(){return B(this.id).aG["filesview.filesview"].tools.oO()},getSelectedFolder:function(){return B(this.id).aV},setUiColor:function(a){return B(this.id).setUiColor(a)},destroy:function(a){B(this.id).destroy();a&&a()},openDialog:function(a,b){var c=(new d.dom.document(window.document)).getHead();B(this.id).document.getWindow();if(this.inFrame||this.inPopup||this.inIframe)d.document=B(this.id).document;return B(this.id).openDialog(a,b,c)},openMsgDialog:function(a,b){B(this.id).msgDialog(a,
b)},openConfirmDialog:function(a,b,c){B(this.id).fe(a,b,c)},openInputDialog:function(a,b,c,f){B(this.id).hs(a,b,c,f)},openSkippedFilesDialog:function(a,b,c,f){B(this.id).skippedFilesDialog(a,b,c,f)},addTool:function(a){return B(this.id).plugins.tools.addTool(a)},addToolPanel:function(a){return B(this.id).plugins.tools.addToolPanel(a)},removeTool:function(a){B(this.id).plugins.tools.removeTool(a)},showTool:function(a){B(this.id).plugins.tools.showTool(a)},hideTool:function(a){B(this.id).plugins.tools.hideTool(a)},
getResourceType:function(a){return B(this.id).getResourceType(a)},log:function(a){d.log.apply(d.log,arguments)},getLog:function(){return d.mZ()},emptyBasket:function(){B(this.id).execCommand("TruncateBasket")},replaceUploadForm:function(a,b,c,f){var e=B(this.id);f||(f=10);if(!(f>=(e.dC||20)))return e.dC=f,e.aG["formpanel.formpanel"].on("beforeUploadFileForm",function(k){if(2==k.data.step&&!(f>e.dC)){k.cancel(!0);var g=this.data();try{"upload"==g.dc?this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(d.aS)}):
(this.data().dc&&this.oW("requestUnloadForm"),c||this.eh.removeClass("show_border"),this.oW("requestLoadForm",{html:a,command:"upload"}),b&&b())}catch(h){throw this.oW("failedUploadFileForm",k.data),this.oW("afterUploadFileForm",k.data),d.ba(h);}}}),{hide:function(){e.oW("requestUnloadForm",function(){e.cS("upload").bR(d.aS)})}}},resizeFormPanel:function(a){var b=B(this.id);"undefined"==typeof a?(b.document.getById("panel_view").setStyle("height",""),b.document.getById("panel_widget").setStyle("height",
"")):(a=Math.min(a,Math.max(90,b.document.getById("main_container").$.offsetHeight-300)),b.document.getById("panel_view").setStyle("height",a+"px"),b.document.getById("panel_widget").setStyle("height",a-3+"px"));b.layout.ea(!0)},refreshOpenedFolder:function(){var a=B(this.id),b=a.aG["filesview.filesview"].tools.currentFolder();a.oW("requestSelectFolder",{folder:b})},selectFile:function(a){B(this.id).oW("requestSelectFile",{file:a,scrollTo:1})},closePopup:function(){this.inPopup&&B(this.id).element.getDocument().getWindow().$.close()},
openFolder:function(a,b){var c=B(this.id);b=b.replace(/\/$/,"");a=a.toLowerCase();for(var f=0;f<c.folders.length;f++){var e=c.folders[f];if(e.getPath().replace(/\/$/,"")==b&&a==e.type.toLowerCase()){c.oW("requestSelectFolder",{folder:e});c.oW("requestShowFolderFiles",{folder:e});break}}},setUiColor:function(a){B(this.id).setUiColor(a)},execCommand:function(a){B(this.id).execCommand(a)}};(function(){function a(b){for(var a=1;CKFinder._.instanceConfig[a];)a++;CKFinder._.instanceConfig[a]=b;return a}
window.CKFinder=function(b,a){if(b)for(var f in b)!b.hasOwnProperty(f)||"function"==typeof b[f]&&"callback"!=f||(this[f]=b[f]);this.callback=a};CKFinder.prototype={create:function(b){var a="ckf"+Math.random().toString().substr(2,9);document.write('<span id="'+a+'"></span>');b=d.tools.extend(d.jd.call(this),b,!0);b=d.replace(a,b,CKFinder);return this.api=b.cg},appendTo:function(b,a){a=d.tools.extend(d.jd.call(this),a,!0);var f=d.appendTo(b,a,CKFinder);return this.api=f.cg},replace:function(b,a){a=
d.tools.extend(d.jd.call(this),a,!0);var f=d.replace(b,a,CKFinder);return this.api=f.cg},popup:function(b,a){b=b||"80%";a=a||"70%";"string"==typeof b&&1<b.length&&"%"==b.substr(b.length-1,1)&&(b=parseInt(window.screen.width*parseInt(b,10)/100,10));"string"==typeof a&&1<a.length&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.height*parseInt(a,10)/100,10));200>b&&(b=200);200>a&&(a=200);var f=parseInt((window.screen.height-a)/2,10),e=parseInt((window.screen.width-b)/2,10),k=window.open(d.env.webkit?
"about:blank":"","CKFinderpopup","location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+b+",height="+a+",top="+f+",left="+e,!0);if(!k)return!1;this.width=this.height="100%";var g=new d.dom.document(k.document);g.$.open();d.env.isCustomDomain()&&(g.$.domain=window.document.domain);g.$.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>CKFinder 2</title><style type="text/css">body, html, iframe, #ckfinder { margin: 0; padding: 0; border: 0; width: 100%; height: 100%; overflow: hidden; }</style></head><body></body></html>');
g.$.close();try{return-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(k.moveTo(e,f),k.resizeTo(b,a)),k.focus(),this.appendTo(g.bH())}catch(h){return this.appendTo(g.bH())}}};CKFinder._={};CKFinder._.instanceConfig=[];CKFinder.lang={};CKFinder.version="2.3";CKFinder.revision="2464";CKFinder.addPlugin=function(b,a,f){var e={bM:f||[]};"function"==typeof a&&(a={appReady:a});for(var k in a)a.hasOwnProperty(k)&&"connectorInitialized"!=k&&"uiReady"!=k&&(e[k]=a[k]);e.bz=function(b){if(b.config.readOnly&&
!1===e.readOnly)return null;if(a.connectorInitialized)b.on("connectorInitialized",function(f){var e=a.connectorInitialized;e&&e.call(e,b.cg,f.data.xml)},null,null,1E3);if(a.connectorResponse)b.on("connectorResponse",function(f){var e=a.connectorResponse;e&&e.call(e,b.cg,f.data.xml)});if(a.galleryCallback)b.on("launchGallery",function(f){var e=a.galleryCallback;e&&(f.data.bx=e.call(e,b.cg,f.data.selected,f.data.files))});if(a.uiReady)b.on("uiReady",function(){var f=a.uiReady;f.call(f,b.cg)},null,null,
1E3);if(a.appReady)b.on("appReady",function(){var f=a.appReady;f.call(f,b.cg)},null,null,1E3)};d.plugins.add(b,e)};CKFinder.getPluginPath=function(b){return d.plugins.getPath(b)};CKFinder.addExternalPlugin=function(b,a,f){d.plugins.tR(b,a,f)};CKFinder.setPluginLang=function(b,a,f){d.plugins.rX(b,a,f)};CKFinder.dialog={add:function(b,a){"function"==typeof a&&(a=d.tools.override(a,function(b){return function(a){return b(a.cg)}}));d.dialog.add(b,a)}};CKFinder.tools={};CKFinder.env={};CKFinder.dom={};
CKFinder.create=function(b,a,f,e,d){var g;if(null!==b&&"object"===typeof b){g=new CKFinder;for(var h in b)g[h]=b[h]}else g=new CKFinder,g.basePath=b,a&&(g.width=a),f&&(g.height=a),e&&(g.selectActionFunction=e),d&&(g.callback=d);return g.create()};CKFinder.popup=function(b,a,f,e,d){var g;if(null!==b&&"object"===typeof b){g=new CKFinder;for(var h in b)g[h]=b[h]}else g=new CKFinder,g.basePath=b,e&&(g.selectActionFunction=e),d&&(g.callback=d);return g.popup(a,f)};CKFinder.setupFCKeditor=function(b,c,
f,e){var k,g;if(null!==c&&"object"===typeof c){g=a(c);k=new CKFinder;for(var h in c)if(k[h]=c[h],"width"==h){var l=k[h]||800;"string"==typeof l&&1<l.length&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.width*parseInt(l,10)/100,10));b.Config.LinkBrowserWindowWidth=l;b.Config.ImageBrowserWindowWidth=l;b.Config.FlashBrowserWindowWidth=l}else"height"==h&&(l=k[h]||600,"string"==typeof l&&1<l.length&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10)),b.Config.LinkBrowserWindowHeight=
l,b.Config.ImageBrowserWindowHeight=l,b.Config.FlashBrowserWindowHeight=l)}else k=new CKFinder,k.basePath=c;c=k.basePath;"/"!=c.substr(0,1)&&-1==c.indexOf("://")&&(c=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+c);c=d.lj.call(k,c);k=-1!==c.indexOf("?")?"&":"?";g&&(c+=k+"configId="+g,k="&");b.Config.LinkBrowserURL=c;b.Config.ImageBrowserURL=c+k+"type="+(f||"Images");b.Config.FlashBrowserURL=c+k+"type="+(e||"Flash");g=c.substring(0,1+c.lastIndexOf("/"));b.Config.LinkUploadURL=
g+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";b.Config.ImageUploadURL=g+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Images");b.Config.FlashUploadURL=g+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Flash")};CKFinder.setupCKEditor=function(b,
c,f,e){if(null===b){for(var k in CKEDITOR.instances)CKFinder.setupCKEditor(CKEDITOR.instances[k],c,f,e);CKEDITOR.on("instanceCreated",function(b){CKFinder.setupCKEditor(b.editor,c,f,e)})}else{var g;if(null!==c&&"object"===typeof c){g=a(c);k=new CKFinder;for(var h in c)if(k[h]=c[h],"width"==h){var l=k[h]||800;"string"==typeof l&&1<l.length&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.width*parseInt(l,10)/100,10));b.config.filebrowserWindowWidth=l}else"height"==h&&(l=k[h]||600,"string"==
typeof l&&1<l.length&&"%"==l.substr(l.length-1,1)&&(l=parseInt(window.screen.height*parseInt(l,10)/100,10)),b.config.filebrowserWindowHeight=l)}else k=new CKFinder,k.basePath=c;h=k.basePath;"/"!=h.substr(0,1)&&-1==h.indexOf("://")&&(h=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+h);h=d.lj.call(k,h);k=-1!==h.indexOf("?")?"&":"?";g&&(h+=k+"configId="+g,k="&");b.config.filebrowserBrowseUrl=h;b.config.filebrowserImageBrowseUrl=h+k+"type="+(f||"Images");b.config.filebrowserFlashBrowseUrl=
h+k+"type="+(e||"Flash");g=h.substring(0,1+h.lastIndexOf("/"));b.config.filebrowserUploadUrl=g+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type=Files";b.config.filebrowserImageUploadUrl=g+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(f||"Images");b.config.filebrowserFlashUploadUrl=g+"core/connector/"+CKFinder.config.connectorLanguage+"/connector."+
CKFinder.config.connectorLanguage+"?command=QuickUpload&type="+(e||"Flash")}}})();d.event||(d.event=function(){},d.event.du=function(a,b){var c=d.event.prototype,f;for(f in c)void 0==a[f]&&(a[f]=c[f])},d.event.prototype=function(){var a=function(b){b=b.kk&&b.kk()||b._||(b._={});return b.cC||(b.cC={})},b=function(b){this.name=b;this.dF=[]};b.prototype={mi:function(b){for(var a=0,e=this.dF;a<e.length;a++)if(e[a].fn==b)return a;return-1}};return{on:function(c,f,e,d,g){var h=a(this),h=h[c]||(h[c]=new b(c));
if(0>h.mi(f)){h=h.dF;e||(e=this);isNaN(g)&&(g=10);var l=this,q=function(b,a,h,g){b={name:c,jN:this,application:b,data:a,jO:d,stop:h,cancel:g,removeListener:function(){l.removeListener(c,f)}};f.call(e,b);return b.data};q.fn=f;q.nT=g;for(var n=h.length-1;0<=n;n--)if(h[n].nT<=g){h.splice(n+1,0,q);return}h.unshift(q)}},oW:function(){var b=!1,f=function(){b=!0},e=!1,k=function(b){e=b?2:!0};return function(g,h,l,q){"function"==typeof h?(q=h,h=null):"function"==typeof l&&(q=l,l=null);"mousemove"!=g&&d.log("[EVENT] "+
g,h,q);var n=a(this)[g];g=b;var r=e;b=e=!1;if(n&&(n=n.dF,n.length))for(var n=n.slice(0),v=0;v<n.length;v++){var w=n[v].call(this,l,h,f,k);"undefined"!=typeof w&&(h=w);if(b||e&&2!=e)break}l=e||("undefined"==typeof h?!1:h&&"undefined"!=typeof h.result?h.result:h);"function"===typeof q&&2!=e&&(l=q.call(this,e,h)||l);b=g;e=r;return l}}(),cr:function(b,f,e){f=this.oW(b,f,e);delete a(this)[b];return f},removeListener:function(b,f){var e=a(this)[b];if(e){var d=e.mi(f);0<=d&&e.dF.splice(d,1)}},mF:function(){for(var b=
a(this),f=0;f<b.length;f++)b[f].dF=[]},rC:function(b){return(b=a(this)[b])&&0<b.dF.length}}}());d.application||(d.kZ=0,d.fc=1,d.qE=2,d.application=function(a,b,c,f){this._={instanceConfig:a,element:b};this.ff=c||d.kZ;d.event.call(this);this.iI(f)},d.application.replace=function(a,b,c){var f=a;if("object"!=typeof f){f=document.getElementById(a);if(!f)for(var e=0,k=document.getElementsByName(a);(f=k[e++])&&"textarea"!=f.tagName.toLowerCase(););if(!f)throw'[CKFINDER.application.replace] The element with id or name "'+
a+'" was not found.';}return new d.application(b,f,d.fc,c)},d.application.appendTo=function(a,b,c){if("object"!=typeof a&&(a=document.getElementById(a),!a))throw'[CKFINDER.application.appendTo] The element with id "'+a+'" was not found.';return new d.application(b,a,d.qE,c)},d.application.prototype={iI:function(){(d.application.eb||(d.application.eb=[])).push(this)},oW:function(a,b,c){return d.event.prototype.oW.call(this,a,b,this,c)},cr:function(a,b,c){return d.event.prototype.cr.call(this,a,b,this,
c)}},d.event.du(d.application.prototype,!0));d.env||(d.env=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:!1,opera:!!b&&b.version,webkit:-1<a.indexOf(" applewebkit/"),air:-1<a.indexOf(" adobeair/"),mac:-1<a.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode,isCustomDomain:function(){return this.ie&&document.domain!=window.location.hostname}};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera;c.chrome=!1;c.safari=!1;c.webkit&&(-1<a.indexOf(" chrome/")?c.chrome=
!0:c.safari=!0);var f=0;c.ie&&(f=parseFloat(a.match(/msie (\d+)/)[1]),c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie7Compat=7==f&&!document.documentMode||7==document.documentMode,c.ie6Compat=7>f||c.quirks);if(c.gecko){var e=a.match(/rv:([\d\.]+)/);e&&(e=e[1].split("."),f=1E4*e[0]+100*(e[1]||0)+ +(e[2]||0));c.isMobile=-1<a.indexOf("fennec")}c.opera&&(f=parseFloat(b.version()),c.isMobile=-1<a.indexOf("opera mobi"));c.air&&(f=parseFloat(a.match(/ adobeair\/(\d+)/)[1]));c.webkit&&
(f=parseFloat(a.match(/ applewebkit\/(\d+)/)[1]),c.isMobile=-1<a.indexOf("mobile"));c.version=f;c.isCompatible=c.ie&&6<=f||c.gecko&&10801<=f||c.opera&&9.5<=f||c.air&&1<=f||c.webkit&&522<=f||!1;c.cssClass="browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.air?"air":c.webkit?"webkit":"unknown");c.quirks&&(c.cssClass+=" browser_quirks");c.ie&&(c.cssClass+=" browser_ie"+(7>c.version?"6":8<=c.version?"8":"7"),c.quirks&&(c.cssClass+=" browser_iequirks"),c.ie7Compat&&(c.cssClass+=" browser_ie7Compat"));
c.gecko&&10900>f&&(c.cssClass+=" browser_gecko18");return c}(),CKFinder.env=d.env);var p=d.env,y=p.ie;"unloaded"==d.status&&function(){d.event.du(d);d.dO=function(){if("basic_ready"!=d.status)d.dO.qr=!0;else{delete d.dO;var b=document.createElement("script");b.type="text/javascript";b.src=d.basePath+"ckfinder.js";document.getElementsByTagName("head")[0].appendChild(b)}};d.mS=0;d.uQ="ckfinder";d.uM=!0;var a=function(b,a,f,e){return p.isCompatible?(d.dO&&d.dO(),b=f(b,a,e),d.add(b),b):null};d.replace=
function(b,c,f){return a(b,c,d.application.replace,f)};d.appendTo=function(b,c,f){return a(b,c,d.application.appendTo,f)};d.add=function(b){(this._.io||(this._.io=[])).push(b)};d.uL=function(){for(var b=document.getElementsByTagName("textarea"),a=0;a<b.length;a++){var f=null,e=b[a];if(e.name||e.id){if("string"==typeof arguments[0]){if(!(new RegExp("(?:^| )"+arguments[0]+"(?:$| )")).test(e.className))continue}else if("function"==typeof arguments[0]&&(f={},!1===arguments[0](e,f)))continue;this.replace(e,
f)}}};(function(){var b=function(){var b=d.dO,a=d.mS;d.status="basic_ready";b&&b.qr?b():a&&setTimeout(function(){d.dO&&d.dO()},1E3*a)};window.addEventListener?window.addEventListener("load",b,!1):window.attachEvent&&window.attachEvent("onload",b)})();d.status="basic_loaded"}();d.dom={};var x=CKFinder.dom=d.dom;d.ajax=function(){var a=function(){if(!y||"file:"!=location.protocol)try{return new XMLHttpRequest}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}return null},
b=function(b){return 4==b.readyState&&(200<=b.status&&300>b.status||304==b.status||0===b.status||1223==b.status)},c=function(a){return b(a)?a.responseText:null},f=function(a){if(b(a)){var c=a.responseXML;if((c=new d.xml(c&&c.firstChild&&c.documentElement&&"parsererror"!=c.documentElement.nodeName?c:a.responseText.replace(/^[^<]+/,"").replace(/[^>]+$/,"")))&&c.mq&&c.mq.documentElement&&"parsererror"!=c.mq.documentElement.nodeName&&"html"!=c.mq.documentElement.nodeName&&"br"!=c.mq.documentElement.nodeName)return c}var f=
d.nG||d.jt,e=a.responseText,k=f.lang.ErrorMsg[e?"XmlError":"XmlEmpty"]+"<br>";c&&c.mq&&(c.mq.parseError&&c.mq.parseError.reason?k+=c.mq.parseError.reason:c.mq.documentElement&&"parsererror"==c.mq.documentElement.nodeName&&(k+=c.mq.documentElement.textContent));if(e){if(/text\/plain/.test(a.getResponseHeader("Content-Type"))||/<Connector\s*/.test(e))e=d.tools.htmlEncode(e),e=e.replace(/\n/g,"<br>"),e='<div style="width:600px; overflow:scroll"><font>'+e+"</font></div>";f.msgDialog(f.lang.SysErrorDlgTitle,
k+"<br>"+f.lang.ErrorMsg.XmlRawResponse.replace("%s","<br><br>"+e))}else f.msgDialog(f.lang.SysErrorDlgTitle,k);return{}},e=function(a){return b(a)?a.responseBody:null},k=function(b,c,f,e){var k=!!c;d.log("[AJAX] "+(e?"POST":"GET")+" "+b);var r=a();if(!r)return null;e?r.open("POST",b,k):r.open("GET",b,k);k&&(r.onreadystatechange=function(){4==r.readyState&&(c(f(r)),r=null)});e?(r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(e)):r.send(null);return k?"":f(r)};return{load:function(b,
a,f){return k(b,a,c,f)},loadXml:function(b,a,c){return k(b,a,f,c)},loadStream:function(b,a,c){return k(b,a,e,c)}}}();CKFinder.ajax=d.ajax;(function(){var a=[];d.tools={arrayCompare:function(b,a){if(!b&&!a)return!0;if(!b||!a||b.length!=a.length)return!1;for(var f=0;f<b.length;f++)if(b[f]!=a[f])return!1;return!0},clone:function(b){var a;if(b&&b instanceof Array){a=[];for(var f=0;f<b.length;f++)a[f]=this.clone(b[f]);return a}if(null===b||"object"!=typeof b||b instanceof String||b instanceof Number||
b instanceof Boolean||b instanceof Date)return b;a=new b.constructor;for(f in b)a[f]=this.clone(b[f]);return a},capitalize:function(b){return b.charAt(0).toUpperCase()+b.substring(1).toLowerCase()},extend:function(b){var a=arguments.length,f,e;"boolean"==typeof(f=arguments[a-1])?a--:"boolean"==typeof(f=arguments[a-2])&&(e=arguments[a-1],a-=2);for(var d=1;d<a;d++){var g=arguments[d],h;for(h in g)if(!0===f||void 0==b[h])if(!e||h in e)b[h]=g[h]}return b},prototypedCopy:function(b){var a=function(){};
a.prototype=b;return new a},isArray:function(b){return!!b&&b instanceof Array},cssStyleToDomStyle:function(){var b=document.createElement("div").style,a="undefined"!=typeof b.cssFloat?"cssFloat":"undefined"!=typeof b.styleFloat?"styleFloat":"float";return function(b){return"float"==b?a:b.replace(/-./g,function(b){return b.substr(1).toUpperCase()})}}(),htmlEncode:function(b){var a=function(b){var a=new x.element("span");a.setText(b);return a.getHtml()},f="<br>"==a("\n").toLowerCase()?function(b){return a(b).replace(/<br>/gi,
"\n")}:a,e=">"==a(">")?function(b){return f(b).replace(/>/g,"&gt;")}:f;this.htmlEncode="&nbsp; "==a("  ")?function(b){return e(b).replace(/&nbsp;/g," ")}:e;return this.htmlEncode(b)},getNextNumber:function(){var b=0;return function(){return++b}}(),override:function(b,a){return a(b)},setTimeout:function(b,a,f,e,d){d||(d=window);f||(f=d);return d.setTimeout(function(){e?b.apply(f,[].concat(e)):b.apply(f)},a||0)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(a){return a?a.replace(b,
""):null}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(a){return a?a.replace(b,""):null}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(a){return a?a.replace(b,""):null}}(),indexOf:Array.prototype.indexOf?function(b,a){return b.indexOf(a)}:function(b,a){for(var f=0,e=b.length;f<e;f++)if(b[f]===a)return f;return-1},bind:function(b,a){return function(){return b.apply(a,arguments)}},createClass:function(b){var a=b.$,f=b.base,e=b.vd||b._,k=b.ej;b=b.statics;if(e)var g=a,a=function(){var b=
this._||(this._={}),a;for(a in e){var c=e[a];b[a]="function"==typeof c?d.tools.bind(c,this):c}g.apply(this,arguments)};f&&(a.prototype=this.prototypedCopy(f.prototype),a.prototype.constructor=a,a.prototype.base=function(){this.base=f.prototype.base;f.apply(this,arguments);this.base=arguments.callee});k&&this.extend(a.prototype,k,!0);b&&this.extend(a,b,!0);return a},addFunction:function(b,c){return a.push(function(){b.apply(c||this,arguments)})-1},removeFunction:function(b){a[b]=null},callFunction:function(b){return a[b].apply(window,
Array.prototype.slice.call(arguments,1))},cssLength:function(){var b=/^\d+(?:\.\d+)?$/;return function(a){return a+(b.test(a)?"px":"")}}(),repeat:function(b,a){return Array(a+1).join(b)},deepCopy:function(b){var a={};if("object"==typeof b){"undefined"!=typeof b.length&&(a=[]);for(var f in b)a[f]=null===b[f]?null:"object"==typeof b[f]?d.tools.deepCopy(b[f]):b[f]}return a},getUrlParam:function(b,a){var f=(a||window).location.search.match(new RegExp("(?:[?&]|&amp;)"+b+"=([^&]+)","i"));return f&&1<f.length?
f[1]:null},htmlEncode:function(b){if(!b)return"";b="string"!=typeof b?b.toString():b;b=b.replace(/&/g,"&amp;");b=b.replace(/</g,"&lt;");return b=b.replace(/>/g,"&gt;")},setCookie:function(b,a,f){document.cookie=b+"="+a+(f?"":"; expires=Thu, 6 Oct 2016 01:00:00 UTC; path=/")},getCookie:function(b){return(b=document.cookie.match(new RegExp("(^|\\s|;)"+b+"=([^;]*)")))&&0<b.length?b[2]:""},mH:function(b){y?(b.$.onfocusin=function(){b.addClass("focus_inside")},b.$.onfocusout=function(){b.removeClass("focus_inside")}):
(b.$.addEventListener("focus",function(){b.addClass("focus_inside")},!0),b.$.addEventListener("blur",function(){b.removeClass("focus_inside")},!0))},formatSize:function(b,a,f){return 0==b?"0":1>b?a.Kb.replace("%1",1):1024>b?(f||(b=b.toFixed(2)),a.Kb.replace("%1",b)):1048576>b?a.Mb.replace("%1",(b/1024).toFixed(2)):a.Gb.replace("%1",(b/1048576).toFixed(2))},formatSpeed:function(b,a){return a.SizePerSecond.replace("%1",this.formatSize(b,a))}};CKFinder._.callFunction=d.tools.callFunction;CKFinder.tools=
d.tools})();var m=d.tools;x.event=function(a){this.$=a};x.event.prototype={oV:function(){return this.$.keyCode||this.$.which||0},db:function(){var a=this.oV();if(this.$.ctrlKey||this.$.metaKey)a+=d.bP;this.$.shiftKey&&(a+=d.dy);this.$.altKey&&(a+=d.eJ);return a},preventDefault:function(a){var b=this.$;b.preventDefault?b.preventDefault():b.returnValue=!1;a&&this.stopPropagation()},stopPropagation:function(){var a=this.$;a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},bK:function(){var a=this.$.target||
this.$.srcElement;return a?new x.bi(a):null},getButton:function(){if(this.$.which)return this.$.which;switch(this.$.button){case 1:return 1;case 4:return 2;case 2:return 3}},ov:function(){return 1==this.getButton()}};d.bP=1E3;d.dy=2E3;d.eJ=4E3;x.dE=function(a){a&&(this.$=a)};x.dE.prototype=function(){var a=function(b,a){return function(f){"undefined"!=typeof d&&b.oW(a,new x.event(f))}};return{kk:function(){var b;(b=this.dw("_"))||this.fL("_",b={});return b},on:function(b){var c=this.dw("_cke_nativeListeners");
c||(c={},this.fL("_cke_nativeListeners",c));c[b]||(c=c[b]=a(this,b),this.$.addEventListener?this.$.addEventListener(b,c,!!d.event.jP):this.$.attachEvent&&this.$.attachEvent("on"+b,c));return d.event.prototype.on.apply(this,arguments)},removeListener:function(b){d.event.prototype.removeListener.apply(this,arguments);if(!this.rC(b)){var a=this.dw("_cke_nativeListeners"),f=a&&a[b];f&&(this.$.removeEventListener?this.$.removeEventListener(b,f,!1):this.$.detachEvent&&this.$.detachEvent("on"+b,f),delete a[b])}}}}();
(function(a){var b={};a.equals=function(b){return b&&b.$===this.$};a.fL=function(a,f){var e=this.iY();(b[e]||(b[e]={}))[a]=f;return this};a.dw=function(a){var f=this.$._ckf_expando;return(f=f&&b[f])&&f[a]};a.jF=function(a){var f=this.$._ckf_expando,e=(f=f&&b[f])&&f[a];"undefined"!=typeof e&&delete f[a];return e||null};a.iY=function(){return this.$._ckf_expando||(this.$._ckf_expando=m.getNextNumber())};d.event.du(a)})(x.dE.prototype);x.window=function(a){x.dE.call(this,a)};x.window.prototype=new x.dE;
m.extend(x.window.prototype,{focus:function(){p.webkit&&this.$.parent&&this.$.parent.focus();this.$.focus()},eR:function(){var a=this.$.document,b="CSS1Compat"==a.compatMode;return{width:(b?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(b?a.documentElement.clientHeight:a.body.clientHeight)||0}},hV:function(){var a=this.$;if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};a=a.document;return{x:a.documentElement.scrollLeft||a.body.scrollLeft||0,y:a.documentElement.scrollTop||
a.body.scrollTop||0}}});x.document=function(a){x.dE.call(this,a)};var L=x.document;L.prototype=new x.dE;m.extend(L.prototype,{appendStyleSheet:function(a){if(this.$.createStyleSheet)this.$.createStyleSheet(a);else{var b=new x.element("link");b.setAttributes({rel:"stylesheet",type:"text/css",href:a});this.getHead().append(b)}},createElement:function(a,b){var c=new x.element(a,this);b&&(b.attributes&&c.setAttributes(b.attributes),b.gS&&c.setStyles(b.gS));return c},jT:function(a){return new x.text(a,
this)},focus:function(){this.getWindow().focus()},getById:function(a){return(a=this.$.getElementById(a))?new x.element(a):null},vu:function(a,b){for(var c=this.$.documentElement,f=0;c&&f<a.length;f++){var e=a[f];if(b)for(var d=-1,g=0;g<c.childNodes.length;g++){var h=c.childNodes[g];if(!0!==b||3!=h.nodeType||!h.previousSibling||3!=h.previousSibling.nodeType)if(d++,d==e){c=h;break}}else c=c.childNodes[e]}return c?new x.bi(c):null},eG:function(a,b){!y&&b&&(a=b+":"+a);return new x.iT(this.$.getElementsByTagName(a))},
getHead:function(){var a=this.$.getElementsByTagName("head")[0],a=new x.element(a);return(this.getHead=function(){return a})()},bH:function(){var a=new x.element(this.$.body);return(this.bH=function(){return a})()},gT:function(){var a=new x.element(this.$.documentElement);return(this.gT=function(){return a})()},getWindow:function(){var a=new x.window(this.$.parentWindow||this.$.defaultView);return(this.getWindow=function(){return a})()}});x.bi=function(a){if(a){switch(a.nodeType){case d.cv:return new x.element(a);
case d.fl:return new x.text(a)}x.dE.call(this,a)}return this};x.bi.prototype=new x.dE;d.cv=1;d.fl=3;d.va=8;d.om=11;d.oh=0;d.op=1;d.gW=2;d.gX=4;d.mo=8;d.lF=16;m.extend(x.bi.prototype,{appendTo:function(a,b){a.append(this,b);return a},clone:function(a,b){var c=this.$.cloneNode(a);if(!b){var f=function(a){if(a.nodeType==d.cv){a.removeAttribute("id",!1);a.removeAttribute("_ckf_expando",!1);a=a.childNodes;for(var b=0;b<a.length;b++)f(a[b])}};f(c)}return new x.bi(c)},gE:function(){return!!this.$.previousSibling},
ge:function(){return!!this.$.nextSibling},kB:function(a){a.$.parentNode.insertBefore(this.$,a.$.nextSibling);return a},insertBefore:function(a){a.$.parentNode.insertBefore(this.$,a.$);return a},vP:function(a){this.$.parentNode.insertBefore(a.$,this.$);return a},lU:function(a){for(var b=[],c=this.getDocument().$.documentElement,f=this.$;f&&f!=c;){for(var e=f.parentNode,d=-1,g=0;g<e.childNodes.length;g++){var h=e.childNodes[g];if(!a||3!=h.nodeType||!h.previousSibling||3!=h.previousSibling.nodeType)if(d++,
h==f)break}b.unshift(d);f=f.parentNode}return b},getDocument:function(){var a=new L(this.$.ownerDocument||this.$.parentNode.ownerDocument);return(this.getDocument=function(){return a})()},vA:function(){for(var a=this.$,b=a.parentNode&&a.parentNode.firstChild,c=-1;b;){c++;if(b==a)return c;b=b.nextSibling}return-1},hL:function(a,b,c){if(c&&!c.call){var f=c;c=function(a){return!a.equals(f)}}a=!a&&this.getFirst&&this.getFirst();var e;if(!a){if(this.type==d.cv&&c&&!1===c(this,!0))return null;a=this.dG()}for(;!a&&
(e=(e||this).getParent());){if(c&&!1===c(e,!0))return null;a=e.dG()}return!a||c&&!1===c(a)?null:b&&b!=a.type?a.hL(!1,b,c):a},hZ:function(a,b,c){if(c&&!c.call){var f=c;c=function(a){return!a.equals(f)}}a=!a&&this.dB&&this.dB();var e;if(!a){if(this.type==d.cv&&c&&!1===c(this,!0))return null;a=this.cf()}for(;!a&&(e=(e||this).getParent());){if(c&&!1===c(e,!0))return null;a=e.cf()}return!a||c&&!1===c(a)?null:b&&a.type!=b?a.hZ(!1,b,c):a},cf:function(a){var b=this.$,c;do c=(b=b.previousSibling)&&new x.bi(b);
while(c&&a&&!a(c));return c},vs:function(){return this.cf(function(a){return 1==a.$.nodeType})},dG:function(a){var b=this.$,c;do c=(b=b.nextSibling)&&new x.bi(b);while(c&&a&&!a(c));return c},vk:function(){return this.dG(function(a){return 1==a.$.nodeType})},getParent:function(){var a=this.$.parentNode;return a&&1==a.nodeType?new x.bi(a):null},vn:function(a){var b=this,c=[];do c[a?"push":"unshift"](b);while(b=b.getParent());return c},vv:function(a){if(a.equals(this))return this;if(a.contains&&a.contains(this))return a;
var b=this.contains?this:this.getParent();do if(b.contains(a))return b;while(b=b.getParent());return null},gz:function(a){var b=this.$,c=a.$;if(b.compareDocumentPosition)return b.compareDocumentPosition(c);if(b==c)return d.oh;if(this.type==d.cv&&a.type==d.cv){if(b.contains){if(b.contains(c))return d.lF+d.gX;if(c.contains(b))return d.mo+d.gW}if("sourceIndex"in b)return 0>b.sourceIndex||0>c.sourceIndex?d.op:b.sourceIndex<c.sourceIndex?d.gX:d.gW}b=this.lU();a=a.lU();for(var c=Math.min(b.length,a.length),
f=0;f<=c-1;f++)if(b[f]!=a[f]){if(f<c)return b[f]<a[f]?d.gX:d.gW;break}return b.length<a.length?d.lF+d.gX:d.mo+d.gW},vw:function(a,b){var c=this.$;b||(c=c.parentNode);for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return new x.bi(c);c=c.parentNode}return null},vX:function(a,b){var c=this.$;b||(c=c.parentNode);for(;c;){if(c.nodeName&&c.nodeName.toLowerCase()==a)return!0;c=c.parentNode}return!1},move:function(a,b){a.append(this.remove(),b)},remove:function(a){var b=this.$,c=b.parentNode;if(c){if(a)for(;a=
b.firstChild;)c.insertBefore(b.removeChild(a),b);c.removeChild(b)}return this},replace:function(a){this.insertBefore(a);a.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var a;this.getFirst&&(a=this.getFirst());){if(a.type==d.fl){var b=m.ltrim(a.getText()),c=a.hJ();if(b)b.length<c&&(a.split(c-b.length),this.$.removeChild(this.$.firstChild));else{a.remove();continue}}break}},rtrim:function(){for(var a;this.dB&&(a=this.dB());){if(a.type==d.fl){var b=m.rtrim(a.getText()),c=
a.hJ();if(b)b.length<c&&(a.split(b.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{a.remove();continue}}break}y||p.opera||(a=this.$.lastChild)&&1==a.type&&"br"==a.nodeName.toLowerCase()&&a.parentNode.removeChild(a)}});x.iT=function(a){this.$=a};x.iT.prototype={count:function(){return this.$.length},getItem:function(a){return(a=this.$[a])?new x.bi(a):null}};x.element=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createElement(a));x.dE.call(this,a)};var A=x.element;A.eB=
function(a){return a&&(a.$?a:new A(a))};A.prototype=new x.bi;A.kE=function(a,b){var c=new A("div",b);c.setHtml(a);return c.getFirst().remove()};A.rS=function(a,b,c,f){var d=b.dw("list_marker_id")||b.fL("list_marker_id",m.getNextNumber()).dw("list_marker_id"),k=b.dw("list_marker_names")||b.fL("list_marker_names",{}).dw("list_marker_names");a[d]=b;k[c]=1;return b.fL(c,f)};A.sM=function(a){for(var b in a)A.qZ(a,a[b],!0)};A.qZ=function(a,b,c){var f=b.dw("list_marker_names"),d=b.dw("list_marker_id"),k;
for(k in f)b.jF(k);b.jF("list_marker_names");c&&(b.jF("list_marker_id"),delete a[d])};m.extend(A.prototype,{type:d.cv,addClass:function(a){var b=this.$.className;b&&((new RegExp("(?:^|\\s)"+a+"(?:\\s|$)","")).test(b)||(b+=" "+a));this.$.className=b||a},removeClass:function(a){var b=this.getAttribute("class");b&&(a=new RegExp("(?:^|\\s+)"+a+"(?=\\s|$)","i"),a.test(b)&&((b=b.replace(a,"").replace(/^\s+/,""))?this.setAttribute("class",b):this.removeAttribute("class")))},hasClass:function(a){return(new RegExp("(?:^|\\s+)"+
a+"(?=\\s|$)","")).test(this.getAttribute("class"))},append:function(a,b){"string"==typeof a&&(a=this.getDocument().createElement(a));b?this.$.insertBefore(a.$,this.$.firstChild):this.$.appendChild(a.$);d.log("[DOM] DOM flush into "+this.getName());return a},appendHtml:function(a){if(this.$.childNodes.length){var b=new A("div",this.getDocument());b.setHtml(a);b.jg(this)}else this.setHtml(a)},appendText:function(a){void 0!=this.$.text?this.$.text+=a:this.append(new x.text(a))},pd:function(){for(var a=
this.dB();a&&a.type==d.fl&&!m.rtrim(a.getText());)a=a.cf();a&&a.is&&a.is("br")||this.append(p.opera?this.getDocument().jT(""):this.getDocument().createElement("br"))},tV:function(a){var b=new x.mk(this.getDocument());b.setStartAfter(this);b.setEndAfter(a);a=b.extractContents();b.insertNode(this.remove());a.kA(this)},contains:y||p.webkit?function(a){var b=this.$;return a.type!=d.cv?b.contains(a.getParent().$):b!=a.$&&b.contains(a.$)}:function(a){return!!(this.$.compareDocumentPosition(a.$)&16)},focus:function(){try{this.$.focus()}catch(a){}},
getHtml:function(){return this.$.innerHTML},fH:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var a=this.$.ownerDocument.createElement("div");a.appendChild(this.$.cloneNode(!0));return a.innerHTML},setHtml:function(a){d.log("[DOM] DOM flush into "+this.getName());return this.$.innerHTML=a},setText:function(a){A.prototype.setText=void 0!=this.$.innerText?function(a){d.log("[DOM] Text flush");return this.$.innerText=a}:function(a){d.log("[DOM] Text flush");return this.$.textContent=
a};return this.setText(a)},getAttribute:function(){var a=function(a){return this.$.getAttribute(a,2)};return y&&(p.ie7Compat||p.ie6Compat)?function(a){switch(a){case "class":a="className";break;case "tabindex":return a=this.$.getAttribute(a,2),0!==a&&0===this.$.tabIndex&&(a=null),a;case "checked":return this.$.checked;case "style":return this.$.style.cssText}return this.$.getAttribute(a,2)}:a}(),getChildren:function(){return new x.iT(this.$.childNodes)},getComputedStyle:y?function(a){return this.$.currentStyle[m.cssStyleToDomStyle(a)]}:
function(a){return this.getWindow().$.getComputedStyle(this.$,"").getPropertyValue(a)},pf:function(){var a=d.ga[this.getName()];this.pf=function(){return a};return a},eG:L.prototype.eG,vp:y?function(){var a=this.$.tabIndex;0!==a||d.ga.ug[this.getName()]||0===parseInt(this.getAttribute("tabindex"),10)||(a=-1);return a}:p.webkit?function(){var a=this.$.tabIndex;void 0==a&&(a=parseInt(this.getAttribute("tabindex"),10),isNaN(a)&&(a=-1));return a}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||
this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},dS:function(){return this.$.id||null},data:function(a,b){a="data-"+a;if(void 0===b)return this.getAttribute(a);!1===b?this.removeAttribute(a):this.setAttribute(a,b);return null},vm:function(){return this.$.name||null},getName:function(){var a=this.$.nodeName.toLowerCase();if(y&&!(8<document.documentMode)){var b=this.$.scopeName;"HTML"!=b&&(a=b.toLowerCase()+":"+a)}return(this.getName=function(){return a})()},getValue:function(){return this.$.value},
getFirst:function(){var a=this.$.firstChild;return a?new x.bi(a):null},dB:function(a){var b=this.$.lastChild;(b=b&&new x.bi(b))&&a&&!a(b)&&(b=b.cf(a));return b},rd:function(a){return this.$.style[m.cssStyleToDomStyle(a)]},is:function(){for(var a=this.getName(),b=0;b<arguments.length;b++)if(arguments[b]==a)return!0;return!1},vL:function(){var a=this.getName();return(a=!d.ga.uj[a]&&(d.ga[a]||d.ga.span))&&a["#"]},isIdentical:function(a){if(this.getName()!=a.getName())return!1;var b=this.$.attributes,
c=a.$.attributes,f=b.length,d=c.length;if(!y&&f!=d)return!1;for(var k=0;k<f;k++){var g=b[k];if((!y||g.specified&&"_ckf_expando"!=g.nodeName)&&g.nodeValue!=a.getAttribute(g.nodeName))return!1}if(y)for(k=0;k<d;k++)if(g=c[k],(!y||g.specified&&"_ckf_expando"!=g.nodeName)&&g.nodeValue!=b.getAttribute(g.nodeName))return!1;return!0},isVisible:function(){return this.$.offsetWidth&&"hidden"!=this.$.style.visibility},hasAttributes:y&&(p.ie7Compat||p.ie6Compat)?function(){for(var a=this.$.attributes,b=0;b<a.length;b++){var c=
a[b];switch(c.nodeName){case "class":if(this.getAttribute("class"))return!0;case "_ckf_expando":continue;default:if(c.specified)return!0}}return!1}:function(){var a=this.$.attributes;return 1<a.length||1==a.length&&"_ckf_expando"!=a[0].nodeName},hasAttribute:function(a){a=this.$.attributes.getNamedItem(a);return!(!a||!a.specified)},hide:function(){this.setStyle("display","none")},jg:function(a,b){var c=this.$;a=a.$;if(c!=a){var f;if(b)for(;f=c.lastChild;)a.insertBefore(c.removeChild(f),a.firstChild);
else for(;f=c.firstChild;)a.appendChild(c.removeChild(f))}},show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var a=function(a,c){this.$.setAttribute(a,c);return this};return y&&(p.ie7Compat||p.ie6Compat)?function(b,c){"class"==b?this.$.className=c:"style"==b?this.$.style.cssText=c:"tabindex"==b?this.$.tabIndex=c:"checked"==b?this.$.checked=c:a.apply(this,arguments);return this}:a}(),setAttributes:function(a){for(var b in a)this.setAttribute(b,a[b]);return this},
setValue:function(a){this.$.value=a;return this},removeAttribute:function(){var a=function(a){this.$.removeAttribute(a)};return y&&(p.ie7Compat||p.ie6Compat)?function(a){"class"==a?a="className":"tabindex"==a&&(a="tabIndex");this.$.removeAttribute(a)}:a}(),uW:function(a){for(var b=0;b<a.length;b++)this.removeAttribute(a[b])},removeStyle:function(a){this.$.style.removeAttribute?this.$.style.removeAttribute(m.cssStyleToDomStyle(a)):this.setStyle(a,"");this.$.style.cssText||this.removeAttribute("style")},
setStyle:function(a,b){this.$.style[m.cssStyleToDomStyle(a)]=b;return this},setStyles:function(a){for(var b in a)this.setStyle(b,a[b]);return this},setOpacity:function(a){y&&9>p.version?(a=Math.round(100*a),this.setStyle("filter",100<=a?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+a+")")):this.setStyle("opacity",a)},unselectable:p.gecko?function(){this.$.style.MozUserSelect="none"}:p.webkit?function(){this.$.style.uE="none"}:function(){if(y||p.opera){var a=this.$,b,c=0;for(a.unselectable=
"on";b=a.all[c++];)switch(b.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:b.unselectable="on"}}},vr:function(){for(var a=this;"html"!=a.getName();){if("static"!=a.getComputedStyle("position"))return a;a=a.getParent()}return null},ir:function(a){var b=0,c=0,f=this.getDocument().bH(),d="BackCompat"==this.getDocument().$.compatMode,k=this.getDocument();if(document.documentElement.getBoundingClientRect){var g=this.$.getBoundingClientRect(),h=k.$.documentElement,
l=h.clientTop||f.$.clientTop||0,q=h.clientLeft||f.$.clientLeft||0,n=!0;y&&(n=k.gT().contains(this),k=k.bH().contains(this),n=d&&k||!d&&n);n&&(b=g.left+(!d&&h.scrollLeft||f.$.scrollLeft),b-=q,c=g.top+(!d&&h.scrollTop||f.$.scrollTop),c-=l)}else for(f=this,k=null;f&&"body"!=f.getName()&&"html"!=f.getName();){b+=f.$.offsetLeft-f.$.scrollLeft;c+=f.$.offsetTop-f.$.scrollTop;f.equals(this)||(b+=f.$.clientLeft||0,c+=f.$.clientTop||0);for(;k&&!k.equals(f);)b-=k.$.scrollLeft,c-=k.$.scrollTop,k=k.getParent();
k=f;f=(g=f.$.offsetParent)?new A(g):null}a&&(f=this.getWindow(),k=a.getWindow(),!f.equals(k)&&f.$.frameElement&&(a=(new A(f.$.frameElement)).ir(a),b+=a.x,c+=a.y));document.documentElement.getBoundingClientRect||!p.gecko||d||(b+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0);return{x:b,y:c}},scrollIntoView:function(a){var b=this.getWindow(),c=b.eR().height,f=-1*c;a?f+=c:(f+=this.$.offsetHeight||0,f+=parseInt(this.getComputedStyle("marginBottom")||0,10)||0);a=this.ir();f+=a.y;f=0>f?0:f;a=b.hV().y;(f>
a||f<a-c)&&b.$.scrollTo(0,f)},bR:function(a){switch(a){case d.eV:this.addClass("cke_on");this.removeClass("cke_off");this.removeClass("cke_disabled");break;case d.aY:this.addClass("cke_disabled");this.removeClass("cke_off");this.removeClass("cke_on");break;default:this.addClass("cke_off"),this.removeClass("cke_on"),this.removeClass("cke_disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(b){a.src=a.src,y&&7>p.version&&window.showModalDialog('javascript:document.write("<script>window.setTimeout(function(){window.close();},50);\x3c/script>")')}return a&&
new L(a.contentWindow.document)},qw:function(a,b){var c=this.$.attributes;b=b||{};for(var f=0;f<c.length;f++){var d=c[f];if(d.specified||y&&d.nodeValue&&"value"==d.nodeName.toLowerCase()){var k=d.nodeName;if(!(k in b)){var g=this.getAttribute(k);null===g&&(g=d.nodeValue);a.setAttribute(k,g)}}}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var b=this.getDocument();a=new A(a,b);this.qw(a);this.jg(a);this.$.parentNode.replaceChild(a.$,
this.$);a.$._ckf_expando=this.$._ckf_expando;this.$=a.$}},getChild:function(a){var b=this.$;if(a.slice)for(;0<a.length&&b;)b=b.childNodes[a.shift()];else b=b.childNodes[a];return b?new x.bi(b):null},iu:function(){return this.$.childNodes.length},hX:function(){this.on("contextmenu",function(a){a.data.bK().hasClass("cke_enable_context_menu")||a.data.preventDefault()})},toString:function(){return this.getName()+"#"+this.dS()+"."+this.getAttribute("class")}});(function(){function a(a){for(var f=0,d=0,
k=b[a].length;d<k;d++)f+=parseInt(this.getComputedStyle(b[a][d])||0,10)||0;return f}var b={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};A.prototype.setSize=function(b,f,d){"number"==typeof f&&(!d||y&&p.quirks||(f-=a.call(this,b)),this.setStyle(b,f+"px"))};A.prototype.hR=function(b,f){var d=Math.max(this.$["offset"+m.capitalize(b)],this.$["client"+m.capitalize(b)])||0;f&&(d-=a.call(this,
b));return d}})();d.command=function(a,b){this.pW=[];this.exec=function(c){if(this.bu==d.aY||!1===this.readOnly&&a.config.readOnly)return!1;b.oD&&a.focus();return!1!==b.exec.call(this,a,c)};m.extend(this,b,{iH:{qt:1},oD:!0,bu:d.aS});d.event.call(this)};d.command.prototype={enable:function(){this.bu==d.aY&&this.bR(this.vf&&"undefined"!=typeof this.lJ?this.lJ:d.aS)},disable:function(){this.bR(d.aY)},bR:function(a){if(this.bu==a)return!1;this.lJ=this.bu;this.bu=a;this.oW("bu");return!0},rJ:function(){this.bu==
d.aS?this.bR(d.eV):this.bu==d.eV&&this.bR(d.aS)}};d.event.du(d.command.prototype,!0);d.config={customConfig:d.getUrl("config.js"),connectorLanguage:"java",language:"",defaultLanguage:"en",defaultViewType:"thumbnails",defaultSortBy:"filename",defaultDisplayFilename:!0,defaultDisplayDate:!0,defaultDisplayFilesize:!0,defaultDisplayResize:!1,pO:"",height:400,plugins:"foldertree,folder,filebrowser,container,connector,resource,toolbar,formpanel,filesview,status,contextmenu,uploadform,keystrokes,dragdrop,basket,dialog,tools,resize,maximize,help,flashupload,mobile,html5upload,gallery",
extraPlugins:"",fileIcons:"ai|avi|bmp|cs|dll|doc|docx|exe|fla|gif|jpg|js|mdb|mp3|ogg|pdf|ppt|pptx|rdp|swf|swt|txt|vsd|xls|xlsx|xml|zip",removePlugins:"",tabIndex:0,thumbnailDelay:50,theme:"default",skin:"kama",width:"100%",baseFloatZIndex:1E4,directDownload:!1,log:!1,logStackTrace:!1,rememberLastFolder:!0,id:null,startupPath:"",startupFolderExpanded:!0,selectActionFunction:null,selectActionData:null,selectThumbnailActionFunction:null,selectThumbnailActionData:null,disableThumbnailSelection:!1,thumbsUrl:null,
thumbsDirectAccess:!1,imagesMaxWidth:0,imagesMaxHeight:0,selectActionType:"js",resourceType:null,disableHelpButton:!1,connectorPath:"",connectorInfo:"",uiColor:null,showContextMenuArrow:!1,useNativeIcons:!1,maxSimultaneousUploads:1,readOnly:!1,selectMultiple:!0};var J=CKFinder.config=d.config;d.dU=function(a,b){this.rG=a;this.message=b};d.fs=function(a){if(a.fs)return a.fs;this.hasFocus=!1;this._={application:a};return this};d.fs.prototype={focus:function(){this._.fW&&clearTimeout(this._.fW);if(!this.hasFocus){d.nG&&
d.nG.fs.ly();var a=this._.application;a.container.getFirst().addClass("cke_focus");this.hasFocus=!0;a.oW("focus")}},blur:function(){var a=this;a._.fW&&clearTimeout(a._.fW);a._.fW=setTimeout(function(){delete a._.fW;a.ly()},100)},ly:function(){if(this.hasFocus){var a=this._.application;a.container.getFirst().removeClass("cke_focus");this.hasFocus=!1;a.oW("blur")}}};(function(){d.lang={ko:{bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,"es-mx":1,et:1,fa:1,fi:1,fr:1,gu:1,he:1,hi:1,hr:1,hu:1,it:1,
ja:1,lv:1,lt:1,nb:1,nl:1,no:1,nn:1,pl:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sv:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1},load:function(a,b,c){a&&d.lang.ko[a]||(a=this.jV(b,a));this[a]?c(a,this[a]):d.scriptLoader.load(d.getUrl("lang/"+a+".js"),function(){c(a,CKFinder.lang[a])},this)},jV:function(a,b){var c=this.ko;b=b||navigator.userLanguage||navigator.language;var f=b.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),e=f[1],f=f[2];c[e+"-"+f]?e=e+"-"+f:c[e]||(e=null);d.lang.jV=e?function(){return e}:function(a){return a};
return e||a}}})();(function(){d.log=function(){if(J.log||window.CKFINDER_LOG){for(var a="",b=0;b<arguments.length;b++){var c=arguments[b];if(c)switch(a&&(a+="; "),typeof c){case "function":c=(c=/function (\w+?)\(/.exec(c.toString()))?c[1]:"anonymous func";a+=c;break;default:a+=c?c.toString():""}}d._.log.push(a);"object"==typeof window.console&&(console.log.apply?console.log.apply(console,arguments):console.log(a))}};d.ba=function(a){J.logStackTrace&&d.log("[EXCEPTION] "+a.toString());return a};d.mZ=
function(a){a="";for(var b=0;b<d._.log.length;b++)a+=b+1+". "+d._.log[b]+"\n";return a};d._.log=[]})();d.scriptLoader=function(){var a={},b={};return{load:function(c,f,e,k,g){var h="string"==typeof c;h&&(c=[c]);e||(e=d);var l=c.length,q=[],n=[],r=function(a){f&&(h?f.call(e,a):f.call(e,q,n))};if(0===l)r(!0);else for(var v=function(a,b){(b?q:n).push(a);0>=--l&&r(b)},w=function(c,f){a[c]=1;var d=b[c];delete b[c];for(var e=0;e<d.length;e++)d[e](c,f)},D=function(c){if(!0!==k&&a[c])v(c,!0);else{var e=b[c]||
(b[c]=[]);e.push(v);if(!(1<e.length)){var h=new A("script");h.setAttributes({type:"text/javascript",src:c});f&&(y?h.$.onreadystatechange=function(){if("loaded"==h.$.readyState||"complete"==h.$.readyState)h.$.onreadystatechange=null,d.log("[LOADED] "+c),w(c,!0)}:(h.$.onload=function(){setTimeout(function(){d.log("[LOADED] "+c);w(c,!0)},0)},h.$.onerror=function(){w(c,!1)}));h.appendTo(g?g:d.document.getHead())}}},t=0,F=l;t<F;t++)D(c[t])},uq:function(a){var b=new A("script");b.setAttribute("type","text/javascript");
b.appendText(a);b.appendTo(d.document.getHead())}}}();CKFinder.scriptLoader=d.scriptLoader;d.fQ=function(a,b){this.basePath=a;this.fileName=b;this.bX={};this.loaded={};this.jn={};this._={rZ:{}}};d.fQ.prototype={add:function(a,b){if(this.bX[a])throw'[CKFINDER.fQ.add] The resource name "'+a+'" is already bX.';this.bX[a]=b||{}},eB:function(a){return this.bX[a]||null},getPath:function(a){var b=this.jn[a];return d.getUrl(b&&b.dir||this.basePath+a+"/")},pi:function(a){var b=this.jn[a];return d.getUrl(this.getPath(a)+
(b&&b.file||this.fileName+".js"))},tR:function(a,b,c){a=a.split(",");for(var d=0;d<a.length;d++)this.jn[a[d]]={dir:b,file:c}},load:function(a,b,c){m.isArray(a)||(a=a?[a]:[]);for(var f=this.loaded,e=this.bX,k=[],g={},h={},l=0;l<a.length;l++){var q=a[l];if(q)if(f[q]||e[q])h[q]=this.eB(q);else{var n=this.pi(q);k.push(n);n in g||(g[n]=[]);g[n].push(q)}}d.scriptLoader.load(k,function(a,d){if(d.length)throw'[CKFINDER.fQ.load] Resource name "'+g[d[0]].join(",")+'" was not found at "'+d[0]+'".';for(var e=
0;e<a.length;e++)for(var l=g[a[e]],k=0;k<l.length;k++){var n=l[k];h[n]=this.eB(n);f[n]=1}b.call(c,h)},this)}};d.plugins=new d.fQ("plugins/","plugin");var z=d.plugins;z.load=m.override(z.load,function(a){return function(b,c,d){var e={},k=function(b){a.call(this,b,function(a){m.extend(e,a);var b=[],g;for(g in a){var n=a[g];if(n=n&&n.bM)for(var r=0;r<n.length;r++)e[n[r]]||b.push(n[r])}if(b.length)k.call(this,b);else{for(g in e)n=e[g],n.onLoad&&!n.onLoad.qK&&(n.onLoad(),n.onLoad.qK=1);c&&c.call(d||window,
e)}},this)};k.call(this,b)}});z.rX=function(a,b,c){this.eB(a).lang[b]=c};(function(){var a={},b=function(b,d){var e=function(){a[b]=1;d()},k=new A("img");k.on("load",e);k.on("error",e);k.setAttribute("src",b)};d.rw={load:function(c,d){for(var e=c.length,k=function(){0===--e&&d()},g=0;g<c.length;g++){var h=c[g];a[h]?k():b(h,k)}}}})();d.skins=function(){var a={},b={},c={},f=function(e,k,g,h){var l=a[k];e.skin||(e.skin=l,l.bz&&l.bz(e));var q=function(a){for(var b=0;b<a.length;b++)a[b]=d.getUrl(c[k]+
a[b])};if(!b[k]){var n=l.ls;if(n&&0<n.length){q(n);d.rw.load(n,function(){b[k]=1;f(e,k,g,h)});return}b[k]=1}g=l[g];l=0;g?g.iB?g.iB[e.name]&&(l=1):g.iB=[]:l=1;if(l)h&&h();else{void 0===g.eb&&(g.eb=[]);void 0===g.eb[e.name]&&(g.eb[e.name]=[]);var r=g.eb[e.name];r.push(h);if(!(1<r.length)){var v=!g.css||!g.css.length,w=!g.js||!g.js.length,D=function(){if(v&&w){g.iB[e.name]=1;for(var a=0;a<r.length;a++)if(r[a])r[a]()}};if(!v){g.rr||(q(g.css),g.rr=1);if(g.qx)for(l=0;l<g.css.length;l++)d.oC.appendStyleSheet(g.css[l]);
else e.on("themeSpace",function(a){if("head"==a.data.space)for(var b=0;b<g.css.length;b++)a.data.html+="<link rel='stylesheet' href='"+g.css[b]+"'>\n";a.removeListener()});v=1}w||(q(g.js),e.scriptLoader.load(g.js,function(){w=1;D()}));D()}}};return{add:function(b,f){a[b]=f;f.fh=c[b]||(c[b]=d.getUrl("skins/"+b+"/"))},loaded:a,load:function(b,k,g){var h=b.gd,l=b.fh;a[h]?f(b,h,k,g):(c[h]=l,d.scriptLoader.load(l+"skin.js",function(){f(b,h,k,g)}))}}}();d.gc=new d.fQ("gc/","theme");d.bY=function(a){if(a.bY)return a.bY;
this._={jZ:{},items:{},application:a};return this};var u=d.bY;u.prototype={add:function(a,b,c){this._.items[a]={type:b,command:c.command||null,mp:Array.prototype.slice.call(arguments,2)}},create:function(a){var b=this._.items[a],c=b&&this._.jZ[b.type];a=b&&b.command&&this._.application.cS(b.command);b=c&&c.create.apply(this,b.mp);a&&a.pW.push(b);return b},kd:function(a,b){this._.jZ[a]=b}};(function(){var a=0,b=function(){var c="ckfinder"+ ++a;return d.instances&&d.instances[c]?b():c},c={},f=function(a){var b=
a.config.customConfig;if(!b)return!1;var e=c[b]||(c[b]={});e.fn?(e.fn.call(a,a.config),a.config.customConfig!=b&&f(a)||a.cr("customConfigLoaded")):d.scriptLoader.load(b,function(){e.fn=CKFinder.customConfig?CKFinder.customConfig:function(){};f(a)});return!0},e=function(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);m.extend(a.config,b,!0);delete a.config.on}k(a)});b&&b.id&&(a.config.id=b.id);b&&void 0!=b.customConfig&&(a.config.customConfig=b.customConfig);
f(a)||a.cr("customConfigLoaded")},k=function(a){var b=a.config.skin.split(","),c=b[0],b=d.getUrl(b[1]||"skins/"+c+"/");a.gd=c;a.fh=b;a.iy="cke_skin_"+c+" skin_"+c;a.qn=a.ox();a.on("uiReady",function(){a.document.getWindow().on("lW",function(){m.setCookie("CKFinder_UTime",Math.round((new Date).getTime()/1E3),!0);m.setCookie("CKFinder_UId",encodeURIComponent(a.id?a.id:location.href),!0)})});a.cr("configLoaded");g(a)},g=function(a){d.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){a.langCode=
b;a.lang=m.prototypedCopy(c);a.lB=function(){var b="['"+a.lang.DateAmPm.join("','")+"']",c=a.lang.DateTime.replace(/dd|mm|yyyy|hh|HH|MM|aa|d|m|yy|h|H|M|a/g,function(a){switch(a){case "d":a="day.replace(/^0/,'')";break;case "dd":a="day";break;case "m":a="month.replace(/^0/,'')";break;case "mm":a="month";break;case "yy":a="year.substr(2)";break;case "yyyy":a="year";break;case "H":a="hour.replace(/^0/,'')";break;case "HH":a="hour";break;case "h":a="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) ).replace(/^0/,'')";
break;case "hh":a="( hour < 12 ? hour : ( ( hour - 12 ) + 100 ).toString().substr( 1 ) )";break;case "M":a="minute.replace(/^0/,'')";break;case "MM":a="minute";break;case "a":a=b+"[ hour < 12 ? 0 : 1 ].charAt(0)";break;case "aa":a=b+"[ hour < 12 ? 0 : 1 ]";break;default:a="'"+a+"'"}return"',"+a+",'"}),c=("'"+c+"'").replace(/('',)|,''$/g,"");return new Function("day","month","year","hour","minute","return ["+c+"].join('');")}();p.gecko&&10900>p.version&&"rtl"==a.lang.dir&&(a.lang.dir="ltr");h(a)})},
h=function(a){var b=a.config,c=b.plugins,f=b.extraPlugins,b=b.removePlugins;if(f)var e=new RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(e,""),c=c+(","+f);b&&(e=new RegExp("(?:^|,)(?:"+b.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(e,""));z.load(c.split(","),function(b){var c=[],f=[],e=[],h;if(a.config.readOnly)for(h in b)!1===b[h].readOnly&&delete b[h];a.plugins=b;for(h in b){var g=b[h],k=g.lang,r=z.getPath(h),q=null;b[h].name=h;g.pathName=r;k&&(q=0<=m.indexOf(k,
a.langCode)?a.langCode:k[0],g.lang[q]?(m.extend(a.lang,g.lang[q]),q=null):e.push(d.getUrl(r+"lang/"+q+".js")));f.push(q);c.push(g)}d.scriptLoader.load(e,function(){for(var b=["eK","bz","gr"],e=0;e<b.length;e++)for(var h=0;h<c.length;h++){var g=c[h];0===e&&f[h]&&g.lang&&m.extend(a.lang,g.lang[f[h]]);g[b[e]]&&(d.log("[PLUGIN] "+g.name+"."+b[e]),g[b[e]](a))}a.oW("pluginsLoaded");l(a)})})},l=function(a){d.skins.load(a,"application",function(){d.skins.load(a,"host",function(){q(a)})})},q=function(a){var b=
a.config.theme;d.gc.load(b,function(){(a.theme=d.gc.eB(b)).pathName=d.gc.getPath(b);a.oW("themeAvailable")})};d.application.prototype.iI=function(a){var c=A.eB(this._.element),f=this._.instanceConfig;delete this._.element;delete this._.instanceConfig;this._.ky={};this._.gS=[];c.getDocument().getWindow().$.CKFinder=a;this.element=c;this.document=null;this.rQ={};this.name=b();if(this.name in d.instances)throw'[CKFINDER.application] The instance "'+this.name+'" already exists.';this.config=m.prototypedCopy(J);
this.bY=new u(this);this.fs=new d.fs(this);this.aL={};this.aG={};this.on("uiReady",function(a){this.document.getWindow().on("lW",this.destroy,this);try{var b=this.document.getWindow();if(this.cg.inPopup&&(!y&&!p.opera||b.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==b.$.top.name)){var c=this,f=[d.oC];if(b.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==b.$.top.name)this.document.focus(),this.focus();d.event.jP=!0;this.document.on("keydown",function(a){if(116==a.data.oV()||
a.data.db()==d.bP+82){c.execCommand("refresh");b.$.event&&b.$.event.keyCode&&(b.$.event.keyCode=5055);try{a.data.preventDefault()}catch(f){}}});d.event.jP=!1;c.cg.inUrlPopup&&f.push(new L(d.oC.getWindow().$.opener.document));var e={};a=function(a,b){e[b].push(a);return function(){var b;if(a&&(b=a.apply(this,arguments)))return b;c.element&&c.element.getDocument().getWindow().$.close()}};for(var h=function(){for(var a=0;a<f.length;a++)f[a].bH().$.onbeforeunload=e[a][0],f[a].getWindow().$.onunload=e[a][1],
f[a].getWindow().$.onbeforeunload=e[a][2]},g=0;g<f.length;g++)e[g]={},f[g].bH().$.onbeforeunload=a(f[g].bH().$.onbeforeunload,g),f[g].getWindow().$.onunload=a(f[g].getWindow().$.onunload,g),f[g].getWindow().$.onbeforeunload=a(f[g].getWindow().$.onbeforeunload,g);b.getDocument().bH().$.onbeforeunload=h;b.$.onunload=h;b.$.onbeforeunload=h}}catch(l){}},this);this.cg=new W(this);this.on("configLoaded",function(a){Z(this.cg,this,this.config.callback);this.id=this.config.id},this);e(this,f);d.oW("instanceCreated",
null,this)}})();m.extend(d.application.prototype,{bD:function(a,b){return this._.ky[a]=new d.command(this,b)},destroy:function(){this.theme.destroy(this);this.oW("destroy");d.remove(this)},execCommand:function(a,b){d.log("[COMMAND] "+a);var c=this.cS(a),f={name:a,rm:b,command:c};return c&&c.bu!=d.aY&&!0!==this.oW("beforeCommandExec",f)&&(f.returnValue=c.exec(f.rm),!c.async&&!0!==this.oW("afterCommandExec",f))?f.returnValue:!1},cS:function(a){return this._.ky[a]},ox:function(){var a=Math.round((new Date).getTime()/
1E3),b=m.getCookie("CKFinder_UTime"),c=decodeURIComponent(m.getCookie("CKFinder_UId"));return c&&b&&c==(this.id?this.id:location.href)&&5>Math.abs(a-b)?1:0},bs:""});(function(){for(var a="",b=49;58>b;b++)a+=String.fromCharCode(b);for(b=65;91>b;b++)73!=b&&79!=b&&(a+=String.fromCharCode(b));d.bs=a;d.nd="lo";d.jG="ho";d.hf=new window.RegExp("^www\\.");d.hg=new window.RegExp(":\\d+$");d.lS=function(a){return a.toLowerCase().replace(d.hf,"").replace(d.hg,"")}})();d.on("loaded",function(){var a=d.application.eb;
if(a){delete d.application.eb;for(var b=0;b<a.length;b++)a[b].iI()}});delete d.dO;d.instances={};d.document=new L(document);d.oC=d.document.getWindow().$!=d.document.getWindow().$.top?new L(d.document.getWindow().$.top.document):d.document;d.add=function(a){d.instances[a.name]=a;d.jt=a;a.on("focus",function(){d.nG!=a&&(d.nG=a,d.oW("nG"))});a.on("blur",function(){d.nG==a&&(d.nG=null,d.oW("nG"))})};d.remove=function(a){delete d.instances[a.name]};d.aL={};d.eV=1;d.aS=2;d.aY=0;d.bF="";(function(){d.aG=
{bX:{},hS:function(a,f,e){a=a+"."+(f.name||f||a);if(void 0!==this.bX[a])throw"[CKFINDER] Widget "+a+" already bX!";d.log("[WIDGET] bX "+a);this.bX[a]=new b(a,e);return this.bX[a]},bz:function(a,b,e,k,g){b=b+"."+(e.name||e||b);var h=this.bX[b],l=m.deepCopy(h.hF);e=function(a,b,c){this.app=a;this.eh=b instanceof A?b:new A(b);this.hF=l?m.extend(l,c):c||{};this._={};b=function(a){this.ib=a};b.prototype=this.tools;this.tools=new b(this);b=h.dT;if(b.length)for(c=0;c<b.length;c++)b[c].call(this,a,this)};
e.prototype=h;k=new e(a,k,g);for(var q in k.fw)k.fw[q].readOnly&&a.config.readOnly?k.ke(q):k.gA(q);if(a.aG[b])throw"[CKFINDER Widget "+b+" already inited.";a.aG[b]=k;d.log("[WIDGET] instanced "+b);return k}};var a={click:1,mouseover:1,mouseout:1,focus:1,blur:1,submit:1,dblclick:1,mousedown:1,mouseup:1,mousemove:1,keypress:1,keydown:1,keyup:1,load:1,lW:1,abort:1,error:1,resize:1,scroll:1,select:1,change:1,reset:1},b=function(a,b){this.id=a;this.readOnly=!0;this.fw={};this.hF=b||{};this.dT=[];this.tools=
new this.tools(this)};b.prototype={gA:function(b){d.log("[WIDGET] Enabling behavior "+b);if(b=this.fw[b])for(var f=0;f<b.cC.length;f++){var e=b.cC[f];if(a[e])this.eh.on(e,b.fO,this);else this.on(e,b.fO,this),this.app.on(e,b.fO,this)}},ke:function(b){d.log("[WIDGET] Disabling behavior "+b);if(b=this.fw[b])for(var f=0;f<b.cC.length;f++){var e=b.cC[f];a[e]?this.eh.removeListener(e,b.fO):this.removeListener(e,b.fO)}},bh:function(a,b,d,k){m.isArray(b)||(b=[b]);this.fw[a]={cC:b,fO:d,readOnly:!1===k};this.eh&&
this.gA(a)},removeBehavior:function(a){delete this.fw[a]},ur:function(){return this.fw},bn:function(){return this.eh},oE:function(){return this.hF},data:function(){return this.hF},tools:function(){}};b.prototype.tools.prototype={kg:function(a){if(a.target==this.ib.eh)return 1}};d.event.du(b.prototype)})();d.xml=function(a){var b=null;if("object"==typeof a)b=a;else if(a=(a||"").replace(/&nbsp;/g,"\u00a0"),window.DOMParser)b=(new DOMParser).parseFromString(a,"text/xml");else if(window.ActiveXObject){try{b=
new ActiveXObject("MSXML2.DOMDocument")}catch(c){try{b=new ActiveXObject("Microsoft.XmlDom")}catch(d){}}b&&(b.async=!1,b.resolveExternals=!1,b.validateOnParse=!1,b.loadXML(a))}this.mq=b};d.xml.prototype={selectSingleNode:function(a,b){var c=this.mq;if(b||(b=c)){if("selectSingleNode"in b)return b.selectSingleNode(a);if(c.evaluate)return(c=c.evaluate(a,b,null,9,null))&&c.singleNodeValue||null;if(b.querySelectorAll){var d=this.selectNodes(a,b);if(1==d.length)return(c=a.match(/\/@(.*$)/))?d[0].getAttributeNode(c[1]):
d[0]}else alert("XPath is not supported in your browser")}return null},selectNodes:function(a,b){var c=this.mq,d=[];if(b||(b=c)){if("selectNodes"in b)return b.selectNodes(a);if(c.evaluate){if(c=c.evaluate(a,b,null,5,null))for(var e;e=c.iterateNext();)d.push(e)}else{if(b.querySelectorAll)return d=a.replace(/\/@(.*$)/,"[$1]").replace(/\//gi,">"),b.querySelectorAll(d);alert("XPath is not supported in your browser")}}return d},vB:function(a,b){var c=this.selectSingleNode(a,b),d=[];if(c)for(c=c.firstChild;c;)c.xml?
d.push(c.xml):window.XMLSerializer&&d.push((new XMLSerializer).serializeToString(c)),c=c.nextSibling;return d.length?d.join(""):null}};(function(){var a={address:1,tY:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,li:1,dt:1,de:1},b={body:1,div:1,table:1,tbody:1,tr:1,td:1,th:1,caption:1,form:1};x.qS=function(c){for(var f=null,e=null,k=[];c;){if(c.type==d.cv){this.qH||(this.qH=c);var g=c.getName();y&&"HTML"!=c.$.scopeName&&(g=c.$.scopeName.toLowerCase()+":"+g);if(!e&&(!f&&a[g]&&(f=c),b[g])){var h;if(h=
!f&&"div"==g){a:{h=c.getChildren();for(var l=0,q=h.count();l<q;l++){var n=h.getItem(l);if(n.type==d.cv&&d.ga.um[n.getName()]){h=!0;break a}}h=!1}h=!h}h?f=c:e=c}k.push(c);if("body"==g)break}c=c.getParent()}this.block=f;this.tX=e;this.elements=k}})();x.qS.prototype={sJ:function(a){var b=this.elements;a=a&&a.elements;if(!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++)if(!b[c].equals(a[c]))return!1;return!0}};x.text=function(a,b){"string"==typeof a&&(a=(b?b.$:document).createTextNode(a));this.$=
a};x.text.prototype=new x.bi;m.extend(x.text.prototype,{type:d.fl,hJ:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},split:function(a){if(y&&a==this.hJ()){var b=this.getDocument().jT("");b.kB(this);return b}b=this.getDocument();a=new x.text(this.$.splitText(a),b);p.ie8&&(b=new x.text("",b),b.kB(a),b.remove());return a},substring:function(a,b){return"number"!=typeof b?this.$.nodeValue.substr(a):this.$.nodeValue.substring(a,b)}});x.pa=function(a){a=a||d.document;
this.$=a.$.createDocumentFragment()};m.extend(x.pa.prototype,A.prototype,{type:d.om,kA:function(a){a=a.$;a.parentNode.insertBefore(this.$,a.nextSibling)}},!0,{append:1,pd:1,getFirst:1,dB:1,appendTo:1,jg:1,insertBefore:1,kA:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,iu:1,getChild:1,getChildren:1});(function(){function a(a,b){if(this._.end)return null;var c,f=this.mk,l,q=this.vR,n=this.type,r=a?"getPreviousSourceNode":"getNextSourceNode";if(!this._.start&&(this._.start=1,f.trim(),f.collapsed))return this.end(),
null;if(!a&&!this._.kp){var v=f.endContainer,w=v.getChild(f.endOffset);this._.kp=function(a,b){return(!b||!v.equals(a))&&(!w||!a.equals(w))&&(a.type!=d.cv||"body"!=a.getName())}}if(a&&!this._.ka){var D=f.startContainer,t=0<f.startOffset&&D.getChild(f.startOffset-1);this._.ka=function(a,b){return(!b||!D.equals(a))&&(!t||!a.equals(t))&&(a.type!=d.cv||"body"!=a.getName())}}var F=a?this._.ka:this._.kp;l=q?function(a,b){return!1===F(a,b)?!1:q(a)}:F;this.current?c=this.current[r](!1,n,l):a?(c=f.endContainer,
0<f.endOffset?(c=c.getChild(f.endOffset-1),!1===l(c)&&(c=null)):c=!1===l(c)?null:c.hZ(!0,n,l)):(c=f.startContainer,(c=c.getChild(f.startOffset))?!1===l(c)&&(c=null):c=!1===l(f.startContainer)?null:f.startContainer.hL(!0,n,l));for(;c&&!this._.end;){this.current=c;if(!this.lf||!1!==this.lf(c)){if(!b)return c}else if(b&&this.lf)return!1;c=c[r](!1,n,l)}this.end();return this.current=null}function b(b){for(var c,d=null;c=a.call(this,b);)d=c;return d}x.gm=m.createClass({$:function(a){this.mk=a;this._={}},
ej:{end:function(){this._.end=1},next:function(){return a.call(this)},previous:function(){return a.call(this,!0)},sC:function(){return!1!==a.call(this,!1,!0)},sD:function(){return!1!==a.call(this,!0,!0)},uF:function(){return b.call(this)},uB:function(){return b.call(this,!0)},reset:function(){delete this.current;this._={}}}});var c={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},
f={hr:1};A.prototype.qy=function(a){a=m.extend({},f,a||{});return c[this.getComputedStyle("display")]||a[this.getName()]};x.gm.pQ=function(a){return function(b,c){return!(b.type==d.cv&&b.qy(a))}};x.gm.us=function(){return this.pQ({br:1})};x.gm.tU=function(a){};x.gm.tW=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.hasAttribute("_fck_bookmark")}return function(d){var f,q;f=d&&!d.getName&&(q=d.getParent())&&c(q);f=a?f:f||c(d);return b^f}};x.gm.sf=function(a){return function(b){b=
b&&b.type==d.fl&&!m.trim(b.getText());return a^b}}})();(function(){if(p.webkit)p.hc=!1;else{var a=A.kE('<div style="width:0px;height:0px;position:absolute;left:-10000px;border:1px solid;border-color:red blue;"></div>',d.document);a.appendTo(d.document.getHead());try{p.hc=a.getComputedStyle("border-top-color")==a.getComputedStyle("border-right-color")}catch(b){p.hc=!1}p.hc&&(p.cssClass+=" cke_hc");a.remove()}})();z.load(J.pO.split(","),function(){d.status="loaded";d.oW("loaded");var a=d._.io;if(a){delete d._.io;
for(var b=0;b<a.length;b++)d.add(a[b])}});if(y)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(a){}CKFinder.lang.en={appTitle:"CKFinder",common:{unavailable:'%1<span class="cke_accessibility">, unavailable</span>',confirmCancel:"Some of the options were changed. Are you sure you want to close the dialog window?",ok:"OK",cancel:"Cancel",confirmationTitle:"Confirmation",messageTitle:"Information",inputTitle:"Question",undo:"Undo",redo:"Redo",skip:"Skip",skipAll:"Skip all",makeDecision:"What action should be taken?",
rememberDecision:"Remember my decision"},dir:"ltr",HelpLang:"en",LangCode:"en",DateTime:"m/d/yyyy h:MM aa",DateAmPm:["AM","PM"],FoldersTitle:"Folders",FolderLoading:"Loading...",FolderNew:"Please type the new folder name: ",FolderRename:"Please type the new folder name: ",FolderDelete:'Are you sure you want to delete the "%1" folder?',FolderRenaming:" (Renaming...)",FolderDeleting:" (Deleting...)",DestinationFolder:"Destination Folder",FileRename:"Please type the new file name: ",FileRenameExt:"Are you sure you want to change the file extension? The file may become unusable.",
FileRenaming:"Renaming...",FileDelete:'Are you sure you want to delete the file "%1"?',FilesDelete:"Are you sure you want to delete %1 files?",FilesLoading:"Loading...",FilesEmpty:"The folder is empty.",DestinationFile:"Destination File",SkippedFiles:"List of skipped files:",BasketFolder:"Basket",BasketClear:"Clear Basket",BasketRemove:"Remove from Basket",BasketOpenFolder:"Open Parent Folder",BasketTruncateConfirm:"Do you really want to remove all files from the basket?",BasketRemoveConfirm:'Do you really want to remove the file "%1" from the basket?',
BasketRemoveConfirmMultiple:"Do you really want to remove %1 files from the basket?",BasketEmpty:"No files in the basket, drag and drop some.",BasketCopyFilesHere:"Copy Files from Basket",BasketMoveFilesHere:"Move Files from Basket",OperationCompletedSuccess:"Operation completed successfully.",OperationCompletedErrors:"Operation completed with errors.",FileError:"%s: %e",MovedFilesNumber:"Number of files moved: %s.",CopiedFilesNumber:"Number of files copied: %s.",MoveFailedList:"The following files could not be moved:<br />%s",
CopyFailedList:"The following files could not be copied:<br />%s",Upload:"Upload",UploadTip:"Upload New File",Refresh:"Refresh",Settings:"Settings",Help:"Help",HelpTip:"Help",Select:"Select",SelectThumbnail:"Select Thumbnail",View:"View",Download:"Download",NewSubFolder:"New Subfolder",Rename:"Rename",Delete:"Delete",DeleteFiles:"Delete Files",CopyDragDrop:"Copy Here",MoveDragDrop:"Move Here",RenameDlgTitle:"Rename",NewNameDlgTitle:"New Name",FileExistsDlgTitle:"File Already Exists",SysErrorDlgTitle:"System Error",
FileOverwrite:"Overwrite",FileAutorename:"Auto-rename",ManuallyRename:"Manually rename",OkBtn:"OK",CancelBtn:"Cancel",CloseBtn:"ns",UploadTitle:"Upload New File",UploadSelectLbl:"Select a file to upload",UploadProgressLbl:"(Upload in progress, please wait...)",UploadBtn:"Upload Selected File",UploadBtnCancel:"Cancel",UploadNoFileMsg:"Please select a file from your computer.",UploadNoFolder:"Please select a folder before uploading.",UploadNoPerms:"File upload not allowed.",UploadUnknError:"Error sending the file.",
UploadExtIncorrect:"File extension not allowed in this folder.",UploadLabel:"Files to Upload",UploadTotalFiles:"Total Files:",UploadTotalSize:"Total Size:",UploadSend:"Upload",UploadAddFiles:"Add Files",UploadClearFiles:"Clear Files",UploadCancel:"Cancel Upload",UploadRemove:"Remove",UploadRemoveTip:"Remove !f",UploadUploaded:"Uploaded !n%",UploadProcessing:"Processing...",SetTitle:"Settings",SetView:"View:",SetViewThumb:"Thumbnails",SetViewList:"List",SetDisplay:"Display:",SetDisplayName:"File Name",
SetDisplayDate:"Date",SetDisplaySize:"File Size",SetDisplayResize:"File Resize",SetSort:"Sorting:",SetSortName:"by File Name",SetSortDate:"by Date",SetSortSize:"by Size",SetSortExtension:"by Extension",FilesCountEmpty:"<Empty Folder>",FilesCountOne:"1 file",FilesCountMany:"%1 files",Kb:"%1 KB",Mb:"%1 MB",Gb:"%1 GB",SizePerSecond:"%1/s",ErrorUnknown:"It was not possible to complete the request. (Error %1)",Errors:{10:"Invalid command.",11:"The resource type was not specified in the request.",12:"The requested resource type is not valid.",
102:"Invalid file or folder name.",103:"It was not possible to complete the request due to authorization restrictions.",104:"It was not possible to complete the request due to file system permission restrictions.",105:"Invalid file extension.",109:"Invalid request.",110:"Unknown error.",111:"It was not possible to complete the request due to resulting file size.",115:"A file or folder with the same name already exists.",116:"Folder not found. Please refresh and try again.",117:"File not found. Please refresh the files list and try again.",
118:"Source and target paths are equal.",201:'A file with the same name is already available. The uploaded file was renamed to "%1".',202:"Invalid file.",203:"Invalid file. The file size is too big.",204:"The uploaded file is corrupt.",205:"No temporary folder is available for upload in the server.",206:"Upload cancelled due to security reasons. The file contains HTML-like data.",207:'The uploaded file was renamed to "%1".',300:"Moving file(s) failed.",301:"Copying file(s) failed.",500:"The file browser is disabled for security reasons. Please contact your system administrator and check the CKFinder configuration file.",
501:"The thumbnails support is disabled."},ErrorMsg:{pg:"The file name cannot be empty.",FileExists:"File %s already exists.",FolderEmpty:"The folder name cannot be empty.",FolderExists:"Folder %s already exists.",FolderNameExists:"Folder already exists.",oP:'The file name cannot contain any of the following characters: \n\\ / : * ? " < > |',FolderInvChar:'The folder name cannot contain any of the following characters: \n\\ / : * ? " < > |',oo:"It was not possible to open the file in a new window. Please configure your browser and disable all popup blockers for this site.",
XmlError:"It was not possible to properly load the XML response from the web server.",XmlEmpty:"It was not possible to load the XML response from the web server. The server returned an empty response.",XmlRawResponse:"Raw response from the server: %s"},Imageresize:{dialogTitle:"Resize %s",sizeTooBig:"Cannot set image height or width to a value bigger than the original size (%size).",resizeSuccess:"Image resized successfully.",thumbnailNew:"Create a new thumbnail",thumbnailSmall:"Small (%s)",thumbnailMedium:"Medium (%s)",
thumbnailLarge:"Large (%s)",newSize:"Set a new size",width:"Width",height:"Height",invalidHeight:"Invalid height.",invalidWidth:"Invalid width.",invalidName:"Invalid file name.",newImage:"Create a new image",noExtensionChange:"File extension cannot be changed.",imageSmall:"Source image is too small.",contextMenuName:"Resize",lockRatio:"Lock ratio",resetSize:"Reset size"},Fileeditor:{save:"Save",fileOpenError:"Unable to open file.",fileSaveSuccess:"File saved successfully.",contextMenuName:"Edit",
loadingFile:"Loading file, please wait..."},Maximize:{maximize:"Maximize",minimize:"Minimize"},Gallery:{current:"Image {current} of {total}"},Zip:{extractHereLabel:"Extract here",extractToLabel:"Extract to...",downloadZipLabel:"Download as zip",compressZipLabel:"Compress to zip",removeAndExtract:"Remove existing and extract",extractAndOverwrite:"Extract overwriting existing files",extractSuccess:"File extracted successfully."}};(function(){d.aL.Acl=function(a){a||(a=0);this.folderView=1==(a&1);this.folderCreate=
2==(a&2);this.folderRename=4==(a&4);this.folderDelete=8==(a&8);this.fileView=16==(a&16);this.fileUpload=32==(a&32);this.fileRename=64==(a&64);this.fileDelete=128==(a&128)};z.add("acl")})();(function(){z.add("connector",{bM:[],bz:function(a){a.on("appReady",function(){a.connector=new d.aL.Connector(a);var c=a.config.resourceType;a.connector.sendCommand("Init",c?{type:c}:null,function(c){var e;if(!c.checkError()){d.ed=c.selectSingleNode("Connector/ConnectorInfo/@s").value;d.bF=c.selectSingleNode("Connector/ConnectorInfo/@c").value+
"----";a.config.thumbsEnabled="true"==c.selectSingleNode("Connector/ConnectorInfo/@thumbsEnabled").value;a.config.thumbsDirectAccess=!1;if(a.config.thumbsEnabled){if(e=c.selectSingleNode("Connector/ConnectorInfo/@thumbsUrl"))a.config.thumbsUrl=e.value;if(e=c.selectSingleNode("Connector/ConnectorInfo/@thumbsDirectAccess"))a.config.thumbsDirectAccess="true"==e.value;e=c.selectSingleNode("Connector/ConnectorInfo/@thumbsWidth");a.config.thumbsWidth=(e?parseInt(e.value,10):100)||100;e=c.selectSingleNode("Connector/ConnectorInfo/@thumbsHeight");
a.config.thumbsHeight=(e?parseInt(e.value,10):100)||100}a.config.imagesMaxWidth=parseInt(c.selectSingleNode("Connector/ConnectorInfo/@imgWidth").value,10);a.config.imagesMaxHeight=parseInt(c.selectSingleNode("Connector/ConnectorInfo/@imgHeight").value,10);e=c.selectSingleNode("Connector/ConnectorInfo/@uploadMaxSize");a.config.uploadMaxSize=e?parseInt(e.value,10):0;e=c.selectSingleNode("Connector/ConnectorInfo/@uploadCheckImages");a.config.uploadCheckImages=e?"true"==e.value:!1;(e=(e=c.selectSingleNode("Connector/ConnectorInfo/@plugins"))&&
e.value)&&e.length?z.load(e.split(","),function(e){var g=[],h=[],l=[],q;for(q in e){var n=e[q],r=n.lang,v=z.getPath(q),w=null;a.plugins[q]||(a.plugins[q]=e[q],e[q].name=q,n.pathName=v,r&&(w=0<=m.indexOf(r,a.langCode)?a.langCode:r[0],n.lang[w]?(m.extend(a.lang,n.lang[w]),w=null):l.push(d.getUrl(v+"lang/"+w+".js"))),h.push(w),g.push(n))}d.scriptLoader.load(l,function(){for(var e=["eK","bz","gr"],l=0;l<e.length;l++)for(var k=0;k<g.length;k++){var r=g[k];0===l&&h[k]&&r.lang&&m.extend(a.lang,r.lang[h[k]]);
r[e[l]]&&(d.log("[PLUGIN] "+r.name+"."+e[l]),r[e[l]](a))}a.cr("uiReady");a.cr("appReady");a.oW("pluginsLoaded",{step:2,jN:a.connector});a.cr("connectorInitialized",{xml:c})})}):(a.oW("pluginsLoaded",{step:2,jN:a.connector}),a.cr("connectorInitialized",{xml:c}))}})})}});d.aL.Connector=function(a){this.app=a;var c=a.config.connectorLanguage||"java";this.oN=a.config.connectorPath?a.config.connectorPath:d.basePath+"core/connector/"+c+"/connector."+c};d.aL.Connector.prototype={ERROR_NONE:0,ERROR_CUSTOMERROR:1,
ERROR_INVALIDCOMMAND:10,ERROR_TYPENOTSPECIFIED:11,ERROR_INVALIDTYPE:12,ERROR_INVALIDNAME:102,ERROR_UNAUTHORIZED:103,ERROR_ACCESSDENIED:104,ERROR_INVALIDEXTENSION:105,ERROR_INVALIDREQUEST:109,ERROR_UNKNOWN:110,ERROR_ALREADYEXIST:115,ERROR_FOLDERNOTFOUND:116,ERROR_FILENOTFOUND:117,ERROR_SOURCE_AND_TARGET_PATH_EQUAL:118,ERROR_UPLOADEDFILERENAMED:201,ERROR_UPLOADEDINVALID:202,ERROR_UPLOADEDTOOBIG:203,ERROR_UPLOADEDCORRUPT:204,ERROR_UPLOADEDNOTMPDIR:205,ERROR_UPLOADEDWRONGHTMLFILE:206,ERROR_UPLOADEDINVALIDNAMERENAMED:207,
ERROR_MOVE_FAILED:300,ERROR_COPY_FAILED:301,ERROR_CONNECTORDISABLED:500,ERROR_THUMBNAILSDISABLED:501,currentFolderUrl:function(){if(this.app.aV)return this.app.aV.getUrl()},currentType:function(){if(this.app.aV)return this.app.aV.type},currentTypeHash:function(){if(this.app.aV)return d.getResourceType(this.app.aV.type).hash},currentResourceType:function(){return d.getResourceType(this.currentType())},sendCommand:function(b,c,f,e,k){b=this.composeUrl(b,c,e,k);var g=this;return f?d.ajax.loadXml(b,function(b){b.hy=
g.app;g.app.oW("connectorResponse",{xml:b});f(m.extend(b,a))}):d.ajax.loadXml(b,function(a){g.app.oW("connectorResponse",{xml:a})})},sendCommandPost:function(b,c,f,e,k,g){b=this.composeUrl(b,c,k,g);var h=this;f||(f={});f.CKFinderCommand=!0;return e?d.ajax.loadXml(b,function(b){b.hy=h.app;h.app.oW("connectorResponse",{xml:b});e(m.extend(b,a))},this.composeUrlParams(f)):d.ajax.loadXml(b,function(a){h.app.oW("connectorResponse",{xml:a})},this.composeUrlParams(f))},composeUrl:function(a,c,d,e){var k=
this.app.config.startupPath,g=this.oN+"?command="+encodeURIComponent(a);if("Init"!=a){var h="";e||(e=this.app.aV);h=d?this.app.getResourceType(d).hash:this.app.getResourceType(e.type).hash;g+="&type="+encodeURIComponent(d||this.app.aV.type)+"&currentFolder="+encodeURIComponent("FileUpload"==a&&""!=k?k.split(":")[1]:e.getPath()||"")+"&langCode="+this.app.langCode+"&hash="+h}g+="&startupPath="+encodeURIComponent(k||"");c&&(a=this.composeUrlParams(c))&&(g+="&"+a);this.app.id&&(g+="&id="+encodeURIComponent(this.app.id));
this.app.config.connectorInfo&&(g+=("&"!=this.app.config.connectorInfo.charAt(0)?"&":"")+this.app.config.connectorInfo);return g},composeUrlParams:function(a){if(!a)return"";var c="",d;for(d in a)c.length&&(c+="&"),c+=encodeURIComponent(d)+"="+encodeURIComponent(a[d]);return c}};var a={checkError:function(){var a=this.getErrorNumber(),c=this.hy.connector;if(a==c.ERROR_NONE)return!1;if(-1===a)return!0;var f=this.getErrorMessage();d.log("[ERROR] "+a);var e;if(a==c.ERROR_CUSTOMERROR)e=f;else if(e=this.hy.lang.Errors[a])for(var k=
0;k<=arguments.length;k++)e=e.replace(/%(\d+)/,0===k?f:arguments[k-1]);else e=this.hy.lang.ErrorUnknown.replace(/%1/,a);this.hy.msgDialog("",e);return a!=c.ERROR_UPLOADEDFILERENAMED},getErrorNumber:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@number");return a?parseInt(a.value,10):-1},getErrorMessage:function(){var a=this.selectSingleNode&&this.selectSingleNode("Connector/Error/@text");return a?a.value:""}}})();z.add("resource",{bM:["connector"],bz:function(a){a.resourceTypes=
[];a.on("connectorInitialized",function(b){b=b.data.xml.selectNodes("Connector/ResourceTypes/ResourceType");for(var c=0;c<b.length;c++){var f=b[c].attributes;a.resourceTypes.push(new d.aL.ResourceType(a,{name:f.getNamedItem("name").value,url:f.getNamedItem("url").value,hasChildren:f.getNamedItem("hasChildren").value,allowedExtensions:f.getNamedItem("allowedExtensions").value,deniedExtensions:f.getNamedItem("deniedExtensions").value,acl:f.getNamedItem("acl").value,hash:f.getNamedItem("hash").value,
maxSize:f.getNamedItem("maxSize").value}))}a.cr("resourcesReceived",{hK:a.resourceTypes})});a.getResourceType=function(a){for(var c=0;c<this.resourceTypes.length;c++){var d=this.resourceTypes[c];if(d.name==a)return d}return null}}});(function(){function a(a){var c={};if(0<a.length){a=a.toLowerCase().split(",");for(var d=0;d<a.length;d++)c[a[d]]=!0}return c}d.aL.ResourceType=function(b,c){this.app=b;this.name=c.name;this.url=c.url;this.hasChildren="true"===c.hasChildren;this.defaultView="Thumbnails";
this.allowedExtensions=c.allowedExtensions;this.deniedExtensions=c.deniedExtensions;this.oT=a(c.allowedExtensions);this.ms=a(c.deniedExtensions);this.nS=c.acl;this.hash=c.hash;this.maxSize=c.maxSize};d.aL.ResourceType.prototype={isExtensionAllowed:function(a){a=a.toLowerCase();return(0===this.deniedExtensions.length||!this.ms[a])&&(0===this.allowedExtensions.length||!!this.oT[a])},allowedExtensions:function(){return this.allowedExtensions},getRootFolder:function(){for(var a=0;a<this.app.folders.length;a++){var c=
this.app.folders[a];if(c.isRoot&&c.type==this.name)return c}}}})();(function(){function a(a,b,c,g,h){null===a.childFolders&&(a.childFolders=[]);b=new d.aL.Folder(a.app,b,c,g,h);b.parent=a;b.nh=a.isRoot?0:a.nh+1;a.childFolders.push(b);return b}function b(a,b){if(!a||0===a.length)throw new d.dU("name_empty",b.lang.ErrorMsg.FolderEmpty);if(c.iz.test(a))throw new d.dU("name_invalid_chars",b.lang.ErrorMsg.FolderInvChar);return!0}var c={iz:/[\\\/:\*\?"<>\|]/};z.add("folder",{bM:["resource","connector",
"acl"],bz:function(a){a.folders=[];a.aV=null;a.on("resourcesReceived",function(b){var c=[];b=b.data.hK;for(var g=0;g<b.length;g++){var h=b[g];c.push(new d.aL.Folder(a,h.name,h.name,h.hasChildren,h.nS));c[c.length-1].isRoot=!0}a.oW("requestAddFolder",{folders:c},function(){var b=a.config.startupPath||"",c=0,e="",h="";a.config.rememberLastFolder&&(e=decodeURIComponent(m.getCookie(a.id?"CKFinder_Path_"+a.id:"CKFinder_Path"))||"");b&&!a.qn?(h=b,c=1):e?h=e:b?h=b:a.resourceTypes.length&&(h=a.resourceTypes[0].name+
"/");if(h){d.log("[FOLDER] Opening startup path: "+h);var g=h.split(":");if(!a.getResourceType(g[0])||2>g.length)g=[a.resourceTypes[0].name,"/"];var k=a.aG["foldertree.foldertree"],D=/(.*\/)(.*)$/.exec(g[1]);k.tools.jL(g[0],D[1],function(b){if(b){d.log("[FOLDER] Opening startup folder: ",b);var e=!c&&("1"==g[2]||void 0===g[2]);e&&!1===a.config.startupFolderExpanded&&(e=0);k.oW("requestSelectFolder",{folder:b,expand:e,file:D[2]&&b.type==g[0]&&b.getPath()==D[1]?D[2]:""})}})}})});a.bD("RemoveFolder",
{readOnly:!1,exec:function(a){var b=a.aV;b&&!b.isRoot&&b.acl.folderDelete&&a.fe("",a.lang.FolderDelete.replace("%1",b.name),function(){a.oW("requestProcessingFolder",{folder:b});b.remove()})}});a.bD("CreateSubFolder",{readOnly:!1,exec:function(a){var b=a.aV;b&&a.hs(a.lang.NewNameDlgTitle,a.lang.FolderRename,"",function(c){if(c=m.trim(c))try{a.oW("requestProcessingFolder",{folder:b}),b.createNewFolder(c)}catch(f){if(f instanceof d.dU)a.oW("requestRepaintFolder",{folder:b}),a.msgDialog("",f.message);
else throw f;}})}});a.bD("RenameFolder",{readOnly:!1,exec:function(a){var b=a.aV;b&&!b.isRoot&&b.acl.folderRename&&a.hs(a.lang.RenameDlgTitle,a.lang.FolderRename,a.aV.name,function(c){if(c=m.trim(c))try{b.rename(c)}catch(f){if(f instanceof d.dU)a.oW("requestRepaintFolder",{folder:b}),a.msgDialog("",f.message);else throw f;}})}});a.eU&&(a.dZ("folder0",99),a.dZ("folder1",100),a.dZ("folder2",101),a.dZ("folder3",102),a.eU({kl:{label:a.lang.NewSubFolder,command:"CreateSubFolder",group:"folder1"},lI:{label:a.lang.Rename,
command:"RenameFolder",group:"folder1"},removeFolder:{label:a.lang.Delete,command:"RemoveFolder",group:"folder2"}}))}});d.aL.Folder=function(a,b,c,g,h){this.app=a;this.type=b||"";this.name=c||"";this.hasChildren=void 0==g||null===g?!0:!!g;this.isOpened=this.isRoot=!1;this.parent=null;this.isDirty=!1;this.acl=new d.aL.Acl(h);this.index=a.folders.push(this)-1;this.childFolders=null};d.aL.Folder.prototype={getPath:function(){for(var a=this,b=a.isRoot?"/":a.name;a.parent;)a=a.parent,b=a.isRoot?"/"+b:
a.name+"/"+b;return a!=this?b+"/":b},getUrl:function(){for(var a=this,b="";a;)b=a.isRoot?this.app.getResourceType(a.type).url+b:encodeURIComponent(a.name)+"/"+b,a=a.parent;return b},getUploadUrl:function(){return this.app.connector.composeUrl("FileUpload",{},this.type,this)},getResourceType:function(){return this.app.getResourceType(this.type)},updateReference:function(){if(this.app.folders[this.index]==this)return this;for(var a=0;a<this.parent.childFolders.length;a++)if(this.parent.childFolders[a].name==
this.name)return this.parent.childFolders[a]},getChildren:function(b,c){var k=this,g=k.childFolders;if(k.hl&&!c){d.log("[FOLDER] getChildrenLock active, defering callback...");k.app.oW("requestLoadingFolder",{folder:k});var h=100;setTimeout(function(){k.hl?3E3>=h?setTimeout(arguments.callee,h*=2):(d.log("[FOLDER] TIMEOUT for getChildrenLock defered callback!"),k.hl=!1,k.getChildren(b)):b(g)})}else{if(g&&!k.isDirty&&!c)return b(g),g;k.hl=!0;if(k.isDirty&&g){d.log("[FOLDER] Clearing folder children cache.");
for(var l=0;l<g.length;l++)delete k.app.folders[g[l].index]}k.app.oW("requestLoadingFolder",{folder:k});this.app.connector.sendCommand("GetFolders",null,function(c){if(c.checkError())k.app.oW("requestRepaintFolder",{folder:k});else{var d=c.selectSingleNode("Connector/@resourceType").value;k.hm=!0;c=c.selectNodes("Connector/Folders/Folder");var e=[];k.childFolders=null;for(var h=0;h<c.length;h++){var g=c[h].attributes.getNamedItem("name").value,l="true"==c[h].attributes.getNamedItem("hasChildren").value,
t=parseInt(c[h].attributes.getNamedItem("acl").value,10);e.push(a(k,d,g,l,t))}k.hasChildren=!!c.length;k.isDirty=!1;k.hl=null;k.app.oW("requestRepaintFolder",{folder:k});b(e)}},k.type,k);return null}},mapLoadedDescendants:function(a){if(this.childFolders)for(var b=0;b<this.childFolders.length;b++){var c=this.childFolders[b];c.mapLoadedDescendants(a);a(c)}},select:function(){this.app.oW("requestSelectFolder",{folder:this})},isSelected:function(){return this.app.aV&&this==this.app.aV},deselect:function(){this.app.oW("requestSelectFolder")},
open:function(a){a&&!this.hm||this.app.oW("requestExpandFolder",{folder:this})},close:function(){this.app.oW("requestExpandFolder",{folder:this,collapse:1})},hU:function(){for(var a=1,b=this;b;)a++,b=b.parent;return a},toggle:function(){this.hasChildren&&(this.isOpened?this.close():this.open())},createNewFolder:function(a){b(a,this.app);var c=this;c.isDirty=!0;c.app.connector.sendCommandPost("CreateFolder",{NewFolderName:a},null,function(b){b.checkError()?c.app.oW("requestRepaintFolder",{folder:c}):
(c.hasChildren=!0,c.app.oW("afterCommandExecDefered",{name:"CreateFolder",ip:c,uv:a}))},this.type,this)},rename:function(a){b(a,this.app);var c=this;this.app.oW("requestProcessingFolder",{folder:c});c.parent.isDirty=!0;c.name==a?c.app.oW("requestRepaintFolder",{folder:c}):c.app.connector.sendCommandPost("RenameFolder",{NewFolderName:a},null,function(a){a.checkError()||(c.parent.isDirty=!1,c.name=a.selectSingleNode("Connector/RenamedFolder/@newName").value);c.app.oW("requestRepaintFolder",{folder:c})},
this.type,this)},remove:function(){var a=this;a.deselect();a.parent.isDirty=!0;this.app.oW("requestProcessingFolder",{folder:a});a.app.connector.sendCommandPost("DeleteFolder",null,null,function(b){b.checkError()?a.app.oW("requestRepaintFolder",{folder:a}):a.app.oW("requestRemoveFolder",{folder:a},function(){var b=m.indexOf(a.parent.childFolders,a),c=a.index,d=a.parent,e=a.app;d.childFolders[b].mapLoadedDescendants(function(a){e.folders[a.index].isDeleted=!0;delete e.folders[a.index]});d.childFolders.splice(b,
1);e.folders[c].isDeleted=!0;delete e.folders[c];0===d.childFolders.length&&(d.childFolders=null,d.hasChildren=!1);a.releaseDomNodes&&a.releaseDomNodes();e.oW("afterCommandExecDefered",{name:"RemoveFolder",ip:d,uN:c,folder:a})})},this.type,this)},toString:function(){return this.getPath()}}})();(function(){function a(){function a(b){this.ib=b;this.bi=b.tools.kI().cf()}var b=d.aG.hS("foldertree","foldertree");b.dT.push(function(){var a=this.bn();a.hasClass("view")||(a=a.getParent());m.mH(a)});b.bh("KeyboardNavigation",
["keydown","requestKeyboardNavigation"],function(a){var b=this,c=this.tools.cq(a),e=0;a.data&&a.data.bK&&(e=a.data.bK().$==b.bn().$);if(c||e){var f=m.extend({},a.data,{folder:c},!0);this.oW("beforeKeyboardNavigation",f,function(f,h){if(!f)try{var g=a.data.db();if(e&&37<=g&&40>=g){var l=b.app.folders[0];l&&this.tools.cT(l)}else{var k;if(38==g)if(a.data.preventDefault(),k=c.liNode(),k.gE()){for(var q=this.tools.cq(k.cf());q.isOpened&&q.hasChildren;)if(q.childFolders.length)q=q.childFolders[q.childFolders.length-
1];else break;this.tools.cT(q)}else c.isRoot||this.tools.cT(c.parent);else 39==g&&c.hasChildren?c.isOpened?c.getChildren(function(a){b.tools.cT(a[0])}):this.oW("requestExpandFolder",{folder:c}):40==g?(a.data.preventDefault(),k=c.liNode(),c.isOpened&&c.hasChildren?c.getChildren(function(a){b.tools.cT(a[0])}):k.ge()?this.tools.cT(this.tools.cq(k.dG())):!c.isRoot&&c.parent&&function(a){var c=a.liNode();c.ge()?b.tools.cT(b.tools.cq(c.dG())):a.parent&&arguments.callee(a.parent)}(c.parent)):37==g?c.isOpened?
this.oW("requestExpandFolder",{folder:c,collapse:1}):!c.isRoot&&c.parent&&this.tools.cT(c.parent):46==g?(b.app.oW("requestSelectFolder",{folder:c}),b.app.execCommand("RemoveFolder")):113==g&&(b.app.oW("requestSelectFolder",{folder:c}),b.app.execCommand("RenameFolder"))}this.oW("successKeyboardNavigation",h);this.oW("afterKeyboardNavigation",h)}catch(O){throw O=d.ba(O),this.oW("failedKeyboardNavigation",h),this.oW("afterKeyboardNavigation",h),O;}})}});b.dT.push(function(a,b){a.on("afterCommandExecDefered",
function(c){if(c.data){var d=c.data.folder;if("RemoveFolder"==c.data.name){d==b.tools.ew&&(b.tools.cT(),b.bn().focus());var e=a.aG["filesview.filesview"].tools.folder,f=d==e;d.mapLoadedDescendants(function(a){e==d&&(f=!0)});b.oW("requestSelectFolder",{folder:d.parent,expand:f})}else"RenameFolder"==c.data.name&&d==b.tools.ew&&d.focus()}})});b.bh("RemoveFolder","requestRemoveFolder",function(a){var b=this.tools.cq(a);a=m.extend({},a.data,{folder:b},!0);this.oW("beforeRemoveFolder",a,function(a,c){if(!a)try{b.liNode().remove(),
this.oW("successRemoveFolder",c),this.oW("afterRemoveFolder",c)}catch(e){throw this.oW("failedRemoveFolder",c),this.oW("afterRemoveFolder",c),d.ba(e);}})},!1);b.bh("LoadingFolder","requestLoadingFolder",function(a){var b=this,c=this.tools.cq(a);c&&(a=m.extend({},a.data,{folder:c},!0),this.oW("beforeLoadingFolder",a,function(a,c){if(!a){var e=c.folder;try{this.on("afterExpandFolder",function(a){a.data&&a.data.folder==e&&(a.removeListener(),(a=e.childrenRootNode().getChild(0))&&a.hasClass("loading")&&
(a.remove(),this.oW("requestRepaintFolder",{folder:e}),c.step=2,b.oW("successLoadingFolder",c),b.oW("afterLoadingFolder",c)))},null,null,1),e.childrenRootNode()&&e.childrenRootNode().setHtml('<li class="loading">'+b.app.lang.FolderLoading+"</li>"),this.oW("requestProcessingFolder",{folder:e}),c.step=1,this.oW("successLoadingFolder",c)}catch(f){throw this.oW("failedLoadingFolder",c),this.oW("afterLoadingFolder",c),d.ba(f);}}}))});b.bh("ProcessingFolder",["requestProcessingFolder"],function(a){a.result=
this.oW("beforeProcessingFolder",a.data,function(a,b){if(!a)try{this.tools.cq(b.folder).aNode().addClass("processing"),this.oW("successProcessingFolder",b),this.oW("afterProcessingFolder",b)}catch(c){throw c=d.ba(c),this.oW("failedProcessingFolder",b),this.oW("afterProcessingFolder",b),c;}})});b.bh("RepaintFolder",["requestRepaintFolder"],function(a){this.oW("beforeRepaintFolder",a.data,function(a,b){if(!a)try{var c=this.tools.cq(b.folder),e=c.liNode(),f=c.expanderNode(),h=c.aNode(),g=c.childrenRootNode(),
l=c.name;h.getHtml()!=l&&h.setHtml(m.htmlEncode(c.name));h.removeClass("processing");c.hasChildren?c.hasChildren&&(g.$.hasChildNodes()?(e.addClass("closable"),e.removeClass("openable"),f.setAttribute("aria-expanded","true")):(e.addClass("openable"),e.removeClass("closable"),f.removeAttribute("aria-expanded"))):(e.removeClass("openable"),e.removeClass("closable"),e.addClass("nochildren"),f.removeAttribute("aria-expanded"),g.$.hasChildNodes()&&g.setHtml(""));this.oW("successRepaintFolder");this.oW("afterRepaintFolder")}catch(k){throw this.oW("failedRepaintFolder"),
this.oW("afterRepaintFolder"),d.ba(k);}})});b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){a.data&&"RemoveFolder"==a.data.name&&b.oW("requestRepaintFolder",{folder:a.data.ip})})});b.bh("AddFolder","requestAddFolder",function(a){var b=this;this.oW("beforeAddFolder",{folders:a.data.folder?[a.data.folder]:a.data.folders,root:a.data.root},function(a,e){if(!a){var h=e.folders,g=e.root?this.tools.cq(e.root):null,l,k;try{if(g)!1===g.hasChildren?g.liNode().addClass("nochildren"):(g.liNode().removeClass("nochildren"),
l=f(h,c),g.childrenRootNode().appendHtml(l));else{for(var g={},n=0;n<h.length;n++)k=h[n].parent?h[n].parent.index:-1,g[k]||(g[k]=[]),g[k].push(h[n]);for(var q in g)l=f(g[q],c),-1==q?this.tools.kI().appendHtml(l):(k=this.tools.cq(q),k.liNode().removeClass("nochildren"),k.childrenRootNode().appendHtml(l));(1==d.bs.indexOf(d.bF.substr(1,1))%5&&d.lS(window.top[d.nd+"cation"][d.jG+"st"])!=d.lS(d.ed)||d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-
1),1))&&setTimeout(function(){b.app.layout.ea()},100)}this.oW("successAddFolder");this.oW("afterAddFolder")}catch(m){throw this.oW("failedAddFolder"),this.oW("afterAddFolder"),d.ba(m);}}})});b.bh("SelectFolder",["click","requestSelectFolder","requestSelectFolderRefresh"],function(a){var b=this,c="click"==a.name,e=c&&a.data.bK();if(!this.tools.kg(a)){var f=this.tools.cq(a);if(c&&e.hasClass("dropdown"))a.jN.oW("contextmenu",a.data),a.cancel();else if(c||"requestSelectFolder"==a.name){if(!c||f)c&&f.aNode()&&
f.aNode().$!=e.$||(a=m.extend({jR:1,expand:0},a.data,{folder:f},!0),this.oW("beforeSelectFolder",a,function(a,e){if(!a){var f=e.folder;try{if(this.app.aV&&(!f||f!=this.app.aV)){var g=this.app.aV.liNode();g&&g.removeClass("selected");b.tools.hk().mc();this.app.aV=null}if(f)return c&&this.tools.cT(f),e.expand&&b.oW("requestExpandFolder",{folder:f}),f.liNode().addClass("selected"),this.app.aV=f,b.tools.hk().select(f.aNode()),e.jR&&(b.oW("requestProcessingFolder",{folder:f}),b.tools.mV(f,1),b.app.oW("requestShowFolderFiles",
{folder:f,mw:e.file},function(a,c){if(c.ib)c.ib.on("afterShowFolderFiles",function(a){a.data.folder==f&&(a.removeListener(),b.oW("requestRepaintFolder",{folder:f}))})})),this.oW("successSelectFolder"),this.oW("afterSelectFolder"),f;this.oW("successSelectFolder");this.oW("afterSelectFolder")}catch(h){throw this.oW("failedSelectFolder"),this.oW("afterSelectFolder"),d.ba(h);}}}))}else"requestSelectFolderRefresh"==a.name&&this.oW("beforeSelectFolderRefresh",function(a){if(!a)try{if(this.app.aV){var b=
this.app.aV.aNode();b?this.tools.hk().select(b):(this.tools.hk().mc(),this.oW("failedSelectFolderRefresh"))}else this.oW("successSelectFolderRefresh");this.oW("afterSelectFolderRefresh");return f}catch(c){throw this.oW("failedSelectFolderRefresh"),this.oW("afterSelectFolderRefresh"),d.ba(c);}})}});b.dT.push(function(a,b){b.on("afterExpandFolder",function(){b.oW("requestSelectFolderRefresh")},null,null,999);b.on("successRemoveFolder",function(){b.oW("requestSelectFolderRefresh")});b.on("successLoadingFolder",
function(a){1==a.data.step&&b.oW("requestSelectFolderRefresh")})});b.bh("ExpandFolder",["click","requestExpandFolder"],function(a){var b=this,c="click"==a.name,e=c&&a.data.bK();this.tools.kg(a)||c&&!e.hasClass("expander")||(e=this.tools.cq(a),a=m.extend({collapse:0},a.data,{folder:e,hE:c},!0),this.oW("beforeExpandFolder",a,function(a,c){if(!a)try{var e=c.folder,f=e.liNode(),g=e.expanderNode();if(!e.acl.folderView)throw b.app.msgDialog("",b.app.lang.Errors["104"]),"[CKFINDER] No permissions to view folder.";
if(e.hasChildren){var h=c.hE&&f.hasClass("openable"),l=!c.hE&&!c.collapse&&!f.hasClass("closable"),k=!c.hE&&!c.collapse&&f.hasClass("closable"),q=!c.collapse&&c.force;h||l||q?(f.removeClass("openable"),f.addClass("closable"),g.setAttribute("aria-expanded","true"),e.getChildren(function(a){a?(b.oW("requestAddFolder",{folders:a,root:e}),e.isOpened=!0):(b.oW("requestRepaintFolder",{folder:e}),e.isOpened=!1);c.step=2;b.oW("successExpandFolder",c);b.oW("afterExpandFolder",c)}),c.step=1,b.oW("successExpandFolder",
c)):c.hE||!c.hE&&c.collapse?(f.removeClass("closable"),f.addClass("openable"),g.setAttribute("aria-expanded","false"),e.childrenRootNode().setHtml(""),e.isOpened=!1,e.hm?e.getChildren(function(a){e.mapLoadedDescendants(function(a){a.releaseDomNodes()});b.oW("successExpandFolder",c);b.oW("afterExpandFolder",c)}):(this.oW("requestRepaintFolder",{folder:e}),this.oW("failedExpandFolder"),this.oW("afterExpandFolder"))):k&&(b.oW("successExpandFolder",c),b.oW("afterExpandFolder",c))}else this.oW("failedExpandFolder"),
this.oW("afterExpandFolder");return e}catch(n){throw this.oW("failedExpandFolder"),this.oW("afterExpandFolder"),d.ba(n);}}))});b.dT.push(function(a,b){a.on("afterCommandExecDefered",function(a){a.data&&"CreateFolder"==a.data.name&&b.oW("requestExpandFolder",{folder:a.data.ip,force:1})})});b.tools.jL=function(a,b,c){var d=this.ib,e=a=this.ib.app.getResourceType(a).getRootFolder(),f="/"==b?[]:b.split("/").slice(1);""===f[f.length-1]&&(f=f.slice(0,-1));0===f.length?c(a):(d.on("successExpandFolder",function(a){if(2==
a.data.step){var b=a.data.folder;if(b==e)for(var g=f.shift(),h=0;h<b.childFolders.length;h++){var l=b.childFolders[h];if(l.name==g)if(0===f.length){a.removeListener();c(l);break}else e=l,d.oW("requestExpandFolder",{folder:l})}}}),d.oW("requestExpandFolder",{folder:a}))};b.tools.cq=function(a){var b,c=0;a.data&&a.data.folder instanceof A?(a=a.data.folder,c=1):a.data&&a.data.bK?(a=a.data.bK(),c=1):a instanceof x.bi&&(c=1);if(c){for(var e=a;e&&!e.is("li")&&e!=this.ib.eh;)e=e.getParent();e&&e.is("li")&&
(a=e.dS())&&(b=this.ib.app.folders[a.slice(1)])}else"number"==typeof a?b=this.ib.app.folders[a]:"string"==typeof a?b=this.ib.app.folders[e.dS().slice(1)]:a.data&&a.data.folder instanceof d.aL.Folder?b=a.data.folder:a.data&&a.data.folders&&a.data.folders.length&&a.data.folders[0]instanceof d.aL.Folder?b=a.data.folders[0]:a instanceof d.aL.Folder&&(b=a);return b};b.tools.mV=function(a,b){var c=a.type,d=a.getPath(),e=this.ib.app.id;b=void 0===b?a.isOpened:!!b+1-1;m.setCookie(e?"CKFinder_Path_"+e:"CKFinder_Path",
encodeURIComponent(c+":"+d+":"+b))};a.prototype={select:function(a){this.bi.setStyles({height:a.$.offsetHeight+"px",top:a.$.offsetTop+"px",display:"block"})},mc:function(a){this.bi.setStyles({display:"none"})},ie6FixParentNode:function(){this.kv||(this.kv=this.ib.app.document.getById("folders_view").getChild(1));return this.kv}};b.tools.hk=function(){var b=this.ib.oE();b.la||(b.la=new a(this.ib));return b.la};b.tools.kI=function(){this.kW||(this.kW=g(k(this.ib.bn().getChild(1).$.childNodes,"ul")));
return this.kW};b.tools.cT=function(a){a?(this.ew?this.ew.blur():this.ib.bn().setAttribute("tabindex",-1),this.ew=a,a.focus()):(delete this.ew,this.ib.bn().setAttribute("tabindex",0))}}function b(){m.extend(d.aL.Folder.prototype,{liNode:function(){if(void 0===this.iC){var a=this.app.document.getById("f"+this.index);a&&(this.iC=a)}return this.iC},aNode:function(){if(void 0===this.dM){var a=this.liNode();a&&(this.dM=g(k(a.$.childNodes,"a")))}return this.dM},expanderNode:function(){if(void 0===this.iR){var a=
this.liNode();a&&(this.iR=g(k(a.$.childNodes,"span")))}return this.iR},childrenRootNode:function(){if(void 0===this.iM){var a=this.liNode();a&&(this.iM=g(k(a.$.childNodes,"ul")))}return this.iM},releaseDomNodes:function(){delete this.iC;delete this.dM;delete this.iR;delete this.iM},focus:function(){var a=this.aNode();a&&(a.setAttribute("tabindex",0),a.focus())},blur:function(){this.aNode()&&this.aNode().setAttribute("tabindex",-1)}})}function c(a){return'<li id="f'+a.index+'" role="presentation" class="openable'+
(a.hasChildren?"":" nochildren")+'"><span role="presentation" class="expander"'+(a.hasChildren?' onclick="void(0)"':"")+'></span><a tabindex="-1" role="treeitem" href="javascript:void(0)" aria-level="'+a.hU()+'">'+m.htmlEncode(a.name)+"</a>"+(a.isBasket?"":h)+"<ul></ul></li>"}function f(a,b){for(var c="",d=0;d<a.length;d++)c+=b(a[d]);return c}function e(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c]}function k(a,b,c){return e(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!c--)return a})}
function g(a){return new A(a)}var h='<a href="javascript:void(0)" class="dropdown">\u25bc</a>';z.add("foldertree",{bM:["folder"],onLoad:function(){a();b()},bz:function(a){var b=this;a.on("themeSpace",function(b){"sidebar"==b.data.space&&(b.data.html+="<div id='folders_view' class='view widget' tabindex='0'><h2 id='folders_view_label'>"+a.lang.FoldersTitle+"</h2><div class='folder_tree_wrapper wrapper'><div class='selection'></div><ul class='folder_tree no_list' role='tree navigation' aria-labelledby='folders_view_label'></ul></div></div>")});
a.on("uiReady",function(c){a.config.showContextMenuArrow||(h="");c=a.document.getById("folders_view");c.hX();p.opera&&c.on("dblclick",function(a){a.data.preventDefault()});var e=d.aG.bz(a,"foldertree",b,c);a.bj&&(a.bj.lX(c),a.bj.kh(function(b,c){if("folders_view"!=b.dS()){var f=!0;if(a.aV){var g=a.aV.liNode().dS();if(b.dS()===g||b.getParent().dS()===g)f=!1}f&&(a.oW("requestSelectFolder",{folder:null}),a.oW("requestSelectFolder",{folder:b}));if((f=a.aV)&&!a.config.readOnly){var g=f.acl,h=f.isRoot,
g={kl:g.folderCreate?d.aS:d.aY,lI:!h&&g.folderRename?d.aS:d.aY,removeFolder:!h&&g.folderDelete?d.aS:d.aY};e.oW("beforeContextMenu",{bj:g,folder:f});return g}}},c))});a.bD("foldertreeFocus",{exec:function(a){var b=a.layout.pS();a=a.aG["foldertree.foldertree"].tools.ew;b.focus();a&&a.focus()}})}})})();(function(){function a(a){var b=[d.bF.substr(6,1),d.bF.substr(8,1)],c;if(c=!!d.ed)c=b[0],b=d.ed.length+d.bs.indexOf(b[1]),b=d.bs.substr(9*b%32,1),c=c!=b;c&&(N.reverse().join(""),c=a.tools.of(),c.setHtml.call(c,
a.qX()),a.bn().addClass("files_"+N[0]))}function b(){return 1==d.bs.indexOf(d.bF.substr(1,1))%5&&window.top[d.nd+"cation"][d.jG+"st"].toLowerCase().replace(d.hf,"").replace(d.hg,"")!=d.lS(d.ed)||d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1)}function c(){function c(){var a=m.getCookie("CKFinder_Settings");if(a&&6==a.length){this.data().dA="L"==a.substr(0,1)?"list":"thumbnails";this._.nV=!0;switch(a.substr(1,1)){case "D":this.data().cN=
"date";break;case "S":this.data().cN="size";break;case "E":this.data().cN="extension";break;default:this.data().cN="filename"}this.data().display.filename="N"==a.substr(2,1);this.data().display.date="D"==a.substr(3,1);this.data().display.filesize="S"==a.substr(4,1);this.data().display.resize="R"==a.substr(5,1)}else this.app.config.defaultViewType&&(this.data().dA=this.app.config.defaultViewType),this.app.config.defaultSortBy&&(this.data().cN=this.app.config.defaultSortBy),void 0!==this.app.config.defaultDisplayFilename&&
(this.data().display.filename=this.app.config.defaultDisplayFilename),void 0!==this.app.config.defaultDisplayDate&&(this.data().display.date=this.app.config.defaultDisplayDate),void 0!==this.app.config.defaultDisplayFilesize&&(this.data().display.filesize=this.app.config.defaultDisplayFilesize),void 0!==this.app.config.defaultDisplayResize&&(this.data().display.resize=this.app.config.defaultDisplayResize)}var e=d.aG.hS("filesview","filesview",{dA:"thumbnails",display:{filename:1,date:1,filesize:1,
resize:1},cN:"filename",files:[],hA:null,pq:0});e.qX=function(){return"This is the DEMO version of CKFinder. Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license."};e.dT.push(c);e.dT.push(function(){m.mH(this.bn())});e.bh("SelectAction",["dblclick","click","requestSelectAction","requestSelectThumbnailAction"],function(a){var b=this,c=this.tools.bZ(a);if(c){if(!y||9<=p.version){var e=b.data();if("click"==a.name){e.nQ||(e.nQ=[null,null]);e.nQ[1]=
e.nQ[0];e.nQ[0]=c.name;return}if("dblclick"==a.name&&e.nQ[1]!=c.name)return}else if("click"==a.name)return;a=m.extend({},a.data,{file:c,jw:"requestSelectThumbnailAction"==a.name},!0);b.oW("beforeSelectAction",a,function(a,e){if(!a)try{var f,g=!0,h=c.getUrl(),l=c.getThumbnailUrl(),k=[];e.jw?(f=b.app.config.selectThumbnailActionFunction,!f&&b.app.config.thumbsDirectAccess&&(f=b.app.config.selectActionFunction)):f=b.app.config.selectActionFunction;if(f){var r=e.jw?l:h,q={fileUrl:h,fileSize:c.size,fileDate:c.date};
e.jw?(q.thumbnailUrl=l,b.app.config.selectThumbnailActionFunction?q.selectThumbnailActionData=b.app.config.selectThumbnailActionData:q.selectActionData=b.app.config.selectActionData):q.selectActionData=b.app.config.selectActionData;for(var n=b.tools.oO(),v,h=0,O=n.length;h<O;h++)v=n[h].getUrl(),k[h]={url:e.jw&&n[h].isImage()?n[h].getThumbnailUrl():n[h].getUrl(),data:m.extend({fileUrl:v,fileSize:n[h].size,fileDate:n[h].date},q.selectThumbnailActionData?{selectThumbnailActionData:q.selectThumbnailActionData}:
{selectActionData:q.selectActionData})};var w;switch(b.app.config.selectActionType){case "fckeditor":w=f(r);break;case "ckeditor":w=f(r,q);break;case "js":w=f.call(b.app.cg,r,q,k)}g=!1!==w}else b.app.execCommand("ViewFile");var t=b.app.document.getWindow();if(g&&b.app.cg.inPopup&&(!y&&!p.opera||t.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==t.$.top.name)){var Q=t.$.top.opener;t.$.top.close();Q&&Q.focus()}b.oW("successSelectAction",e);b.oW("afterSelectAction",e)}catch(D){throw D=d.ba(D),
b.oW("failedSelectAction",e),b.oW("afterSelectAction",e),D;}})}});e.bh("KeyboardNavigation",["keydown","requestKeyboardNavigation"],function(a){var b=this,c=0;a.data&&a.data.bK&&(c=a.data.bK().$==b.bn().$);var e=this.tools.bZ(a);if(e||c){var f=m.extend({},a.data,{file:e},!0);this.oW("beforeKeyboardNavigation",f,function(f,h){if(!f)try{var g,l,k,H=a.data.db();if(H>d.dy&&this.app.config.selectMultiple)H-=d.dy,k=1;else if(H==d.bP+65&&this.app.config.selectMultiple){b.tools.dH()&&b.tools.dH().deselect();
for(var r=b.data().cP[b.data().cN]||b.data().files,q=0;q<r.length;q++)if(!r[q].isDeleted){g=r[q].rowNode();break}do b.tools.bZ(g).select(!0);while((g=g.dG())&&g.ge());b.tools.cR(b.tools.bZ(g),!0);a.data.preventDefault()}if(c&&37<=H&&40>=H)for(r=b.data().cP[b.data().cN]||b.data().files,q=0;q<r.length;q++){if(!r[q].isDeleted){this.tools.cR(r[q],k);break}}else{if("list"==b.data().dA)38==H?(a.data.preventDefault(),g=e.rowNode(),g.gE()&&this.tools.cR(this.tools.bZ(this.cf()),k)):40==H&&(a.data.preventDefault(),
g=e.rowNode(),g.ge()&&this.tools.cR(this.tools.bZ(g.dG()),k));else if(38==H){if(a.data.preventDefault(),g=e.rowNode(),g.gE()){for(l=g.cf();l&&l.$.offsetLeft!=g.$.offsetLeft;)l=l.cf();l&&this.tools.cR(this.tools.bZ(l),k)}}else if(H==("rtl"==b.app.lang.dir?37:39))a.data.preventDefault(),g=e.rowNode(),g.ge()&&this.tools.cR(this.tools.bZ(g.dG()),k);else if(40==H){if(a.data.preventDefault(),g=e.rowNode(),g.ge()){for(l=g.dG();l&&l.$.offsetLeft!=g.$.offsetLeft;)l=l.dG();l&&this.tools.cR(this.tools.bZ(l),
k)}}else H==("rtl"==b.app.lang.dir?39:37)&&(a.data.preventDefault(),g=e.rowNode(),g.gE()&&this.tools.cR(this.tools.bZ(g.cf()),k));!c&&e&&(13==H&&b.oW("requestSelectAction",{file:e}),46==H&&b.app.execCommand("DeleteFile"),113==H&&b.app.execCommand("RenameFile"))}this.oW("successKeyboardNavigation",h);this.oW("afterKeyboardNavigation",h)}catch(n){throw n=d.ba(n),this.oW("failedKeyboardNavigation",h),this.oW("afterKeyboardNavigation",h),n;}})}});e.bh("ProcessingFile",["requestProcessingFile"],function(a){var b=
this.tools.bZ(a);a=m.extend({},a.data,{file:b},!0);this.oW("beforeProcessingFile",a,function(a,b){if(!a)try{var c=b.file;if(c){var e=c.rowNode();e&&e.addClass("processing");this.on("afterProcessingFile",function(a){a.data.file==c&&(b.step=2,this.oW("successProcessingFile",b),this.oW("afterProcessingFile",b),a.removeListener())});b.step=1;this.oW("successProcessingFile",b)}else this.oW("failedProcessingFile",b)}catch(f){throw this.oW("failedProcessingFile",b),this.oW("afterProcessingFile",b),d.ba(f);
}})});e.bh("RepaintFile",["requestRepaintFile"],function(a){var b=this.tools.bZ(a);a=m.extend({},a.data,{file:b},!0);this.oW("beforeRepaintFile",a,function(a,b){if(!a)try{var c=b.file;if(c){var e=c.filenameNode();e&&e.getHtml()!=m.htmlEncode(c.name)&&e.setHtml(m.htmlEncode(c.name));var f=c.rowNode();f&&f.removeClass("processing");this.oW("successRepaintFile",b)}else this.oW("failedRepaintFile",b);this.oW("afterRepaintFile",b)}catch(g){throw this.oW("failedRepaintFile",b),this.oW("afterRepaintFile",
b),d.ba(g);}})});y&&p.ie6Compat&&!p.ie7Compat&&!p.ie8&&e.bh("HoverFile",["mouseover","mouseout"],function(a){if("list"==this.data().dA){var b=this.tools.bZ(a);b&&(b=m.extend({},a.data,{bi:b.rowNode()},!0),this.oW("beforeHoverFile",b,function(b,c){if(!b)try{"mouseover"==a.name?(this.data().ho&&this.data().ho.removeClass("hover"),c.bi.addClass("hover"),this.data().ho=c.bi):(this.data().ho.removeClass("hover"),delete this.data().ho),this.oW("successHoverFile",c),this.oW("afterHoverFile",c)}catch(e){throw this.oW("failedHoverFile",
c),this.oW("afterHoverFile",c),d.ba(e);}}))}});e.bh("RenderThumbnails",["requestRenderThumbnails"],function(a){var b=this.hF.files;if(b[0]){a=function(a){for(var b=0;a;)b+=a.offsetTop,a=a.offsetParent;return b};for(var c=this.eh.$.offsetHeight,d=this.eh.$.scrollTop,e=a(this.eh.$),f=this.app.config.thumbnailDelay,g=this.app.config.showContextMenuArrow?1:0,h=0,l=0,b=b.length;h<b;h++){var k=this.hF.files[h].aNode().getChild([g,0]);if(!k.$.style.backgroundImage){var r=a(k.$);if(r<c+d+e&&r>=d){var q=this.hF.files[h].getThumbnailUrl(!0);
q&&function(){var a=k,b=q;setTimeout(function(){try{a.$.style.backgroundImage='url("'+b+'")'}catch(c){}},f*l++)}()}}}}});e.bh("RenderFiles",["requestRenderFiles"],function(a){var b=this.data(),e;e=a.data&&(!!a.data.ma||!!a.data.lK);var f=a.data&&a.data.ma,g;if(a.data&&a.data.files){this.tools.kR();for(g=0;g<a.data.files.length;g++)b.files[g]=a.data.files[g];e=b.files;e=1;this.data().folder=a.data.folder}g=this.data().folder;if(!f||f==g){if(e||!b.cP||b.pq)b.cP={};c.call(this);e=g.type;this._.nV||(this.app.config["defaultViewType_"+
e]&&(b.dA=this.app.config["defaultViewType_"+e]),this.app.config["defaultSortBy_"+e]&&(b.cN=this.app.config["defaultSortBy_"+e]),void 0!==this.app.config["defaultDisplayFilename_"+e]&&(b.display.filename=this.app.config["defaultDisplayFilename_"+e]),void 0!==this.app.config["defaultDisplayDate_"+e]&&(b.display.date=this.app.config["defaultDisplayDate_"+e]),void 0!==this.app.config["defaultDisplayFilesize_"+e]&&(b.display.filesize=this.app.config["defaultDisplayFilesize_"+e]),void 0!==this.app.config["defaultDisplayResize_"+
e]&&(b.display.resize=this.app.config["defaultDisplayResize_"+e]));if(b.files.length)if("date"==b.cN&&b.cP.date)e=b.cP.date;else if("size"==b.cN&&b.cP.size)e=b.cP.size;else if("extension"==b.cN&&b.cP.extension)e=b.cP.extension;else if("filename"==b.cN&&b.cP.filename)e=b.cP.filename;else{d.log("[FILES VIEW] Sorting files");f=b.files;e=[];for(g=0;g<f.length;g++)if(!f[g].isDeleted){var h=e.length;f[g].index=h;e[h]=f[g]}for(g=b.files.length=0;g<e.length;g++)b.files[g]=e[g];e=[];for(g=0;g<b.files.length;g++)e[g]=
b.files[g],e[g].releaseDomNodes();var l=function(a,b){var c=a.name.toLowerCase(),d=b.name.toLowerCase();return c<d?-1:c>d?1:0};"date"==b.cN?(e.sort(function(a,b){return a.date>b.date?-1:a.date<b.date?1:0}),b.cP.date=e):"size"==b.cN?(e.sort(function(a,b){return a.size>b.size?-1:a.size<b.size?1:0}),b.cP.size=e):"extension"==b.cN?(e.sort(function(a,b){return a.ext>b.ext?1:a.ext<b.ext?-1:l(a,b)}),b.cP.extension=e):(e.sort(l),b.cP.filename=e)}else e=b.files;a=m.extend({eu:1,dA:this.data().dA,display:this.data().display},
a.data,{files:e},!0);this.oW("beforeRenderFiles",a,function(a,c){if(!a){w=d.bF.substr(7,1);try{for(var e=0;e<c.files.length;e++)c.files[e].releaseDomNodes();this.tools.cR();this.oW("requestAddFiles",c,function(a){a||(b.hA=c.dA)});this.oW("successRenderFiles",c);this.oW("afterRenderFiles",c)}catch(f){throw this.oW("failedRenderFiles",c),this.oW("afterRenderFiles",c),d.ba(f);}}});if(this._.initialized)"thumbnails"==this.hF.dA&&this.oW("requestRenderThumbnails");else{var k=this;this.eh.on("scroll",function(){"thumbnails"==
k.hF.dA&&this.oW("requestRenderThumbnails")},this);this.app.on("afterRepaintLayout",function(){"thumbnails"==k.hF.dA&&setTimeout(function(){k.oW("requestRenderThumbnails")},0)});this._.initialized=!0}}});e.dT.push(function(a,b){b=this;a.on("afterCommandExecDefered",function(a){if(a.data){var c=a.data.name;if("RenameFile"==c){var d=a.data.file,e=1<b.tools.oO().length,c=d&&d.folder;b.tools.currentFolder()==c&&b.oW("requestRenderFiles",{folder:c,lK:1},function(c){c||(d.deselect(!0),b.oW("requestSelectFile",
{file:a.data.file,multiple:e},function(){c||d.focus(e)}))})}else"RemoveFiles"==c&&(c=a.data.folder,b.tools.currentFolder()==c&&(b.tools.cR(),b.bn().focus(),b.oW("requestRenderFiles",{folder:c,lK:1})))}})});e.bh("SelectFile",["click","requestSelectFile"],function(a){var b=this.tools.bZ(a),c="click"==a.name,e=a.data&&a.data.multiple&&this.app.config.selectMultiple;c&&a.data.db()>=d.bP&&(a.data.preventDefault(),e=(a.data.$.ctrlKey||a.data.$.metaKey)&&this.app.config.selectMultiple);c&&a.data.bK().hasClass("dropdown")?
(a.jN.oW("contextmenu",a.data),a.cancel()):(a=m.extend({},a.data,{file:b},!0),this.oW("beforeSelectFile",a,function(a,b){if(!a){var f=b.file;try{if(this.tools.dH()&&!e){for(var g=this.tools.oO(),h=0;h<g.length;h++)g[h].rowNode()&&g[h].rowNode().removeClass("selected");this.data().nY=[]}if(f&&e&&f.rowNode().hasClass("selected")&&this.tools.dH()){for(var g=this.tools.oO(),l=[],h=0;h<g.length;h++)g[h].isSameFile(f)?g[h].rowNode().removeClass("selected"):(g[h].rowNode().hasClass("selected")||g[h].rowNode().addClass("selected"),
l.push(g[h]));this.data().nY=l;this.data().cG.isSameFile(f)&&(this.data().cG=this.data().nY[l.length-1]);c&&this.tools.cR(this.tools.dH(),!0,1<l.length)}else f?(f.rowNode().addClass("selected"),this.data().nY||(this.data().nY=[]),this.data().cG=f,this.data().nY.push(f),c&&this.tools.cR(f,e,e)):this.tools.dH()&&!e&&(this.data().cG=null,this.data().nY=[],this.tools.cR());this.oW("successSelectFile",b);this.oW("afterSelectFile",b)}catch(k){throw this.oW("failedSelectFile",b),this.oW("afterSelectFile",
b),d.ba(k);}}}))});e.bh("AddFiles",["requestAddFiles"],function(a){a=m.extend({eu:0,view:"thumbnails",mj:null},a.data,{files:a.data.file?[a.data.file]:a.data.files},!0);this.oW("beforeAddFiles",a,function(a,c){if(!a)try{var e=this,f=e.bn(),g=e.data().hA,h=0,l,k;f.removeClass("files_message");b()&&(c.files.length&&(c.mj="This is the DEMO version of CKFinder. Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license."),h=1);if("list"==c.dA){this.data().kQ||
(this.data().kQ=m.bind(this.tools.qc,this.tools));f.removeClass("files_thumbnails");f.addClass("files_details");l=q(c.files,this.data().kQ);k=this.tools.fF();var r=this.tools.kj();g&&"list"!=g&&this.tools.lP().setHtml("");if(y){r&&g&&"list"==g&&!c.eu&&(l=r.getHtml()+l);k&&k.remove();if(l){var n=I[0]+this.tools.lz()+I[1]+l+I[2]+I[3];f.appendHtml(n)}this.tools.releaseDomNodes(["detailsContentNode","detailsRootNode"])}else l?c.eu?this.tools.fF().setHtml(this.tools.lz()+I[1]+l+I[2]):r.appendHtml(l):k.setHtml("")}else{f.removeClass("files_details");
f.addClass("files_thumbnails");var v=this.data().display;l=q(c.files,function(a){var b="r"+a.index,c=[];c.push('<a id="',b);c.push('" class="file_entry" tabindex="-1" role="listiem presentation" href="javascript:void(0)" title="',m.htmlEncode(a.name).replace('"',"&quot;"),'" aria-labelledby="',b);c.push('_label" aria-describedby="',b,'_details" style="width: '+(e.app.config.thumbsWidth+10)+'px">');c.push(t,'<div class="image"><div role="img" style="width: '+e.app.config.thumbsWidth+"px; height: "+
e.app.config.thumbsHeight+'px"></div></div>');v.filename&&c.push('<h5 id="',b,'_label">',m.htmlEncode(a.name),"</h5>");c.push('<span id="'+b+'_details" class="details" role="list presentation">');v.date&&c.push('<span role="listitem" class="extra">',a.dateF,"</span>");v.filesize&&c.push('<span role="listitem" aria-label="Size">',m.formatSize(a.size,e.app.lang,!0),"</span>");c.push("</span></a>");return c.join("")});k=this.tools.lP();if(g&&"list"==g){var D=this.tools.fF();D&&y?D.remove():D&&D.setHtml("")}c.eu?
k.setHtml(l):k.appendHtml(l)}h||w&&!(5>d.bs.indexOf(w)%8)||(c.mj="Product license has expired. Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license.",h=1);(c.eu&&!l||h)&&c.mj&&(f.addClass("files_message"),"This is the DEMO version of CKFinder. Please visit the <a href='http://ckfinder.com' target='_blank'>CKFinder web site</a> to obtain a valid license."==c.mj?this.tools.of().hide():(this.tools.of().setHtml(c.mj),this.tools.of().show()));w||
h||k.setHtml("");this.oW("successAddFiles");this.oW("afterAddFiles")}catch(O){throw this.oW("failedAddFiles"),this.oW("afterAddFiles"),d.ba(O);}})});e.bh("ShowFolderFiles",["requestShowFolderFiles"],function(c){var e=this,f=d.aG.bX["foldertree.foldertree"].tools.cq(c),f=m.extend({},c.data,{folder:f},!0);this.oW("beforeShowFolderFiles",f,function(f,g){if(!f){this.tools.dH()&&this.oW("requestSelectFile");this.app.cS("refresh").bR(d.aY);try{var h=g.folder;if(!h.acl.folderView)throw e.app.msgDialog("",
e.app.lang.Errors[103]),"[CKFINDER] No permissions to view folder.";c.data.ib=this;this.data().folder=h;e.tools.kR();this.oW("requestRenderFiles",{eu:1,mj:e.app.lang.FilesLoading});this.app.connector.sendCommand("GetFiles",void 0,function(c){e.app.cS("refresh").bR(d.aS);if(e.app.aV!=h)e.oW("failedShowFolderFiles",g),e.oW("afterShowFolderFiles",g);else if(!(c.checkError()||200>b.toString().length)){e.tools.kR();var f;c=c.selectNodes("Connector/Files/File");for(var l=0;l<c.length;l++){var k=c[l].attributes.getNamedItem("date").value,
r=c[l].attributes.getNamedItem("name").value,k=e.tools.rg(new d.aL.File(r,parseInt(c[l].attributes.getNamedItem("size").value,10),c[l].attributes.getNamedItem("thumb")?c[l].attributes.getNamedItem("thumb").value:!1,k,e.app.lB(k.substr(6,2),k.substr(4,2),k.substr(0,4),k.substr(8,2),k.substr(10,2)),h));g.mw&&r==g.mw&&(f=k)}e.oW("requestRenderFiles",{mj:e.app.lang.FilesEmpty});f&&(e.app.oW("requestSelectFile",{file:f,scrollTo:1}),setTimeout(function(){f.aNode().$.scrollIntoView(1);e.app.layout.mB().getFirst().$.scrollIntoView(0)},
p.opera?500:100));e.oW("successShowFolderFiles",g);e.oW("afterShowFolderFiles",g);a(e)}},h.type,h)}catch(l){throw this.oW("failedShowFolderFiles",g),this.oW("afterShowFolderFiles",g),d.ba(l);}}})});e.tools.bZ=function(a){var b,c=0;a.data&&a.data.file instanceof A?(a=a.data.file,c=1):a.data&&a.data.bK?(a=a.data.bK(),c=1):a instanceof x.bi&&(c=1);if(c){for(var e=a;!(!e||e.is("a")&&e.hasAttribute("id")||e.is("tr"))&&e!=this.ib.eh;)e=e.getParent();e&&e.dS()&&(e.is("a")||e.is("tr"))&&(b=this.ib.data().files[e.dS().slice(1)])}else"number"==
typeof a?b=this.ib.data().files[a]:"String"==typeof a?b=this.ib.data().files[e.dS().slice(1)]:a.data&&a.data.file&&a.data.file instanceof d.aL.File?b=a.data.file:a.data&&a.data.files&&a.data.files.length&&a.data.files[0]&&a.data.files[0]instanceof d.aL.File?b=a.data.files[0]:a instanceof d.aL.File&&(b=a);return b};e.tools.kR=function(){var a=this.ib.data();a.files.length=0;a.cP={}};e.tools.oR=function(a,b){var c=this.ib.app,e=a.name.match(c.rQ.jf);return e&&(e=e[0])&&c.rQ.jh.test(e)?c.fh+"images/icons/"+
(b?"32":"16")+"/"+e.toLowerCase()+".gif":c.fh+"images/icons/"+(b?"32":"16")+"/default.icon.gif"};e.tools.rg=function(a){var b=this.ib.data().files.push(a);a.index=--b;a.app=this.ib.app;return a};e.tools.lP=function(a){this.jl||(this.jl=this.ib.bn().getChild(1));return this.jl};e.tools.kj=function(a){void 0===this.iJ&&(this.iJ=(a=this.fF())?v(r(a.$.childNodes,"tbody")):null);return this.iJ};e.tools.sn=function(a){void 0===this.kT&&(this.kT=(a=this.fF())?v(r(a.$.childNodes,"thead")):null);return this.kT};
e.tools.fF=function(a){void 0===this.iO&&(this.iO=v(r(this.ib.bn().$.childNodes,"table")));return this.iO};e.tools.of=function(a){this.iF||(this.iF=this.ib.bn().getChild(0));return this.iF};e.tools.releaseDomNodes=function(a){this.iF=this.iJ=this.iO=this.jl=void 0};e.tools.lz=function(){var a=this.ib.data().display,b=[];b.push('<td class="name">'+this.ib.app.lang.SetDisplayName+"</td>");a.filesize&&b.push("<td>"+this.ib.app.lang.SetDisplaySize+"</td>");a.date&&b.push("<td>"+this.ib.app.lang.SetDisplayDate+
"</td>");a=b.length-1;b[a]=a?'<td class="last">'+b[a].substr(4):'<td class="last '+b[a].substr(11);return"<thead><tr><td>&nbsp;</td>"+b.join("")+"</tr></thead>"};e.tools.qc=function(a){var b=this.oR(a),c="r"+a.index,e=this.ib.data().display,d=[];d.push('<td class="name">'+F+'<a tabindex="-1">'+(e.filename?m.htmlEncode(a.name):"")+"</a></td>");e.filesize&&d.push("<td>"+m.formatSize(a.size,this.ib.app.lang,!0)+"</td>");e.date&&d.push("<td>"+a.dateF+"</td>");a=d.length-1;d[a]=a?'<td class="last">'+d[a].substr(4):
'<td class="last '+d[a].substr(11);return'<tr id="'+c+'"><td class="image"><img src="'+b+'" alt="img alt" /></td>'+d.join("")+"</tr>"};e.tools.dH=function(){var a=this.ib.data();if(a.cG)return a.cG.isDeleted?a.cG=null:a.cG};e.tools.oO=function(a){var b=this.ib.data(),c=[];if(b.nY){for(var e=0;e<b.nY.length;e++)b.nY[e]&&!b.nY[e].isDeleted&&c.push(b.nY[e]);if(a){a=c;for(var d={},c=[],e=0;e<a.length;e++)a[e].name in d||(c.push(a[e]),d[a[e].name]=1)}}return b.nY=c};e.tools.currentFolder=function(){return this.ib.data().folder};
e.tools.cR=function(a,b,c){a?(this.iS?this.iS.blur():this.ib.bn().setAttribute("tabindex",-1),this.iS=a,a.focus(b,c)):(delete this.iS,this.ib.bn().setAttribute("tabindex",0))};e.tools.downloadFile=function(a,b){var c=a.getById("downloadIframe");c||(c=a.createElement("iframe"),c.setAttribute("id","downloadIframe"),c.setStyle("display","none"),a.bH().append(c));c.setAttribute("src",b)}}function f(a,b,c,d,g,h){for(var l={},r=0,q=b.files,n=[b.destination],v=0,w=b.files.length;v<w;v++)b.destination!=q[v].folder&&
(l["files["+r+"][name]"]=q[v].name,l["files["+r+"][type]"]=q[v].folder.type,l["files["+r+"][folder]"]=q[v].folder.getPath(),l["files["+r+"][options]"]=g&&g[v]||"",r++,c&&!d&&n.push(q[v].folder));d||(h||(h=function(){}),h=m.override(h,function(b){return function(){for(var c=a.aG["filesview.filesview"].tools.currentFolder(),e=0,d=n.length;e<d;e++)if(n[e]==c){a.oW("requestSelectFolder",{folder:c});break}return b}}));if(r){var t=a.connector,D=0;t.sendCommandPost(c?"MoveFiles":"CopyFiles",null,l,function(g){var l=
g.getErrorNumber(),r=[],H=[],n,v,G;n=0;for(v=q.length;n<v;n++)H.push(q[n]);if(l==t.ERROR_COPY_FAILED||l==t.ERROR_MOVE_FAILED){D=1;var l=g.selectNodes("Connector/Errors/Error"),w=parseInt(g.selectSingleNode("Connector/"+(c?"MoveFiles/@moved":"CopyFiles/@copied")).value,10);g=0;var F=[],K,M,p;n=0;for(v=l.length;n<v;n++)for(K=l[n].getAttribute("code"),K==t.ERROR_ALREADYEXIST?g=1:F.push([l[n].getAttribute("name"),a.lang.Errors[K]]),K=0,M=H.length;K<M;K++)if((p=H[K])&&p.name==l[n].getAttribute("name")&&
p.folder.getPath()==l[n].getAttribute("folder")&&p.folder.type==l[n].getAttribute("type")){l[n].getAttribute("code")==t.ERROR_ALREADYEXIST&&r.push(p);delete H[K];break}n=0;for(v=F.length;n<v;n++)F[n]=a.lang.FileError.replace("%s",F[n][0]).replace("%e",F[n][1]);w||g?F.length==H.length-w&&(G=a.lang.OperationCompletedErrors+" "+a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",w)+"<br /><br />",G+=a.lang[c?"MoveFailedList":"CopyFailedList"].replace("%s",k(F)),a.msgDialog("",G,h||null)):a.msgDialog("",
a.lang.Errors[c?300:301]+"<br /><br />"+k(F),h||null);n=e(a,H,b.fileCallback);g&&a.cg.openDialog("moveFileExists",function(e){var d=arguments.callee;G="";F.length&&(G+=a.lang.OperationCompletedErrors+" ");G+=w?a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",w):"";F.length&&(G+=(G?"<br /><br />":"")+a.lang[c?"MoveFailedList":"CopyFailedList"].replace("%s",k(F)));G&&(G+="<br /><br />");var g=a.lang.ErrorMsg.FileExists,g=g.replace("%s",r[0]);G+="<strong>"+g+"</strong>";e.show();e.getContentElement("tab1",
"msg").getElement().setHtml(G);e.on("ok",function(g){g.removeListener();g=e.getContentElement("tab1","option").getValue();var l=e.getContentElement("tab1","remember").getValue(),k;switch(g){case "autorename":case "overwrite":k=[g];break;case "skip":l?h&&h():(r.shift(),r.length&&setTimeout(function(){a.cg.openDialog("moveFileExists",d)},0));return}if(l)for(g=1,l=r.length;g<l;g++)k.push(k[0]);f(a,m.extend({files:r},b),c,1,k,h)})});if(d)return}else g.checkError()&&(D=1);D?b.errorCallback&&b.errorCallback():
(n=e(a,H,b.fileCallback))?(G=a.lang.OperationCompletedSuccess+"<br />"+a.lang[c?"MovedFilesNumber":"CopiedFilesNumber"].replace("%s",n),a.msgDialog("",G,h||null)):h&&h()},b.destination.type,b.destination)}else h&&h()}function e(a,b,c){for(var e=0,d,f=0,g=b.length;f<g;f++)if(d=b[f])e++,c&&c(a,d);return e}function k(a){return'<ul class="cke_files_list'+(3<a.length?" cke_files_list_many":"")+'"><li>'+a.join("</li><li>")+"</li></ul>"}function g(a,b){if(!a||0===a.length)throw new d.dU("name_empty",b.lang.ErrorMsg.pg);
if(D.iz.test(a))throw new d.dU("name_invalid_chars",b.lang.ErrorMsg.oP);return!0}function h(a,b){for(var c={},e=b[0].folder,d=e.getPath(),f=0,g=b.length;f<g;f++)c["files["+f+"][name]"]=b[f].name,c["files["+f+"][type]"]=e.type,c["files["+f+"][folder]"]=d,a.oW("requestProcessingFile",{file:b[f]});a.connector.sendCommandPost("DeleteFiles",null,c,function(c){var d={},f;if(302==c.getErrorNumber())if(b.length-parseInt(c.selectSingleNode("Connector/DeleteFiles/@deleted").value,10)){var g=c.selectNodes("Connector/Errors/Error");
c=0;for(f=g.length;c<f;c++)d[g[c].attributes.getNamedItem("name").value]=1;a.skippedFilesDialog(null,g)}else{c.checkError();return}else if(c.checkError())return;c=0;for(f=b.length;c<f;c++)d[b[c]]||(b[c].isDeleted=!0,b[c].releaseDomNodes());a.oW("afterCommandExecDefered",{name:"RemoveFiles",folder:e})},e.type,e)}function l(){m.extend(d.aL.Folder.prototype,{getFiles:function(a){var b=this,c=this.app;c.connector.sendCommand("GetFiles",{},function(e){var f=[];e=e.selectNodes("Connector/Files/File");for(var g=
0;g<e.length;g++){var h=e[g].attributes.getNamedItem("date").value;f.push(new d.aL.File(e[g].attributes.getNamedItem("name").value,parseInt(e[g].attributes.getNamedItem("size").value,10),e[g].attributes.getNamedItem("thumb")?e[g].attributes.getNamedItem("thumb").value:!1,h,c.lB(h.substr(6,2),h.substr(4,2),h.substr(0,4),h.substr(8,2),h.substr(10,2)),b))}a&&a.call(b,f)},b.type,b)},showFiles:function(a){this.app.oW("requestShowFolderFiles",{folder:this,mw:a})}})}function q(a,b){if(a){for(var c=[],e=
0;e<a.length;e++)c.push(b(a[e]));return c.join("")}}function n(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c]}function r(a,b,c){return n(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!c--)return a})}function v(a){return a?new A(a):null}var w,D={fX:/[^\.]+$/,iz:/[\\\/:\*\?"<>\|]/},t='<span class="dropdown">\u25bc</span>',F='<a href="javascript:void(0)" class="dropdown">\u25bc</a>',I=["<table class='files_details' role='region' aria-controls='status_view'>","<tbody>","</tbody>","</table>"],
N=["Node","message"];z.add("filesview",{bM:["foldertree"],onLoad:function(){l();c();d.dialog.add("moveFileExists",function(a){return{title:a.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:p.ie7Compat?"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:a.lang.common.makeDecision,
"default":"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"],[a.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:a.lang.common.rememberDecision}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}})},bz:function(a){var b=this;a.rQ.jh=new RegExp("^("+a.config.fileIcons+")$","i");a.rQ.rO=/^(jpg|gif|png|bmp|jpeg)$/i;a.rQ.jf=D.fX;a.on("themeSpace",function(a){if("mainMiddle"==
a.data.space){var b="";y||(b=I[0]+I[3]);a.data.html+="<div id='files_view' class='view widget files_thumbnails' aria-live='polite' role='main' tabindex='0' aria-controls='status_view'><h4 class='message_content'></h4><div class='files_thumbnails fake no_list' role='list'></div>"+b+"</div>"}});a.on("uiReady",function(c){a.config.showContextMenuArrow||(F=t="");c=a.document.getById("files_view");c.hX();var e=d.aG.bz(a,"filesview",b,c);a.config.selectMultiple&&c.on("click",function(a){if(a.data.$.shiftKey){var b=
e.tools.dH(),c=e.tools.bZ(a),d=!b;if(c){b&&(b.rowNode().$.offsetTop<c.rowNode().$.offsetTop?d=1:"list"!=e.data().dA&&b.rowNode().$.offsetTop==c.rowNode().$.offsetTop&&(d=b.rowNode().$.offsetLeft<c.rowNode().$.offsetLeft));for(var f=c.rowNode(),g;f=d?f.cf():f.dG();){g=e.tools.bZ(f);if(b&&g.isSameFile(b))break;g.select(!0)}e.tools.cR(c,!0);a.cancel();a.data.preventDefault()}}},null,null,1);a.bD("ViewFile",{exec:function(a){var b=e.data().cG;if(b&&!0!==a.oW("launchGallery",{selected:b,files:e.data().files}).bx){var c=
.8*window.screen.width,d=.7*window.screen.height,f;f="menubar=no,location=no,status=no,toolbar=no,scrollbars=yes,resizable=yes,width="+c+(",height="+d);f+=",left="+(window.screen.width-c)/2;f+=",top="+(window.screen.height-d)/2;(a.cg.inPopup?a.document.getWindow().$.parent:window).open(b.folder.getUrl()+encodeURIComponent(b.name),"_blank",f)||a.msgDialog("",a.lang.ErrorMsg.oo)}}});a.bD("DownloadFile",{exec:function(a){var b=e.data().cG;b&&(b=a.config.directDownload?b.folder.getUrl()+b.name+"?download":
a.connector.composeUrl("DownloadFile",{FileName:b.name},b.folder.type,b.folder),e.tools.downloadFile(a.document,b))}});a.bD("RenameFile",{readOnly:!1,exec:function(a){var b=function(b,e){try{c.rename(e)}catch(f){if(f instanceof d.dU)a.msgDialog("",f.message);else throw f;}},c=e.data().cG;c&&c.folder.acl.fileRename&&a.hs(a.lang.RenameDlgTitle,a.lang.FileRename,c.name,function(e){(e=m.trim(e))&&(e.match(a.rQ.jf)[0].toLowerCase()!=c.ext.toLowerCase()?a.fe("",a.lang.FileRenameExt,function(){b(c,e)}):
b(c,e))})}});a.bD("DeleteFile",{readOnly:!1,exec:function(a){var b=e.tools.oO(!0);b&&0!=b.length&&b[0].folder.acl.fileDelete&&a.fe("",1==b.length?a.lang.FileDelete.replace("%1",b[0].name):a.lang.FilesDelete.replace("%1",b.length),function(){h(a,b)})}});a.bD("copyFilesToFolder",{readOnly:!1,exec:function(a,b){b.files||(b.files=e.tools.oO());b.files.length&&b.destination&&b.destination.acl.fileUpload&&f(a,b,0,0,[],b.callback)}});a.bD("moveFilesToFolder",{readOnly:!1,exec:function(a,b){b.files||(b.files=
e.tools.oO());b.files.length&&b.destination&&b.destination.acl.fileUpload&&b.files[0].folder.acl.fileDelete&&f(a,b,1,0,[],b.callback)}});a.eU&&(a.dZ("file0",90),a.dZ("file1",100),a.dZ("file2",110),a.dZ("file3",120),a.eU({selectFile:{label:a.lang.Select,onClick:function(){var b=a.aG["filesview.filesview"],c=b.tools.dH();c&&b.oW("requestSelectAction",{file:c})},group:"file0"},nA:{label:a.lang.SelectThumbnail,onClick:function(){var b=a.aG["filesview.filesview"],c=b.tools.dH();c&&b.oW("requestSelectThumbnailAction",
{file:c})},group:"file0"},viewFile:{label:a.lang.View,command:"ViewFile",group:"file1"},downloadFile:{label:a.lang.Download,command:"DownloadFile",group:"file1"},renameFile:{label:a.lang.Rename,command:"RenameFile",group:"file2"},deleteFile:{label:a.lang.Delete,command:"DeleteFile",group:"file3"},deleteFiles:{label:a.lang.DeleteFiles,command:"DeleteFile",group:"file3"}}));a.bj&&(a.bj.lX(c),a.bj.kh(function(b,c){var f=e.tools.bZ(b);if(f){f.rowNode().hasClass("selected")?e.data().cG=f:a.oW("requestSelectFile",
{file:f});var g=f.folder.acl,h={viewFile:g.fileView?d.aS:d.aY,downloadFile:g.fileView?d.aS:d.aY};a.config.readOnly||(h.renameFile=g.fileRename?d.aS:d.aY,h[1<e.tools.oO().length?"deleteFiles":"deleteFile"]=g.fileDelete?d.aS:d.aY);a.config.selectActionFunction&&(h.selectFile=g.fileView?d.aS:d.aY);f.isImage()&&!a.config.disableThumbnailSelection&&(a.config.selectThumbnailActionFunction||a.config.thumbsDirectAccess&&a.config.selectActionFunction)&&(h.nA=g.fileView?d.aS:d.aY);e.oW("beforeContextMenu",
{bj:h,file:f,folder:e.data().folder});return h}},c))});a.bD("filesviewFocus",{exec:function(a){var b=a.layout.pn();a=a.aG["filesview.filesview"].tools.dH();b.focus();a&&a.focus()}})}});d.aL.File=function(a,b,c,e,d,f){this.app=this.index=null;this.name=a;this.ext=a.match(D.fX)[0];this.nameL=a.toLowerCase();this.size=b;this.thumb=c;this.date=e;this.dateF=d;this.folder=f;this.isDeleted=!1};d.aL.File.prototype={rename:function(a){g(a,this.app);var b=this;b.name==a?b.app.oW("afterCommandExecDefered",{name:"RenameFile",
file:b}):(b.app.oW("requestProcessingFile",{file:b}),b.app.connector.sendCommandPost("RenameFile",{fileName:b.name,newFileName:a},null,function(a){a.checkError()?b.app.oW("requestRepaintFile",{file:b}):(b.name=a.selectSingleNode("Connector/RenamedFile/@newName").value,b.nameL=b.name.toLowerCase(),b.ext=b.name.match(D.fX)[0],b.thumb=0,b.app.oW("afterCommandExecDefered",{name:"RenameFile",file:b}))},b.folder.type,b.folder))},remove:function(){h(this.app,[this])},select:function(a){this.app.oW("requestSelectFile",
{file:this,multiple:a})},deselect:function(a){a?this.select(!0):this.app.oW("requestSelectFile")},toString:function(){return this.name},isImage:function(){return this.app.rQ.rO.test(this.ext)},isSameFile:function(a){return(this.name==a.name||this.index==a.index)&&this.folder.getPath()==a.folder.getPath()&&this.folder.type==a.folder.type},getUrl:function(){return this.folder.getUrl()+encodeURIComponent(this.name)},rowNode:function(){this.je||(this.je=this.app.document.getById("r"+this.index));return this.je},
getThumbnailUrl:function(a){var b=this.thumb,c=this.name,e=this.app,f=c.match(e.rQ.jf);if(f&&(f=f[0])){if(e.config.thumbsEnabled&&e.rQ.rO.test(f)){var f=encodeURIComponent(this.date+"-"+this.size),g={FileName:c};a&&(g.fileHash=f);g=e.connector.composeUrl("Thumbnail",g,this.folder.type,this.folder);b||d.ajax.loadStream(g);return e.config.thumbsDirectAccess?e.config.thumbsUrl+this.folder.type+this.folder.getPath()+encodeURIComponent(c)+(a?"?hash="+e.getResourceType(this.folder.type).hash+"&fileHash="+
f:""):g}if(e.config.useNativeIcons&&p.gecko)return"moz-icon://."+f.toLowerCase()+"?size=32";if(e.rQ.jh.test(f))return e.fh+"images/icons/32/"+f.toLowerCase()+".gif"}return e.fh+"images/icons/32/default.icon.gif"},filenameNode:function(){if(void 0===this.ht){var a=this.rowNode();a&&(a.is("a")?this.ht=v(r(a.$.childNodes,"h5")):this.ht=v(r(this.aNode().$.childNodes,"h5")))}return this.ht},aNode:function(){if(void 0===this.dM){var a=this.rowNode();a&&(a.is("a")?this.dM=a:(a=r(a.$.childNodes,"td",1),this.dM=
v(r(a.childNodes,"a"))))}return this.dM},focusNode:function(){return this.aNode()},releaseDomNodes:function(){this.ht=this.dM=this.je=void 0},focus:function(a,b){!b&&this.select(a);var c=this.focusNode();c.setAttribute("tabindex",0);c.focus()},blur:function(){this.aNode().setAttribute("tabindex",-1)}}})();(function(){function a(a,b){var c=[];if(b)for(var e in b)c.push(e+"="+encodeURIComponent(b[e]));else return a;return a+(-1!=a.indexOf("?")?"&":"?")+c.join("&")}function b(a){a=this.getDialog();a.getParentApi()._.rb=
this;return a.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value&&a.getContentElement(this["for"][0],this["for"][1]).vy()?!0:!1}function c(b,c,e){var d=e.params||{};e.url&&(d.CKFinderFuncNum=b._.ra,d.langCode||(d.langCode=b.langCode),c.action=a(e.url,d),c.filebrowser=e)}function f(e,d,l,k){var n,r;for(r in k)if(n=k[r],"hbox"!=n.type&&"vbox"!=n.type||f(e,d,l,n.children),n.filebrowser&&"fileButton"==n.type&&n["for"]){"string"==typeof n.filebrowser&&(n.filebrowser={target:n.filebrowser});
n.filebrowser.action="QuickUpload";var v=n.filebrowser.url;if(v)n.filebrowser.url=v,n.hidden=!1,c(e,l.vz(n["for"][0]).eB(n["for"][1]),n.filebrowser);else{var w=n.onShow;n.onShow=function(b){var c=b.jN;if(w&&!1===w.call(c,b))return!1;(b=e.getSelectedFolder())&&(v=b.getUploadUrl());if(!v)return!1;b=n.filebrowser.params||{};b.CKFinderFuncNum=e._.ra;b.langCode||(b.langCode=e.langCode);v=a(v,b);b=this.getDialog().getContentElement(n["for"][0],n["for"][1]);if(!b)return!1;b._.dg.action=v;b.reset();return!0}}var m=
n.onClick;n.onClick=function(a){var c=a.jN;return m&&!1===m.call(c,a)?!1:b.call(c,a)}}}function e(a,b,c){if(-1!==c.indexOf(";")){c=c.split(";");for(var d=0;d<c.length;d++)if(e(a,b,c[d]))return!0;return!1}return(a=a.vz(b).eB(c).filebrowser)&&a.url}function k(a,b){var c=this._.rb.getDialog(),e=this._.rb["for"],d=this._.rb.filebrowser.onSelect;e&&c.getContentElement(e[0],e[1]).reset();if("function"!=typeof b||!1!==b.call(this._.rb))if(!d||!1!==d.call(this._.rb,a,b))if("string"==typeof b&&b&&alert(b),
a&&(e=this._.rb,c=e.getDialog(),e=e.filebrowser.target||""))if(e=e.split(":"),d=c.getContentElement(e[0],e[1]))d.setValue(a),c.selectPage(e[0])}z.add("filebrowser",{bz:function(a){a.cg._.ra=m.addFunction(k,a.cg)}});d.on("dialogDefinition",function(a){var b=a.data.dg,c,d;for(d in b.contents)c=b.contents[d],f(a.application.cg,a.data.name,b,c.elements),c.hidden&&c.filebrowser&&(c.hidden=!e(b,c.id,c.filebrowser))})})();z.add("button",{eK:function(a){a.bY.kd(d.UI_BUTTON,u.button.dq)}});CKFinder._.UI_BUTTON=
d.UI_BUTTON=1;u.button=function(a){m.extend(this,a,{title:a.label,className:a.className||a.command&&"cke_button_"+a.command||"",click:a.click||function(b){if(a.command)b.execCommand(a.command);else if(a.onClick)a.onClick(b)}});this._={}};u.button.dq={create:function(a){return new u.button(a)}};u.button.prototype={canGroup:!0,er:function(a,b){var c=this._.id="cke_"+m.getNextNumber();this._.app=a;var f={id:c,button:this,app:a,focus:function(){var b=a.document.getById(c);b&&b.focus()},lc:function(){this.button.click(a)}},
e=m.addFunction(f.lc,f),k=u.button._.instances.push(f)-1,g="",h=this.command;if(this.iH)a.on("mode",function(){this.bR(this.iH[a.mode]?d.aS:d.aY)},this);else h&&(h=a.cS(h))&&(h.on("bu",function(){this.bR(h.bu)},this),g+="cke_"+(h.bu==d.eV?"on":h.bu==d.aY?"disabled":"off"));h||(g+="cke_off");this.className&&(g+=" "+this.className);b.push('<span class="cke_button">','<a id="',c,'" class="',g,'" href="javascript:void(\'',(this.title||"").replace("'",""),'\')" title="',this.title,'" tabindex="-1" hidefocus="true" role="button" aria-labelledby="'+
c+'_label"'+(this.vZ?' aria-haspopup="true"':""));(p.opera||p.gecko&&p.mac)&&b.push(' onkeypress="return false;"');p.gecko&&b.push(' onblur="this.style.cssText = this.style.cssText;"');b.push(' onkeydown="window.parent.CKFinder._.uiButtonKeydown(',k,', event);" onfocus="window.parent.CKFinder._.uiButtonFocus(',k,', event);" onclick="window.parent.CKFinder._.callFunction(',e,', this); return false;">');!1!==this.icon&&b.push('<span class="cke_icon"');this.icon&&(e=-16*(this.rD||0),b.push(' style="background-image:url(',
d.getUrl(this.icon),");background-position:0 "+e+'px;"'));!1!==this.icon&&b.push("></span>");b.push('<span id="',c,'_label" class="cke_label">',this.label,"</span>");this.vZ&&b.push('<span class="cke_buttonarrow"></span>');b.push("</a>","</span>");if(this.onRender)this.onRender();return f},bR:function(a){if(this._.bu==a)return!1;this._.bu=a;var b=this._.app.document.getById(this._.id);if(b){b.bR(a);a==d.aY?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled");a==d.eV?b.setAttribute("aria-pressed",
!0):b.removeAttribute("aria-pressed");var c=this.title,f=this._.app.lang.common.unavailable,b=b.getChild(1);a==d.aY&&(c=f.replace("%1",this.title));b.setHtml(c);return!0}return!1}};u.button._={instances:[],keydown:function(a,b){var c=u.button._.instances[a];if(c.onkey)return b=new x.event(b),!1!==c.onkey(c,b.db())},focus:function(a,b){var c=u.button._.instances[a],d;c.onfocus&&(d=!1!==c.onfocus(c,new x.event(b)));p.gecko&&10900>p.version&&b.preventBubble();return d}};CKFinder._.uiButtonKeydown=u.button._.keydown;
CKFinder._.uiButtonFocus=u.button._.focus;u.prototype.qW=function(a,b){this.add(a,d.UI_BUTTON,b)};(function(){z.add("container",{bM:[],bz:function(a){var b=this;a.on("themeAvailable",function(){b.pV(a)})},pV:function(a){function b(b){b&&b.removeListener();b=l.getFrameDocument().$;b.open();g&&(b.domain=document.domain);a.document=new L(b);a.theme.dQ(a);b.close();(b.defaultView||b.parentWindow).CKFinder=CKFinder;d.skins.load(a,"application",function(){var b=a.dJ;b&&b.oA(a.document)});if(!l.isVisible()&&
y&&8<=p.version)var c=setInterval(function(){l.isVisible()&&(a.layout.ea(!0),c=clearInterval(c))},500)}var c=a.config.height,f=a.config.tabIndex||a.element.getAttribute("tabindex")||0;isNaN(c)||(c=Math.max(c,200),c+="px");var e="",k=a.config.width;k&&(isNaN(k)||(k+="px"),e+="width: "+k+";");var k=a.config.className?'class="'+a.config.className+'"':"",g=p.isCustomDomain(),h="document.open();"+(g?'document.domain="'+window.document.domain+'";':"")+"document.close();",l=A.kE('<iframe style="'+e+"height:"+
c+'"'+k+' frameBorder="0" src="'+(y?"javascript:void(function(){"+encodeURIComponent(h)+"}())":"")+'" tabIndex="'+f+'" allowTransparency="true"'+(y&&9<=p.version&&a.cg.inPopup?' onload="typeof ckfinder !== "undefined" && ckfinder();"':"")+"></iframe>",a.element.getDocument());y&&9<=p.version&&a.cg.inPopup&&(a.element.getDocument().getWindow().$.ckfinder=function(){a.element.getDocument().getWindow().$.ckfinder=void 0;b()});l.on("load",b);c=a.lang.appTitle.replace("%1",a.name);p.gecko?(l.on("load",
function(a){a.removeListener()}),a.element.setAttributes({role:"region",title:c}),l.setAttributes({role:"region",title:" "})):p.webkit?(l.setAttribute("title",c),l.setAttribute("name",c)):y&&l.appendTo(a.element);y||a.element.append(l);a.container=l}});d.application.prototype.focus=function(){if(this._.oO&&1<this._.oO.length){this.oW("requestSelectFile");for(var a=0,b=this._.oO.length;a<b;a++)this.oW("requestSelectFile",{file:this._.oO[a],multiple:!0})}(this._.activeElement?A.eB(this._.activeElement):
this.document.getWindow()).focus()}})();z.add("contextmenu",{bM:["menu"],eK:function(a){a.bj=new z.bj(a);a.bD("bj",{exec:function(){var b=a.layout.pn(),c,d,e;if(b.hasClass("focus_inside")&&(e=a.aG["filesview.filesview"],c=e.tools.dH())){c=c.dM;d=c.ir();a.bj.show(a.document.bH().getParent(),null,d.x+5,d.y+5,c,b);a._.activeElement=c;a._.oO=e.tools.oO();return}b=a.layout.pS();b.hasClass("focus_inside")&&(e=a.aG["foldertree.foldertree"],e=e.tools.ew)&&(c=e.dM,d=c.ir(),a.bj.show(a.document.bH().getParent(),
null,d.x+5,d.y+5,c,b),a._.activeElement=c,a._.oO=[])}})}});z.bj=m.createClass({$:function(a){this.id="cke_"+m.getNextNumber();this.app=a;this._.dF=[];this._.vx=m.addFunction(function(b){this._.panel.hide();a.focus&&a.focus()},this)},_:{onMenu:function(a,b,c,f,e,k){var g=this._.menu,h=this.app;g?(g.hide(),g.ih()):(g=this._.menu=new d.menu(h),g.onClick=m.bind(function(a){g.hide();y&&h.focus&&h.focus();if(a.onClick)a.onClick();else a.command&&h.execCommand(a.command)},this));g.onEscape=function(){h.focus&&
h.focus();e.focus&&e.focus();h._.activeElement=null};var l=this._.dF;g.onHide=m.bind(function(){g.onHide=null;this.onHide&&this.onHide()},this);for(var q=0;q<l.length;q++){var n=l[q];if(!n[1]||n[1].$==k.$)if(n=l[q][0](e))for(var r in n){var v=this.app.mh(r);v&&(v.bu=n[r],g.add(v))}}g.items.length&&g.show(a,b||("rtl"==h.lang.dir?2:1),c,f)}},ej:{lX:function(a,b){if(p.opera&&!("oncontextmenu"in document.body)){var c;a.on("mousedown",function(e){e=e.data;if(2!=e.$.button)e.db()==d.bP+1&&a.oW("contextmenu",
e);else if(!b||!e.$.ctrlKey&&!e.$.metaKey){var f=e.bK();c||(f=f.getDocument(),c=f.createElement("input"),c.$.type="button",f.bH().append(c));c.setAttribute("style","position:absolute;top:"+(e.$.clientY-2)+"px;left:"+(e.$.clientX-2)+"px;width:5px;height:5px;opacity:0.01")}});a.on("mouseup",function(b){c&&(c.remove(),c=void 0,a.oW("contextmenu",b.data))})}a.on("contextmenu",function(c){c=c.data;if(!(b&&(p.webkit?f:c.$.ctrlKey||c.$.metaKey))){c.preventDefault();var e=c.bK(),d=c.bK().getDocument().gT(),
l=c.$.clientX,q=c.$.clientY;m.setTimeout(function(){this._.onMenu(d,null,l,q,e,a)},0,this)}},this);if(p.opera)a.on("keypress",function(a){a=a.data;0===a.$.keyCode&&a.preventDefault()});if(p.webkit){var f,e=function(){f=0};a.on("keydown",function(a){f=a.data.$.ctrlKey||a.data.$.metaKey});a.on("keyup",e);a.on("contextmenu",e)}},kh:function(a,b){this._.dF.push([a,b])},show:function(a,b,c,f,e,k){this.app.focus();this._.onMenu(a||d.document.gT(),b,c||0,f||0,e,k)}}});(function(){function a(a){this.nK=this.kP=
this.jr=null;this.app=a}z.add("dragdrop",{bM:["foldertree","filesview","contextmenu","dialog"],readOnly:!1,gr:function(b){b.cK=new a(b);var c,f;b.on("themeSpace",function(a){"mainBottom"==a.data.space&&(a.data.html+='<div id="dragged_container" style="display: none; position: absolute;"></div>')});b.on("uiReady",function(a){b.document.on("dragstart",function(a){a.data.preventDefault(!0)});b.document.on("drag",function(a){a.data.preventDefault(!0)});b.aG["filesview.filesview"].gA("Draggable");b.aG["foldertree.foldertree"].ke("Droppable")});
d.aG.bX["filesview.filesview"].bh("Draggable",["mousedown"],function(a){var d=this,f=d.tools.bZ(a),h=d.tools.oO(!0);f&&a.data.ov()&&(a.data.preventDefault(),f.rowNode().hasClass("selected")||((a.data.$.ctrlKey||a.data.$.metaKey)&&b.config.selectMultiple?h.push(f):h=[f]),a=m.extend({},{file:f,files:h,step:1},!0),d.oW("beforeDraggable",a,function(a,e){function n(a){c.setStyles({left:a.data.$.clientX-("rtl"==b.lang.dir?c.hR("width"):-1)+"px",top:a.data.$.clientY+"px"});0===w&&(w=a.data.$.clientY+a.data.$.clientX);
if(!(m||20>Math.abs(a.data.$.clientY+a.data.$.clientX-w))){d.app.cK.kG(v);d.app.cK.kz(h);a=0;for(var f=h.length;a<f;a++)h[a].rowNode().addClass("dragged_source");1==h.length?(c.setStyle("width",v.rd("width")),c.addClass("file_entry")):c.addClass("drag_multiple");c.show();if(1==h.length)a=v.getHtml(),a=a.replace(/url\(&quot;(.+?)&quot;\);?"/,'url($1);"'),a=a.replace(/url\(([^'].+?[^'])\);?"/,"url('$1');\"");else{a=h;for(var f=!0,g=a[0].ext.toLowerCase(),l=1,r=a.length;l<r;l++)if(a[l].ext.toLowerCase()!=
g){f=!1;break}a='<div style="background-image: url('+(f?d.tools.oR(a[0],!0):d.app.fh+"images/icons/32/default.icon.gif")+')"><span>'+a.length+"</span></div>"}c.setHtml(a);m=1;d.app.document.bH().addClass("dragging");d.app.aG["foldertree.foldertree"].gA("Droppable");e.step=1;d.oW("successDraggable",e)}}function r(a){c.hide();c.removeClass("drag_multiple");c.removeClass("file_entry");c.setStyle("width","auto");c.setHtml("");for(var f=0,g=h.length;f<g;f++)h[f].rowNode().removeClass("dragged_source");
d.app.cK.kG(null);d.app.cK.kz(null);b.document.removeListener("mousemove",n);a?a.removeListener():b.document.removeListener("mouseup",r);d.app.aG["foldertree.foldertree"].ke("Droppable");d.app.document.bH().removeClass("dragging");e.step=2;d.oW("successDraggable",e);d.oW("afterDraggable",e)}if(!a){var v=f.rowNode(),w=0,m=0;c=c||b.document.getById("dragged_container");c.hide();b.document.on("mousemove",n);b.document.on("mouseup",r,999);var t=b.document.bH().$;b.document.on("mouseout",function(a){b.cK.qp()&&
a.data.bK().$==t&&r()})}}))});d.aG.bX["foldertree.foldertree"].bh("Droppable",["mouseup","mouseover","mouseout"],function(a){var c=a.data.bK(),g=this;a=a.name;g.app.cK.qp()&&!c.is("ul")&&(c=g.tools.cq(c))&&("mouseup"==a?(g.app.cK.iW(0),g.app.cK.nz(c),a=g.app.cK.pe(),c=m.extend({},{target:c,source:a},!0),g.oW("beforeDroppable",c,function(a,c){if(!a)try{var e=c.target,k=c.source,r=new d.iD(g.app,"copyFilesToFolderDrop",{label:g.app.lang.CopyDragDrop,bu:e!=k[0].folder&&e.acl.fileUpload?d.aS:d.aY,onClick:function(){g.oW("successDroppable",
{hH:k,hC:e,step:2});g.app.execCommand("copyFilesToFolder",{files:k,destination:e,callback:function(){g.oW("successDroppable",{hH:k,hC:e,step:3});g.oW("afterDroppable",c)},errorCallback:function(){g.oW("failedDroppable",c);g.oW("afterDroppable",c)}})}}),v=new d.iD(g.app,"moveFilesToFolderDrop",{label:g.app.lang.MoveDragDrop,bu:e!=k[0].folder&&e.acl.fileUpload&&k[0].folder.acl.fileDelete?d.aS:d.aY,onClick:function(){g.oW("successDroppable",{hH:k,hC:e,step:2});g.app.execCommand("moveFilesToFolder",{files:k,
destination:e,callback:function(){g.oW("successDroppable",{hH:k,hC:e,step:3});g.oW("afterDroppable",c)},errorCallback:function(){g.oW("failedDroppable",c);g.oW("afterDroppable",c)}})}}),r={copyFilesToFolder:r,moveFilesToFolder:v};g.oW("beforeDropMenu",{iG:r,folder:e});f||(f=new d.menu(g.app),f.onClick=m.bind(function(a){f.hide();if(a.onClick)a.onClick();else a.command&&b.execCommand(a.command)},this));f.ih();for(var w in r)r.hasOwnProperty(w)&&f.add(r[w]);f.items.length&&f.show(e.aNode(),"rtl"==b.lang.dir?
2:1,0,e.aNode().$.offsetHeight);g.oW("successDroppable",{hH:k,hC:e,step:1})}catch(D){throw D=d.ba(D),g.oW("failedDroppable",c),g.oW("afterDroppable",c),D;}})):"mouseover"==a?g.app.cK.fZ||g.app.cK.iW(c.liNode()):"mouseout"==a&&g.app.cK.fZ&&g.app.cK.iW(0))})}});a.prototype={iW:function(a){var c=!!a;c&&!this.fZ?(this.app.document.bH().addClass("drop_accepted"),a.addClass("drop_target")):!c&&this.fZ&&(this.app.document.bH().removeClass("drop_accepted"),this.fZ.removeClass("drop_target"));this.fZ=c?a:
null},kG:function(a){this.jr=a;this.jr instanceof A&&this.jr.focus()},vE:function(){return this.jr},kz:function(a){this.kP=a},pe:function(){return this.kP},qp:function(){return!!this.jr},nz:function(a){this.nK=a},oa:function(){return this.nK}}})();z.add("floatpanel",{bM:["panel"]});(function(){var a={},b=!1;u.pY=m.createClass({$:function(b,d,e,k){e.lE=!0;var g=d.getDocument();k=k||0;k=g.iY()+"-"+d.iY()+"-"+b.gd+"-"+b.lang.dir+(b.uiColor&&"-"+b.uiColor||"")+(e.css&&"-"+e.css||"")+(k&&"-"+k||"");var h=
a[k];h||(h=a[k]=new u.panel(g,e,b.gd),h.element=d.append(A.kE(h.nt(b),d.getDocument())),h.element.setStyles({display:"none",position:"absolute"}));k=h;var h=k.element,l=h.getFirst().getFirst();this.element=h;b.ia?b.ia.push(h):b.ia=[h];this._={panel:k,parentElement:d,dg:e,document:g,iframe:l,children:[],dir:b.lang.dir}},ej:{qq:function(a,b){return this._.panel.qq(a,b)},re:function(a,b){return this._.panel.re(a,b)},iv:function(a){return this._.panel.iv(a)},gf:function(a,f,e,k,g){var h=this._.panel,
l=h.gf(a);this.fj(!1);b=!0;var q=this.element,n=this._.iframe,r=this._.dg;a=f.ir(q.getDocument());var v="rtl"==this._.dir,w=a.x+(k||0),D=a.y+(g||0);!v||1!=e&&4!=e?v||2!=e&&3!=e||(w+=f.$.offsetWidth-1):w+=f.$.offsetWidth;if(3==e||4==e)D+=f.$.offsetHeight-1;this._.panel._.nr=f.dS();q.setStyles({top:D+"px",left:"-3000px",visibility:"hidden",opacity:"0",display:""});q.getFirst().removeStyle("width");if(!this._.qa){var t=y?n:new x.window(n.$.contentWindow);d.event.jP=!0;t.on("blur",function(a){if(!y||
this.fj())a=a.data.bK(),(a=a.getWindow&&a.getWindow())&&a.equals(t)||!this.visible||this._.gF||b||(p.webkit&&p.isMobile?m.setTimeout(function(){this.hide()},500,this):this.hide())},this);t.on("focus",function(){this._.lG=!0;this.gU();this.fj(!0)},this);d.event.jP=!1;this._.qa=1}h.onEscape=m.bind(function(){this.onEscape&&this.onEscape()},this);m.setTimeout(function(){v&&(w-=q.$.offsetWidth);q.setStyles({left:w+"px",visibility:"",opacity:"1"});var a=q.getFirst();l.oz?(a=function(){var a=q.getFirst(),
b=0,c=l.element.$;if(p.gecko||p.opera)c=c.parentNode;var e=c.scrollWidth;if(y&&10>p.version)for(var c=c.document.body,c=c.getElementsByTagName("a"),d=0;d<c.length;d++){var f=c[d].children[1],f=f.scrollWidth+f.offsetLeft-e;0<f&&f>b&&(b=f)}e+=b;y&&p.quirks&&0<e&&(e+=(a.$.offsetWidth||0)-(a.$.clientWidth||0));a.setStyle("width",e+4+"px");l.element.addClass("cke_frameLoaded");b=l.element.$.scrollHeight;y&&p.quirks&&0<b&&(b+=(a.$.offsetHeight||0)-(a.$.clientHeight||0));a.setStyle("height",b+"px");h._.iL.element.setStyle("display",
"none").removeStyle("display")},h.hm?a():h.onLoad=a):a.removeStyle("height");var b=h.element,c=b.getWindow(),a=c.hV(),c=c.eR(),e=b.$.offsetHeight,b=b.$.offsetWidth;if(v?0>w:w+b>c.width+a.x)w+=b*(v?1:-1);D+e>c.height+a.y&&(D-=e);q.setStyles({top:D+"px",left:w+"px",opacity:"1"});m.setTimeout(function(){if(r.ny&&p.gecko){var a=n.getParent();a.setAttribute("role","region");a.setAttribute("title",r.ny);n.setAttribute("role","region");n.setAttribute("title"," ")}y&&p.quirks?n.focus():n.$.contentWindow.focus();
y&&!p.quirks&&this.fj(!0)},0,this)},0,this);this.visible=1;this.onShow&&this.onShow.call(this);(p.ie7Compat||p.ie8&&p.ie6Compat)&&m.setTimeout(function(){this._.parentElement.$.style.cssText+=""},0,this);b=!1},hide:function(){!this.visible||this.onHide&&!0===this.onHide.call(this)||(this.gU(),this.element.setStyle("display","none"),this.visible=0)},fj:function(a){var b=this._.panel;void 0!=a&&(b.fj=a);return b.fj},rA:function(a,b,e,d,g,h){if(this._.gF!=a||a._.panel._.nr!=e.dS())this.gU(),a.onHide=
m.bind(function(){m.setTimeout(function(){this._.lG||this.hide()},0,this)},this),this._.gF=a,this._.lG=!1,a.gf(b,e,d,g,h),(p.ie7Compat||p.ie8&&p.ie6Compat)&&setTimeout(function(){a.element.getChild(0).$.style.cssText+=""},100)},gU:function(){var a=this._.gF;a&&(delete a.onHide,delete this._.gF,a.hide())}}})})();(function(){function a(){var a=d.aG.hS("formpanel","formpanel",{dc:null});a.dT.push(function(){m.mH(this.bn())});a.bh("UnloadForm",["submit","requestUnloadForm"],function(a){if("submit"!=a.name||
this.data().gM)a.result=this.oW("beforeUnloadForm",function(a,b){if(!a)try{this.bn().getParent().setStyle("display","none");this.app.layout.ea(!0);if(this.data().dc){var c=this.app.cS(this.data().dc);c&&c.bR(d.aS);this.data().dc=null}var e=this.tools.ij();e&&(e.mF(),e.remove());this.tools.releaseDomNodes();this.oW("successUnloadForm",b)}catch(f){throw this.oW("failedUnloadForm",b),this.oW("afterUnloadForm",b),d.ba(f);}})});a.bh("LoadForm",["requestLoadForm"],function(a){var b=this,c=m.extend({html:null,
dq:null,cC:null,cancelSubmit:1,gM:1,command:null},a.data,!0);a.result=this.oW("beforeLoadForm",c,function(a,c){if(!a){try{var e=this.bn();e.setHtml(c.html);e.getParent().removeStyle("display");this.app.layout.ea(!0);var g=this.tools.ij();if(g){if(c.dq)if(c.cC)for(var h in c.cC)g.on(c.cC[h],c.dq);else g.on("submit",c.dq);if(c.cancelSubmit)g.on("submit",f);var k=g.eG("input");for(h=0;h<k.count();h++)if("cancel"==k.getItem(h).getAttribute("name")){k.getItem(h).on("click",function(a){b.oW("requestUnloadForm");
a.removeListener()});break}if(c.cancelSubmit)g.on("submit",f)}this.data().gM=c.gM;if(c.command){var q=this.app.cS(c.command);q&&q.bR(d.eV);this.data().dc=c.command}this.oW("successLoadForm",c)}catch(m){throw this.oW("failedLoadForm",c),d.ba(m);}this.oW("afterLoadForm",c)}})});a.bh("FilesViewSettingsForm",["requestFilesViewSettingsForm"],function(a){a.result=this.oW("beforeFilesViewSettingsForm",{},function(a,e){if(!a)try{if("settings"==this.data().dc)this.oW("requestUnloadForm",function(){this.oW("successFilesViewSettingsForm",
e);this.oW("afterFilesViewSettingsForm",e)});else{this.data().dc&&this.oW("requestUnloadForm");var f=this.app.aG["filesview.filesview"].data(),g=c(this.app.lang,f.dA,f.display,f.cN);this.oW("requestLoadForm",{html:g,dq:m.bind(b,this),cC:["click","submit"],command:"settings"},function(){this.eh.addClass("show_border");this.app.cg.resizeFormPanel();this.oW("successFilesViewSettingsForm",e)})}}catch(h){throw this.oW("failedFilesViewSettingsForm",e),this.oW("afterFilesViewSettingsForm",e),d.ba(h);}})});
a.tools={ij:function(){if(void 0===this.iP&&this.ib.bn().$.childNodes.length){var a=k(this.ib.bn().$.childNodes,"form");this.iP=a?new A(a):null}return this.iP},releaseDomNodes:function(){delete this.iP}}}function b(a){if("submit"==a.name)a=this.app.aG["formpanel.formpanel"].data(),this.oW("requestUnloadForm"),this.oW("afterFilesViewSettingsForm",a);else{a=a.data.bK();var b=a.getAttribute("name"),c=a.getAttribute("value"),e=a.$.checked;"input"==a.getName()&&m.setTimeout(function(){var a=this.app.aG["filesview.filesview"],
d=a.data(),f={dA:d.dA,cN:d.cN,display:CKFinder.tools.clone(d.display)};if("sortby"==b)d.cN=c;else if("view_type"==b){d.dA=c;var g=this.app.document.getById("fs_display_filename");"list"==c?(d.display.filename=!0,g.$.checked=!0,g.$.disabled=!0):g.$.disabled=!1}else"display_filename"==b?"list"!=d.dA&&(d.display.filename=!!e):"display_date"==b?d.display.date=!!e:"display_filesize"==b?d.display.filesize=!!e:"display_resize"==b&&(d.display.resize=!!e);m.setCookie("CKFinder_Settings",("list"==d.dA?"L":
"T")+("size"==d.cN?"S":"date"==d.cN?"D":"extension"==d.cN?"E":"N")+(d.display.filename?"N":"_")+(d.display.date?"D":"_")+(d.display.filesize?"S":"_")+(d.display.resize?"R":"_"),!1);f.display.filename==d.display.filename&&f.display.date==d.display.date&&f.display.filesize==d.display.filesize&&f.display.resize==d.display.resize&&f.cN==d.cN&&f.dA==d.dA||a.oW("requestRenderFiles",{mj:a.app.lang.FilesEmpty,lastView:f})},0,this)}}function c(a,b,c,e){var d="",f="",k="",w="",m="",t="",p="",I="",N="",u="";
"list"==b?d='checked="checked"':f='checked="checked"';c.filename&&(k='checked="checked"');c.date&&(w='checked="checked"');c.filesize&&(m='checked="checked"');c.resize&&(u='checked="checked"');"date"==e?p='checked="checked"':"size"==e?I='checked="checked"':"extension"==e?N='checked="checked"':t='checked="checked"';return'<form id="files_settings" role="region" aria-controls="files_view" action="#" method="POST"><h2 role="heading">'+a.SetTitle+'</h2><table role="presentation"><tr><td><dl role="group" aria-labelledby="files_settings_type"><dt id="files_settings_type">'+
a.SetView+'</dt><dd><input type="radio" name="view_type" value="thumbnails" '+f+' id="fs_type_thumbnails" /> <label for="fs_type_thumbnails">'+a.SetViewThumb+'</label></dd><dd><input type="radio" name="view_type" value="list" '+d+' id="fs_type_details" /> <label for="fs_type_details">'+a.SetViewList+'</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_display"><dt id="files_settings_display">'+a.SetDisplay+'</dt><dd><input type="checkbox" name="display_filename" value="1" '+
k+(d?' disabled="true"':"")+' id="fs_display_filename" /> <label for="fs_display_filename">'+a.SetDisplayName+'</label></dd><dd><input type="checkbox" name="display_date" value="1" '+w+' id="fs_display_date" /> <label for="fs_display_date">'+a.SetDisplayDate+'</label></dd><dd><input type="checkbox" name="display_filesize" value="1" '+m+' id="fs_display_filesize" /> <label for="fs_display_filesize">'+a.SetDisplaySize+'</label></dd><dd><input type="checkbox" name="display_resize" value="1" '+u+' id="fs_display_resize" /> <label for="fs_display_resize">\u538b\u7f29</label></dd></dl></td><td><dl role="group" aria-labelledby="files_settings_sorting"><dt id="files_settings_sorting">'+
a.SetSort+'</dt><dd><input type="radio" name="sortby" value="filename" '+t+' id="fs_sortby_filename" /> <label for="fs_sortby_filename">'+a.SetSortName+'</label></dd><dd><input type="radio" name="sortby" value="date" '+p+' id="fs_sortby_date" /> <label for="fs_sortby_date">'+a.SetSortDate+'</label></dd><dd><input type="radio" name="sortby" value="size" '+I+' id="fs_sortby_size" /> <label for="fs_sortby_size">'+a.SetSortSize+'</label></dd><dd><input type="radio" name="sortby" value="extension" '+N+
' id="fs_sortby_extension" /> <label for="fs_sortby_extension">'+a.SetSortExtension+'</label></dd></dl></td></tr></table><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+a.CloseBtn+'" /></div></div></form>'}function f(a){a.data.preventDefault()}function e(a,b){for(var c in a)if(void 0!==b(a[c]))return a[c]}function k(a,b,c){return e(a,function(a){if(a.tagName&&a.tagName.toLowerCase()==b&&!c--)return a})}z.add("formpanel",{bM:["button"],onLoad:function(){a()},gr:function(a){var b=
this;a.on("themeSpace",function(a){"mainTop"==a.data.space&&(a.data.html+='<div id="panel_view" class="view" role="region" aria-live="polite" style="display: none;"><div id="panel_widget" class="panel_widget ib" tabindex="-1"></div></div>')});a.on("uiReady",function(c){c=a.document.getById("panel_view").getChild(0);d.aG.bz(a,"formpanel",b,c)});a.bD("settings",{exec:function(a){a.oW("requestFilesViewSettingsForm",null,function(){a.cS("settings").bu==d.eV&&setTimeout(function(){a.aG["formpanel.formpanel"].tools.ij().eG("input").getItem(0).focus()},
0)})}});a.bD("refresh",{exec:function(a){var b=a.aV;b&&a.oW("requestShowFolderFiles",{folder:b},function(){setTimeout(function(){a.aG["filesview.filesview"].bn().focus()},0)})}});a.bY.add("Settings",d.UI_BUTTON,{label:a.lang.Settings,command:"settings"});a.bY.add("Refresh",d.UI_BUTTON,{label:a.lang.Refresh,command:"refresh"});a.cS("refresh").bR(d.aY)}})})();z.add("keystrokes",{eK:function(a){a.dJ=new d.dJ(a);a.oX={}},bz:function(a){var b=a.config.keystrokes,c=a.config.gN,d=a.dJ.keystrokes;a=a.dJ.gN;
for(var e=0;e<b.length;e++)d[b[e][0]]=b[e][1];for(e=0;e<c.length;e++)a[c[e]]=1}});d.dJ=function(a){if(a.dJ)return a.dJ;this.keystrokes={};this.gN={};this._={app:a};return this};(function(){var a,b=function(b){b=b.data;var c=b.db(),d=this.keystrokes[c],g=this._.app;a=!0===g.oW("iK",{keyCode:c});a||(d&&(a=!1!==g.execCommand(d,{gJ:"dJ"})),a||(a=(d=g.oX[c])&&!0===d(g))||(a=!!this.gN[c]));a&&b.preventDefault(!0);return!a},c=function(b){a&&(a=!1,b.data.preventDefault(!0))};d.dJ.prototype={oA:function(a){a.on("keydown",
b,this);if(p.opera||p.gecko&&p.mac)a.on("keypress",c,this)}}})();J.gN=[];J.keystrokes=[[d.eJ+119,"foldertreeFocus"],[d.eJ+120,"filesviewFocus"],[d.eJ+121,"hW"],[d.eJ+85,"upload"],[d.dy+121,"bj"],[d.bP+d.dy+121,"bj"]];z.add("menu",{eK:function(a){for(var b=a.config.nj.split(","),c={},d=0;d<b.length;d++)c[b[d]]=d+1;a._.iA=c;a._.iG={}},bM:["floatpanel"]});m.extend(d.application.prototype,{dZ:function(a,b){this._.iA[a]=b||100},gp:function(a,b){this._.iA[b.group]&&(this._.iG[a]=new d.iD(this,a,b))},eU:function(a){for(var b in a)this.gp(b,
a[b])},mh:function(a){return this._.iG[a]}});(function(){function a(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.fE<b.fE?-1:a.fE>b.fE?1:0})}d.menu=m.createClass({$:function(a,c){this.id="cke_"+m.getNextNumber();this.app=a;this.items=[];this._.hx=c||1},_:{jK:function(a){var c=this._.oM,f=this.items[a];if(f=f.hQ&&f.hQ()){c?c.ih():(c=this._.oM=new d.menu(this.app,this._.hx+1),c.parent=this,c.onClick=m.bind(this.onClick,this));for(var e in f)c.add(this.app.mh(e));a=this._.panel.iv(this.id).element.getDocument().getById(this.id+
String(a));c.show(a,2)}else this._.panel.gU()}},ej:{add:function(a){a.fE||(a.fE=this.items.length);this.items.push(a)},ih:function(){this.items=[]},show:function(b,c,f,e){var k=this.items,g=this.app,h=this._.panel,l=this._.element;if(!h){h=this._.panel=new u.pY(this.app,this.app.document.bH(),{css:[],hx:this._.hx-1,className:g.iy+" cke_contextmenu"},this._.hx);h.onEscape=m.bind(function(){this.onEscape&&this.onEscape();this.hide()},this);h.onHide=m.bind(function(){this.onHide&&this.onHide()},this);
l=h.qq(this.id);l.oz=!0;var q=l.jQ;q[40]="next";q[9]="next";q[38]="prev";q[d.dy+9]="prev";q[32]="click";q[39]="click";l=this._.element=l.element;l.addClass(g.iy);q=l.getDocument();q.bH().setStyle("overflow","hidden");q.eG("html").getItem(0).setStyle("overflow","hidden");this._.qz=m.addFunction(function(a){clearTimeout(this._.jI);this._.jI=m.setTimeout(this._.jK,g.config.ob,this,[a])},this);this._.qm=m.addFunction(function(a){clearTimeout(this._.jI)},this);this._.ql=m.addFunction(function(a){var b=
this.items[a];b.bu==d.aY?this.hide():b.hQ?this._.jK(a):this.onClick&&this.onClick(b)},this)}a(k);for(var q=['<div class="cke_menu">'],n=k.length,r=n&&k[0].group,v=0;v<n;v++){var w=k[v];r!=w.group&&(q.push('<div class="cke_menuseparator"></div>'),r=w.group);w.er(this,v,q)}q.push("</div>");l.setHtml(q.join(""));this.parent?this.parent._.panel.rA(h,this.id,b,c,f,e):h.gf(this.id,b,c,f,e);g.oW("menuShow",[h])},hide:function(){this._.panel&&this._.panel.hide()}}})})();d.iD=m.createClass({$:function(a,b,
c){m.extend(this,c,{fE:0,className:"cke_button_"+b});this.group=a._.iA[this.group];this.app=a;this.name=b},ej:{er:function(a,b,c){var f=a.id+String(b),e="undefined"==typeof this.bu?d.aS:this.bu,k=" cke_"+(e==d.eV?"on":e==d.aY?"disabled":"off"),g=this.label;e==d.aY&&(g=this.app.lang.common.unavailable.replace("%1",g));this.className&&(k+=" "+this.className);var h=this.hQ;c.push('<span class="cke_menuitem"><a id="',f,'" class="',k,'" href="javascript:void(\'',(this.label||"").replace("'",""),'\')" title="',
this.label,'" tabindex="-1"_cke_focus=1 hidefocus="true" role="menuitem"'+(h?'aria-haspopup="true"':"")+(e==d.aY?'aria-disabled="true"':"")+(e==d.eV?'aria-pressed="true"':""));(p.opera||p.gecko&&p.mac)&&c.push(' onkeypress="return false;"');p.gecko&&c.push(' onblur="this.style.cssText = this.style.cssText;"');f=-16*(this.rD||0);c.push(' onmouseover="CKFinder.tools.callFunction(',a._.qz,",",b,');" onmouseout="CKFinder.tools.callFunction(',a._.qm,",",b,');" onclick="CKFinder.tools.callFunction(',a._.ql,
",",b,'); return false;"><span class="cke_icon_wrapper"><span class="cke_icon"'+(this.icon?' style="background-image:url('+d.getUrl(this.icon)+");background-position:0 "+f+'px;"':"")+'></span></span><span class="cke_label">');this.hQ&&c.push('<span class="cke_menuarrow"></span>');c.push(g,"</span></a></span>")}}});J.ob=400;J.nj="";(function(){function a(a){p.opera&&a.setStyle("overflow","hidden");a.on("touchstart",function(b){b=b.data.$.touches[0];a.interval&&(window.clearInterval(a.interval),delete a.interval);
a.lL=a.$.scrollTop;a.nx=a.$.scrollLeft;a.mP=b.pageY;a.na=b.pageX;a.mO=new Date});a.on("touchmove",function(d){d=d.data;var e=d.$.touches[0];b(a,e.pageX,e.pageY)&&d.preventDefault()});a.on("touchend",function(d){var e=d.data;d=e.$.changedTouches[0];if(b(a,d.pageX,d.pageY)){e.preventDefault();var e=(new Date-a.mO)/100,k=d.pageY-a.mP;a.mK=(d.pageX-a.na)/e;a.nu=k/e;a.jy=d.pageX;a.mv=d.pageY;a.nf=0;a.interval=window.setInterval(function(){var e=Math.cos(a.nf/7*Math.PI/2);a.jy+=a.mK*e;a.mv+=a.nu*e;if(7<
a.nf++||!b(a,a.jy,a.mv))window.clearInterval(a.interval),delete a.interval},100)}})}function b(a,b,e){b=Math.round(b-a.na);e=Math.round(e-a.mP);var d=a.nx-b,g=a.lL-e;if(a.$.scrollLeft==d&&a.$.scrollTop==g)return!1;a.$.scrollLeft=d;a.$.scrollTop=g;return Math.abs(b)>Math.abs(e)?a.$.scrollLeft==d:a.$.scrollTop==g}z.add("mobile",{bM:["foldertree","filesview"],bz:function(b){var d="ontouchstart"in window;if(p.isMobile||d)if(b.config.showContextMenuArrow=!0,p.isMobile)b.on("uiReady",function(e){if(p.webkit&&
534>p.version||p.opera)a(b.layout.pS()),a(b.layout.pn());b.hs=function(a,b,c,e){a=window.prompt(b,c);null!==a&&e(a)};b.msgDialog=function(a,b,c){window.alert(b);c&&c()};b.fe=function(a,b,c){window.confirm(b)&&c()}},null,null,20)}})})();z.add("panel",{eK:function(a){a.bY.kd(d.UI_PANEL,u.panel.dq)}});d.UI_PANEL=2;u.panel=function(a,b,c){b&&m.extend(this,b);m.extend(this,{className:""});m.extend(this.css,[d.basePath+"skins/"+c+"/uipanel.css"]);this.id=m.getNextNumber();this.document=a;this._={iq:{}}};
u.panel.dq={create:function(a){return new u.panel(a)}};u.panel.prototype={nt:function(a){var b=[];this.er(a,b);return b.join("")},er:function(a,b){var c="cke_"+this.id;b.push('<div class="',a.iy,' cke_compatibility" lang="',a.langCode,'" role="presentation" style="display:none;z-index:'+(a.config.baseFloatZIndex+1)+'"><div id="',c,'"',' dir="',a.lang.dir,'"',' role="presentation" class="cke_panel cke_',a.lang.dir);this.className&&b.push(" ",this.className);b.push('">');if(this.lE||this.css.length){b.push('<iframe id="',
c,'_frame" frameborder="0" src="');var d="document.open();"+(p.isCustomDomain()?'document.domain="'+window.document.domain+'";':"")+"document.close();";b.push(y?"javascript:void(function(){"+encodeURIComponent(d)+"}())":"");b.push('"></iframe>')}b.push("</div></div>");return c},oU:function(){var a=this._.rE;if(!a){if(this.lE||this.css.length){var b=this.document.getById("cke_"+this.id+"_frame"),c=b.getParent(),a=c.getAttribute("dir"),d=c.getParent().getAttribute("class").split(" ")[0],c=c.getParent().getAttribute("lang"),
b=b.getFrameDocument();b.$.open();p.isCustomDomain()&&(b.$.domain=document.domain);var e=m.addFunction(m.bind(function(a){this.hm=!0;if(this.onLoad)this.onLoad()},this)),k=b.getWindow();k.$.CKFinder=CKFinder;var g=p.cssClass.replace(/browser_quirks|browser_iequirks/g,"");b.$.write("<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'><html dir=\""+a+'" class="'+d+'_container" lang="'+c+'"><head><style>.'+d+'_container{visibility:hidden}</style></head><body class="cke_'+
a+" cke_panel_frame "+g+' cke_compatibility" style="margin:0;padding:0" onload="var ckfinder = window.CKFinder || window.parent.CKFinder; ckfinder && ckfinder.tools.callFunction('+e+');"></body><link type="text/css" rel=stylesheet href="'+this.css.join('"><link type="text/css" rel="stylesheet" href="')+'"></html>');b.$.close();k.$.CKFinder=CKFinder;b.on("keydown",function(a){var b=a.data.db();this._.onKeyDown&&!1===this._.onKeyDown(b)?a.data.preventDefault():27==b&&this.onEscape&&this.onEscape()},
this);a=b.bH()}else a=this.document.getById("cke_"+this.id);this._.rE=a}return a},qq:function(a,b){b=this._.iq[a]=b||new u.panel.block(this.oU());this._.iL||this.gf(a);return b},iv:function(a){return this._.iq[a]},gf:function(a){a=this._.iq[a];var b=this._.iL;b&&b.hide();this._.iL=a;a._.cQ=-1;this._.onKeyDown=a.onKeyDown&&m.bind(a.onKeyDown,a);a.show();return a}};u.panel.block=m.createClass({$:function(a){this.element=a.append(a.getDocument().createElement("div",{attributes:{"class":"cke_panel_block",
role:"presentation"},gS:{display:"none"}}));this.jQ={};this._.cQ=-1;this.element.hX()},_:{},ej:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&!0===this.onHide.call(this)||this.element.setStyle("display","none")},onKeyDown:function(a){switch(this.jQ[a]){case "next":a=this._.cQ;for(var b=this.element.eG("a"),c;c=b.getItem(++a);)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.cQ=a;c.focus();break}return!1;case "prev":a=this._.cQ;for(b=this.element.eG("a");0<
a&&(c=b.getItem(--a));)if(c.getAttribute("_cke_focus")&&c.$.offsetWidth){this._.cQ=a;c.focus();break}return!1;case "click":return a=this._.cQ,(c=0<=a&&this.element.eG("a").getItem(a))&&(c.$.click?c.$.click():c.$.onclick()),!1}return!0}}});z.add("resize",{bz:function(a){var b=a.config;if(b.nB)a.on("uiReady",function(){function c(c){a.document.bH().addClass("during_sidebar_resize");a.nJ(Math.max(b.nN,Math.min(g.width+(c.data.$.screenX-k.x)*("rtl"==a.lang.dir?-1:1),b.nC)))}function f(b){a.document.bH().removeClass("during_sidebar_resize");
d.document.removeListener("mousemove",c);d.document.removeListener("mouseup",f);a.document&&(a.document.removeListener("mousemove",c),a.document.removeListener("mouseup",f))}var e=null,k,g;a.layout.dV().on("mousedown",function(b){e||(e=a.layout.dV());b.data.bK().$==e.$&&(g={width:e.$.offsetWidth||0},k={x:b.data.$.screenX},d.document.on("mousemove",c),d.document.on("mouseup",f),a.document&&(a.document.on("mousemove",c),a.document.on("mouseup",f)))})})}});J.nN=120;J.nC=500;J.nB=!0;(function(){function a(){var a=
d.aG.hS("status","status");a.bh("ShowFileInfo",["requestShowFileInfo"],function(a){a.result=this.oW("beforeShowFileInfo",a.data,function(a,b){if(!a){var c=b.file;try{var g=c?"<p>"+c.name+" ("+m.formatSize(c.size,this.app.lang,!0)+", "+c.dateF+")</p>":"";this.bn().setHtml(g);this.oW("successShowFileInfo",b)}catch(h){throw this.oW("failedShowFileInfo",b),d.ba(h);}this.oW("afterShowFileInfo",b)}})});a.bh("ShowFolderInfo",["requestShowFolderInfo"],function(a){a.result=this.oW("beforeShowFolderInfo",a.data,
function(b,e){if(!b){try{var k,g=a.data.ib.data().files.length,h=this.app.lang,l;l=0===g?h.FilesCountEmpty:1==g?h.FilesCountOne:h.FilesCountMany.replace("%1",g);k="<p>"+m.htmlEncode(l)+"</p>";this.bn().setHtml(k);this.oW("successShowFolderInfo",e)}catch(q){throw this.oW("failedShowFolderInfo",e),d.ba(q);}this.oW("afterShowFolderInfo",e)}})})}z.add("status",{bM:["filesview"],onLoad:function(){a()},gr:function(a){var c=this;a.on("themeSpace",function(a){"mainBottom"==a.data.space&&(a.data.html+='<div id="status_view" class="view" role="status"></div>')});
a.on("uiReady",function(f){f=a.document.getById("status_view");var e=a.aG["filesview.filesview"],k=d.aG.bz(a,"status",c,f,{parent:e});e.app==a&&(e.on("successSelectFile",function(a){k.oW("requestShowFileInfo",a.data)}),e.on("successShowFolderFiles",function(a){a.data.ib=this;k.oW("requestShowFolderInfo",a.data)}));a.on("afterCommandExecDefered",function(a){"RemoveFile"==a.data.name&&k.oW("requestShowFolderInfo",{folder:a.data.folder,ib:e})});k.on("afterShowFileInfo",function(a){this.bn().getText()||
k.oW("requestShowFolderInfo",{ib:e,folder:e.data().folder})})})}})})();(function(){var a=function(){this.fk=[];this.pZ=!1};a.prototype.focus=function(){for(var a=0,b;b=this.fk[a++];)for(var e=0,d;d=b.items[e++];)if(d.focus){d.focus();return}};var b={iH:{qt:1,source:1},exec:function(a){a.dh&&(a.dh.pZ=!0,y?setTimeout(function(){a.dh.focus()},100):a.dh.focus())}};z.add("toolbar",{bM:["formpanel"],bz:function(c){var d=function(a,b){switch(b){case "rtl"==c.lang.dir?37:39:for(;(a=a.next||a.toolbar.next&&
a.toolbar.next.items[0])&&!a.focus;);a?a.focus():c.dh.focus();return!1;case "rtl"==c.lang.dir?39:37:for(;(a=a.previous||a.toolbar.previous&&a.toolbar.previous.items[a.toolbar.previous.items.length-1])&&!a.focus;);if(a)a.focus();else{var d=c.dh.fk[c.dh.fk.length-1].items;d[d.length-1].focus()}return!1;case 27:return c.focus(),!1;case 13:case 32:return a.lc(),!1}return!0};c.on("themeSpace",function(b){if("mainTop"==b.data.space){c.dh=new a;var k="cke_"+m.getNextNumber(),g=['<div id="toolbar_view" class="view"><div class="cke_toolbox cke_compatibility" role="toolbar" aria-labelledby="',
k,'"'],h;g.push(">");g.push('<span id="',k,'" class="cke_voice_label">',c.lang.toolbar,"</span>");for(var k=c.dh.fk,l=c.config.toolbar instanceof Array?c.config.toolbar:c.config["toolbar_"+c.config.toolbar],q=0;q<l.length;q++){var n=l[q];if(n){var r="cke_"+m.getNextNumber(),v={id:r,items:[]};h&&(g.push("</div>"),h=0);if("/"===n)g.push('<div class="cke_break"></div>');else{g.push('<span id="',r,'" class="cke_toolbar" role="presentation"><span class="cke_toolbar_start"></span>');var w=k.push(v)-1;0<
w&&(v.previous=k[w-1],v.previous.next=v);for(r=0;r<n.length;r++)if(w=n[r],w="-"==w?u.separator:c.bY.create(w)){w.canGroup?h||(g.push('<span class="cke_toolgroup">'),h=1):h&&(g.push("</span>"),h=0);var D=w.er(c,g),w=v.items.push(D)-1;0<w&&(D.previous=v.items[w-1],D.previous.next=D);D.toolbar=v;D.onkey=d}h&&(g.push("</span>"),h=0);g.push('<span class="cke_toolbar_end"></span></span>')}}}g.push("</div></div>");b.data.html+=g.join("")}});c.bD("hW",b)}})})();u.separator={er:function(a,b){b.push('<span class="cke_separator"></span>');
return{}}};J.toolbar_Basic=[["Upload","Refresh"]];J.toolbar_Full=[["Upload","Refresh","Settings","Maximize","Help"]];J.toolbar="Full";(function(){z.add("tools",{eK:function(a){this.app=a},addTool:function(a,b){var c="tool_"+m.getNextNumber();a=b?'<div id="'+c+'" class="view tool_panel" tabindex="0" style="display: none;">'+a+"</div>":'<div id="'+c+'" class="tool" style="display: none;">'+a+"</div>";this.app.layout.dV().getChild(0).appendHtml(a);return c},addToolPanel:function(a){a=this.addTool(a||
"",1);var b=this.app.layout.dV().getChild(0).dB();m.mH(b);return a},hideTool:function(a){this.app.document.getById(a).setStyle("display","none");this.app.layout.ea(!0)},showTool:function(a){this.app.document.getById(a).removeStyle("display");this.app.layout.ea(!0)},removeTool:function(a){this.hideTool(a);this.app.document.getById(a).remove()}})})();(function(){function a(){function a(b,c){var f=this;f.data();var h=1,l=this.tools.qO(),l=l&&l.$.value;if(!l.length)return b.data.preventDefault(!0),this.oW("failedUploadFileForm"),
this.oW("afterUploadFileForm"),!1;(l=l.match(/\.([^\.]+)\s*$/)[1])&&c.getResourceType().isExtensionAllowed(l)?h=0:(b.data.preventDefault(),f.app.msgDialog("",f.app.lang.UploadExtIncorrect));if(h)return b.data.preventDefault(!0),this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm"),!1;var q=f.app.document.getWindow().$;q.OnUploadCompleted=function(a,b){var d={step:3,filename:a,folder:c};if(b&&!a){f.app.msgDialog("",b);var e=f.tools.qB();e.setStyle("display","none");e.getChild(1).setText("");
e.getChild(2).setText("");f.oW("failedUploadFileForm",d)}else b&&f.app.msgDialog("",b),f.app.aV==c&&f.app.oW("requestShowFolderFiles",{folder:c,mw:a}),f.oW("requestUnloadForm"),f.oW("successUploadFileForm",d);f.oW("afterUploadFileForm",d);try{delete q.OnUploadCompleted}catch(h){q.OnUploadCompleted=void 0}};d.log("[UPLOADFORM] Starting IFRAME file upload.");this.oW("successUploadFileForm",{step:2});return!0}function c(a,b,c){return'<form enctype="multipart/form-data" id="upload_form" role="region" action="'+
c+'" method="POST" target="'+b+'"><h2 role="heading">'+a.lang.UploadTitle+'</h2><p><input type="file" name="upload" /></p><div class="buttons_wrapper"><div class="buttons"><input type="submit" value="'+a.lang.UploadBtn+'" /><input type="button" name="cancel" value="'+a.lang.UploadBtnCancel+'" /></div></div></form>'}var f=d.aG.bX["formpanel.formpanel"];f&&(f.bh("UploadFileForm",["requestUploadFileForm"],function(e){var f=this;this.oW("beforeUploadFileForm",{folder:this.app.aV,step:1},function(e,h){if(!(e||
0<d.bF.length&&-1!="RMRHY5Q4S,GGYXTSBLA,QS8F4ZFUJ".indexOf(d.bF.substr(0,9)))){var l=this.data(),q=h.folder,n=0;q||(this.app.msgDialog("",this.app.lang.UploadNoFolder),n=1);n||q.acl.fileUpload||(this.app.msgDialog("",this.app.lang.UploadNoPerms),n=1);n?(this.oW("failedUploadFileForm"),this.oW("afterUploadFileForm")):this.oW("beforeUploadFileForm",{folder:q,step:2},function(e,g){try{if("upload"==l.dc)this.oW("requestUnloadForm",function(){this.app.cS("upload").bR(d.aS);this.oW("successUploadFileForm",
g);this.oW("afterUploadFileForm",g)});else{var h=function(a){if(a.data.folder&&a.data.folder.acl.fileUpload){var b=f.tools.qO();f.oW("requestUnloadForm");f.oW("requestUploadFileForm",function(){var a=f.tools.qO();b.kB(a);a.remove();delete f.tools.jj})}};l.dc&&this.oW("requestUnloadForm");var n=this.tools.qL(),t=this.app.connector.composeUrl("FileUpload",{},q.type,q),p=c(this.app,n.$.id,t),I=this;this.oW("requestLoadForm",{html:p,dq:m.bind(function(c){return a.call(I,c,q)}),cC:["submit"],cancelSubmit:0,
gM:0,command:"upload"},function(){this.eh.addClass("show_border");g.step=1;this.oW("successUploadFileForm",g)});var N=this.app.aG["filesview.filesview"];N.on("successShowFolderFiles",h);this.on("requestUnloadForm",function(a){a.removeListener();N.removeListener("successShowFolderFiles",h)})}}catch(u){throw this.oW("failedUploadFileForm",g),this.oW("afterUploadFileForm",g),d.ba(u);}})}})}),f.tools.releaseDomNodes=m.override(f.tools.releaseDomNodes,function(a){return function(){a.apply(this,arguments);
delete this.jj;delete this.jc;void 0!==this.gq&&(this.gq.remove(),delete this.gq)}}),f.tools.qB=function(){void 0===this.jc&&(this.jc=this.ib.bn().getChild([0,2]));return this.jc},f.tools.qO=function(){void 0===this.jj&&(this.jj=this.ib.bn().getChild([0,1,0]));return this.jj},f.tools.qL=function(){if(void 0===this.gq){var a=p.isCustomDomain(),b="ckf_"+m.getNextNumber(),a='<iframe id="'+b+'" name="'+b+'" style="display:none" frameBorder="0"'+(a?" src=\"javascript:void((function(){document.open();document.domain='"+
document.domain+"';document.close();})())\"":"")+' tabIndex="-1" allowTransparency="true"></iframe>',b=this.ib.app.document.bH();b.appendHtml(a);this.gq=b.dB()}return this.gq})}z.add("uploadform",{bM:["formpanel","button"],readOnly:!1,md:function(){if(!p.webkit)return!0;var a=document.createElement("input");a.setAttribute("type","file");return!1===a.disabled},onLoad:function(){this.md()&&a()},gr:function(a){this.md()&&(a.bD("upload",{exec:function(a){a.oW("requestUploadFileForm",null,function(){a.cS("upload").bu==
d.eV&&setTimeout(function(){var b=a.aG["formpanel.formpanel"].tools.ij();if(b){var d=b.eG("input").getItem(0);d.on("change",function(){if(d.getValue())for(var a=0;a<b.$.elements.length;a++){var c=b.$.elements[a];"INPUT"==c.nodeName&&"submit"==c.type&&c.click()}});d.$.click?d.$.click():d.focus()}},0)})}}),a.bY.add("Upload",d.UI_BUTTON,{label:a.lang.Upload,command:"upload"}),a.on("appReady",function(c){a.aG["filesview.filesview"].on("successShowFolderFiles",function(c){var e=this.tools.currentFolder();
c=this.app.cS("upload");e&&e.acl.fileUpload?c.bu==d.aY&&c.bR(d.aS):(e=a.aG["formpanel.formpanel"],"upload"==e.data().dc&&e.oW("requestUnloadForm"),c.bR(d.aY))})}))}})})();(function(){function a(a,c){function d(){if(!R){try{var a=E.getElementsByTagName("body")[0].appendChild(E.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var a=H.length,c=0;c<a;c++)H[c]()}}function e(a){R?a():H[H.length]=a}function k(a){if("undefined"!=typeof y.addEventListener)y.addEventListener("load",
a,!1);else if("undefined"!=typeof E.addEventListener)E.addEventListener("load",a,!1);else if("undefined"!=typeof y.attachEvent)p(y,"onload",a);else if("function"==typeof y.onload){var b=y.onload;y.onload=function(){b();a()}}else y.onload=a}function g(){var a=E.getElementsByTagName("body")[0],b=E.createElement("object");b.setAttribute("type","application/x-shockwave-flash");var c=a.appendChild(b);if(c){var d=0;(function(){if("undefined"!=typeof c.GetVariable){var e=c.GetVariable("$version");e&&(e=
e.split(" ")[1].split(","),C.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;h()})()}else h()}function h(){var a=G.length;if(0<a)for(var b=0;b<a;b++){var c=G[b].id,d=G[b].callbackFn,e={success:!1,id:c};if(0<C.pv[0]){var f=t(c);if(f)if(!I(G[b].swfVersion)||C.wk&&312>C.wk)if(G[b].ln&&q()){e={};e.data=G[b].ln;e.width=f.getAttribute("width")||"0";e.height=f.getAttribute("height")||"0";f.getAttribute("class")&&
(e.styleclass=f.getAttribute("class"));f.getAttribute("align")&&(e.align=f.getAttribute("align"));for(var g={},f=f.getElementsByTagName("param"),h=f.length,k=0;k<h;k++)"movie"!=f[k].getAttribute("name").toLowerCase()&&(g[f[k].getAttribute("name")]=f[k].getAttribute("value"));n(e,g,c,d)}else r(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=l(c),d(e))}else u(c,!0),d&&((c=l(c))&&"undefined"!=typeof c.SetVariable&&(e.success=!0,e.ref=c),d(e))}}function l(a){var b=null;(a=t(a))&&"OBJECT"==a.nodeName&&
("undefined"!=typeof a.SetVariable?b=a:(a=a.getElementsByTagName("object")[0])&&(b=a));return b}function q(){return!U&&I("6.0.65")&&(C.win||C.mac)&&!(C.wk&&312>C.wk)}function n(a,b,c,d){U=!0;V=d||null;X={success:!1,id:c};var e=t(c);if(e){"OBJECT"==e.nodeName?(M=v(e),T=null):(M=e,T=c);a.id="SWFObjectExprInst";if("undefined"==typeof a.width||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if("undefined"==typeof a.height||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";E.title=
E.title.slice(0,47)+" - Flash Player Installation";d=C.ie&&C.win?"ActiveX":"PlugIn";d="MMredirectURL="+y.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+E.title;b.flashvars="undefined"!=typeof b.flashvars?b.flashvars+("&"+d):d;C.ie&&C.win&&4!=e.readyState&&(d=E.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());w(a,b,
c)}}function r(a){if(C.ie&&C.win&&4!=a.readyState){var b=E.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(v(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(v(a),a)}function v(a){var b=E.createElement("div");if(C.win&&C.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName("object")[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)1==a[d].nodeType&&"PARAM"==
a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}function w(a,b,c){var d,e=t(c);if(C.wk&&312>C.wk)return d;if(e)if("undefined"==typeof a.id&&(a.id=c),C.ie&&C.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+
f+">"+g+"</object>";S[S.length]=a.id;d=t(a.id)}else{h=E.createElement("object");h.setAttribute("type","application/x-shockwave-flash");for(var l in a)a[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?h.setAttribute("class",a[l]):"classid"!=l.toLowerCase()&&h.setAttribute(l,a[l]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,l=b[f],c=E.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",l),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}
function m(a){var b=t(a);b&&"OBJECT"==b.nodeName&&(C.ie&&C.win?(b.style.display="none",function(){if(4==b.readyState){var c=t(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function t(a){var b=null;try{b=E.getElementById(a)}catch(c){}return b}function p(a,b,c){a.attachEvent(b,c);K[K.length]=[a,b,c]}function I(a){var b=C.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;
a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function N(a,b,c,d){if(!C.ie||!C.mac){var e=E.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(B=P=null),P&&B==c||(d=E.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),P=e.appendChild(d),C.ie&&C.win&&"undefined"!=typeof E.styleSheets&&0<E.styleSheets.length&&(P=E.styleSheets[E.styleSheets.length-1]),B=c),C.ie&&C.win?P&&"object"==typeof P.addRule&&
P.addRule(a,b):P&&"undefined"!=typeof E.createTextNode&&P.appendChild(E.createTextNode(a+" {"+b+"}")))}}function u(a,b){if(Y){var c=b?"visible":"hidden";R&&t(a)?t(a).style.visibility=c:N("#"+a,"visibility:"+c)}}function x(a){return null!=/[\\\"<>\.;]/.exec(a)&&"undefined"!=typeof encodeURIComponent?encodeURIComponent(a):a}var y=a,E=c,A=navigator,z=!1,H=[function(){z?g():h()}],G=[],S=[],K=[],M,T,V,X,R=!1,U=!1,P,B,Y=!0,C=function(){var a="undefined"!=typeof E.getElementById&&"undefined"!=typeof E.getElementsByTagName&&
"undefined"!=typeof E.createElement,b=A.userAgent.toLowerCase(),c=A.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if("undefined"!=typeof A.plugins&&"object"==typeof A.plugins["Shockwave Flash"])!(g=A.plugins["Shockwave Flash"].description)||"undefined"!=typeof A.mimeTypes&&A.mimeTypes["application/x-shockwave-flash"]&&!A.mimeTypes["application/x-shockwave-flash"].enabledPlugin||
(z=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if("undefined"!=typeof y.ActiveXObject)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"))&&(e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}catch(l){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();
(function(){C.w3&&(("undefined"!=typeof E.readyState&&"complete"==E.readyState||"undefined"==typeof E.readyState&&(E.getElementsByTagName("body")[0]||E.body))&&d(),R||("undefined"!=typeof E.addEventListener&&E.addEventListener("DOMContentLoaded",d,!1),C.ie&&C.win&&(E.attachEvent("onreadystatechange",function(){"complete"==E.readyState&&(E.detachEvent("onreadystatechange",arguments.callee),d())}),y==top&&function(){if(!R){try{E.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,
0);return}d()}}()),C.wk&&function(){R||(/loaded|complete/.test(E.readyState)?d():setTimeout(arguments.callee,0))}(),k(d)))})();setTimeout(function(){d()},100);(function(){C.ie&&C.win&&a.attachEvent("onunload",function(){for(var a=K.length,b=0;b<a;b++)K[b][0].detachEvent(K[b][1],K[b][2]);a=S.length;for(b=0;b<a;b++)m(S[b]);for(var c in C)C[c]=null;C=null;if("undefined"!=typeof swfobject){for(var d in swfobject)swfobject[d]=null;swfobject=null}})})();return{gH:function(a,b,c,d){if(C.w3&&a&&b){var e=
{};e.id=a;e.swfVersion=b;e.ln=c;e.callbackFn=d;G[G.length]=e;u(a,!1)}else d&&d({success:!1,id:a})},lp:function(a){if(C.w3)return l(a)},embedSWF:function(a,b,c,d,f,g,h,l,k,H){var r={success:!1,id:b};C.w3&&!(C.wk&&312>C.wk)&&a&&b&&c&&d&&f?(u(b,!1),e(function(){c+="";d+="";var e={};if(k&&"object"===typeof k)for(var v in k)e[v]=k[v];e.data=a;e.width=c;e.height=d;v={};if(l&&"object"===typeof l)for(var G in l)v[G]=l[G];if(h&&"object"===typeof h)for(var m in h)v.flashvars="undefined"!=typeof v.flashvars?
v.flashvars+("&"+m+"="+h[m]):m+"="+h[m];if(I(f))G=w(e,v,b),e.id==b&&u(b,!0),r.success=!0,r.ref=G;else{if(g&&q()){e.data=g;n(e,v,b,H);return}u(b,!0)}H&&H(r)})):H&&H(r)},switchOffAutoHideShow:function(){Y=!1},ua:C,kL:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},kf:I,iV:function(a,b,c){if(C.w3)return w(a,b,c)},jS:function(a,b,c,d){C.w3&&q()&&n(a,b,c,d)},jv:function(a){C.w3&&m(a)},ik:function(a,b,c,d){C.w3&&N(a,b,c,d)},cz:e,jC:k,kY:function(a){var b=E.location.search||E.location.hash;
if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return x(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return x(b[c].substring(b[c].indexOf("=")+1))}return""},lq:function(){if(U){var a=t("SWFObjectExprInst");a&&M&&(a.parentNode.replaceChild(M,a),T&&(u(T,!0),C.ie&&C.win&&(M.style.display="block")),V&&V(X));U=!1}}}}CKFinder.addPlugin("flashupload",{readOnly:!1,appReady:function(b){if("asp"!=b.config.connectorLanguage||CKFinder.env.ie){var c=b.document,d=c.defaultView||
c.parentWindow;a(d,c).kf("10.2.0")&&setTimeout(function(){b.replaceUploadForm('<iframe src="'+CKFinder.getPluginPath("flashupload")+'Uploader.html" style="width: 100%; height: 98%;" frameBorder="0"></iframe>',function(){b.resizeFormPanel(100);d.api=b;d.create_swfobject=a;d.sessionIdentifiers={CFID:"CFID",CFTOKEN:"CFTOKEN",JSESSIONID:"jsessionid"};CKFinder.env.ie||d.flash_cookies||b.connector.sendCommandPost("LoadCookies",null,null,function(a){if(a.checkError())return!1;var b=a.selectSingleNode("Connector/Cookies");
if(b){var c=b.attributes.getNamedItem("sessionCookieName"),b=b.attributes.getNamedItem("sessionParameterName");c&&c.value&&b&&b.value&&(d.sessionIdentifiers[c.value]=b.value)}if((a=a.selectNodes("Connector/Cookies/Cookie"))&&a.length)for(d.flash_cookies={},c=0;c<a.length;c++){var b=a[c].attributes.getNamedItem("value").value,h=a[c].attributes.getNamedItem("name").value;d.flash_cookies[h]=b}})},!1,12)},100)}}})})();(function(){function a(a,b){var c=a.aG["formpanel.formpanel"],e=a.cS("upload"),k;if(e.bu!=
d.aY)if(e.bu==d.eV)for(k=0;k<b.length;k++)f(c,b[k]);else{for(k=0;k<b.length;k++)g.push(b[k]);e.exec()}}function b(a,b){a=a.getChild([0,0]);var c=a.getChild(0),d=a.getChild(1),e=a.getChild([2,0]),f=a.getChild(3),g=a.getChild(4),k={},m=0,p=0,I=a.getDocument().getById("ckf_cancelUpload"),u=!1,y=0,x=[],A=b.config.maxSimultaneousUploads,E=0,z=0,B=0;this.ns=function(){x=[];for(var a in k){var b=k[a];b.close&&b.close()}H();return!0};this.ld=function(a){k[a.id]=a;p++;1==p&&(I.getFirst().setHtml(b.lang.UploadBtnCancel),
I.addClass("cke_dialog_ui_button_cancel"),I.removeClass("cke_dialog_ui_button_ok"))};this.lQ=function(a){m--;0===p&&0===m&&I.oW("click")};this.mU=function(a,c,d){m++;c&&b.aV==c.folder&&(u=c);p--;delete k[a.id];d&&(B+=a.size,y--,0<x.length&&(y++,x.shift().mW()));0===p&&(I.getFirst().setHtml(b.lang.CloseBtn),I.addClass("cke_dialog_ui_button_ok"),I.removeClass("cke_dialog_ui_button_cancel"),H());or();nU()};this.mE=function(a,b){E--;z-=a.size;G();if(b)for(var c=0;c<x.length;c++)if(x[c]==a){x.splice(c,
1);break}};var H=function(){u&&(b.aV==u.folder&&b.oW("requestShowFolderFiles",{folder:u.folder,mw:u.filename}),u=null)};this.nU=function(){var a=0,c;for(c in k){var d=k[c];d.speed&&(a+=d.speed)}g.setText(CKFinder.tools.formatSpeed(a,b.lang))};this.or=function(){var a=B,c;for(c in k){var d=k[c];d.lT&&(a+=d.lT)}c=0===z?0:a/z*100;0>c&&(c=0);100<c&&(c=100);e.setStyle("width",c+"%");0!==c&&100!=c&&(c=c.toFixed(1));f.setText(b.lang.UploadUploaded.replace("!n",c)+" - "+CKFinder.tools.formatSize(a/1024,b.lang))};
var G=function(){c.setText(b.lang.UploadTotalFiles+" "+E+" ");d.setText(b.lang.UploadTotalSize+" "+CKFinder.tools.formatSize(z/1024,b.lang))};this.nv=function(a){E++;z+=a.size;G();y<A||!A?(y++,a.mW()):x.push(a)};G();return this}function c(a,b){var c=a.bn(),d=c.getDocument(),f=a.app,d=new A("div",d);this.ib=a;this.id=e++;this.nZ=this.lT=this.speed=0;d.setAttribute("class","ckf_upload_info");d.setHtml('<div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span>'+b+' </span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span><div class="ckf_outcome"></div></div></div><div class="ckf_uploadButtons"><a class="cke_dialog_ui_button cke_dialog_ui_button_cancel" name="cancel"><span class="cke_dialog_ui_button">'+
f.lang.UploadBtnCancel+"</span></a></div>");c.dB().append(d);f.cg.resizeFormPanel();this.container=d;c=this.container.getChild([0,0]);this.mx=c.getChild(1);this.ni=c.getChild([2,0]);this.mz=c.getChild(3);this.np=c.getChild(4);this.mI=c.getChild(5);var g=this;this.button=this.container.getChild([1,0]);this.button.on("click",function(){g.close()});k.ld(this);return this}function f(a,b){var d=a.app,e=d.aV,f=b.size,g=b.name;if(g.length){var k=new c(a,g);if(0===f)k.mD(d.lang.Errors[202]);else if((g=(g=
g.match(/\.([^\.]+)\s*$/))&&g[1])&&e.getResourceType().isExtensionAllowed(g)){var m=parseInt(d.config.uploadMaxSize,10);if(m&&f>m)k.mD(d.lang.Errors[203]);else if((m=parseInt(d.cg.getSelectedFolder().getResourceType().maxSize,10))&&f>m&&(d.config.uploadCheckImages||!g.match(/^(jpg|jpeg|gif|png|bmp)$/i)))k.mD(d.lang.Errors[203]);else{var f=new XMLHttpRequest,t=function(b,c){var f={step:3,filename:b,folder:e};if(c&&!b)k.mD(c,f);else{var g={filename:b,folder:e};c?k.mC("",c,g):k.mC(d.lang.UploadUploaded.replace("!n%",
b),"",g);a.oW("successUploadFile",f)}a.oW("afterUploadFile",f)};f.addEventListener("error",function(a){form.removeClass("progress_visible");t("",d.lang.UploadUnknError)},!1);f.addEventListener("load",function(a){a=a.target.responseText;var b=a.match(/(.*)\|(.*)/);b?t(b[1].replace(/\\'/g,"'"),b[2].replace(/\\'/g,"'")):t("",a)},!1);f.open("POST",d.connector.composeUrl("FileUpload",{response_type:"txt"},e.type,e));k.lN(f,b)}}else k.mD(a.app.lang.UploadExtIncorrect)}else a.oW("failedUploadFile")}var e=
0,k,g=[];z.add("html5upload",{bM:["uploadform"],bz:function(c){if("undefined"!=typeof FormData){var d='<div id="ckf_upload_form"><div class="ckf_upload_info" id="ckf_globalUploads"><div class="ckf_progress_wrapper"><div class="ckf_progress_info"><span></span><span></span><div class="ckf_progress_bar_container"><div></div></div><span class="ckf_status"></span><span class="ckf_speed"></span></div></div><div class="ckf_uploadButtons"><input type="file"'+(p.safari&&!p.mac?"":" multiple")+' id="ckf_fileInput"><a class="cke_dialog_ui_button"><span class="cke_dialog_ui_button" id="ckf_addFiles">'+
c.lang.UploadAddFiles+'</span></a><br><a class="cke_dialog_ui_button cke_dialog_ui_button_ok" id="ckf_cancelUpload"><span class="cke_dialog_ui_button">'+c.lang.CloseBtn+"</span></a></div></div></div>";setTimeout(function(){c.cg.replaceUploadForm(d,function(){var d=c.aG["formpanel.formpanel"],e=d.bn().getDocument(),l=e.getById("ckf_fileInput");k=b(e.getById("ckf_globalUploads"),c);l.on("change",function(b){a(c,b.jN.$.files)});if(0==g.length)window.setTimeout(function(){l.$.click()},100);else{for(var q=
0;q<g.length;q++)f(d,g[q]);g=[]}e.getById("ckf_addFiles").on("click",function(a){l.$.click()});e.getById("ckf_cancelUpload").on("click",function(a){k.ns()&&d.oW("requestUnloadForm")});e.getById("ckf_upload_form").on("dragover",n)},!0,11);var e=c.layout.pn();e.getDocument().on("dragover",function(a){var b=a.data.$.dataTransfer;b&&(b.dropEffect="none",p.webkit&&a.data.preventDefault())});var n=function(a){var b=a.data.$.dataTransfer;b&&(b.files&&b.files.length||b.types&&(b.types.contains&&b.types.contains("Files")||
b.types.indexOf&&-1!=b.types.indexOf("Files"))?(b.dropEffect="copy",a.data.stopPropagation()):b.dropEffect="none",a.data.preventDefault())};e.on("dragover",n);e.getDocument().on("drop",function(b){var d=b.data.$.dataTransfer;d&&d.files&&0<d.files.length&&(a(c,d.files),b.data.preventDefault())})},500)}}});c.prototype.mC=function(a,b,c){a=this.ib.app;this.mI.setText(b);this.ni.getParent().hide();this.mz.hide();this.np.hide();k.mU(this,c,!!this.bT);delete this.bT;b?(this.button.getFirst().setHtml(a.lang.CloseBtn),
this.button.addClass("cke_dialog_ui_button_ok"),this.button.removeClass("cke_dialog_ui_button_cancel")):this.close();a.cg.resizeFormPanel()};c.prototype.mD=function(a,b){this.ib.oW("failedUploadFile",b);this.container.addClass("ckf_FileError");this.mC("",a)};c.prototype.close=function(){this.bT&&this.bT.abort&&(this.bT.abort(),k.mE(this,this.file),this.size=0,k.mU(this,null,!this.file),delete this.bT,delete this.file);this.container.remove();k.lQ(this)};c.prototype.nR=function(a){this.speed=a/1024;
this.np.setText(CKFinder.tools.formatSpeed(this.speed,this.ib.app.lang));k.nU()};c.prototype.or=function(a){this.lT=a;a=a/this.size*100;0>a&&(a=0);100<a&&(a=100);this.ni.setStyle("width",a+"%");0!==a&&100!=a&&(a=a.toFixed(1));this.mz.setText(this.ib.app.lang.UploadUploaded.replace("!n",a));k.or()};c.prototype.lN=function(a,b){this.bT=a;this.file=b;this.size=b.size;this.mx.setText(" - "+CKFinder.tools.formatSize(b.size/1024,this.ib.app.lang));k.nv(this)};c.prototype.mW=function(){d.log("[UPLOADFORM] Starting XHR file upload.");
var a=this.bT.upload;if(a){a.oS=(new Date).getTime();var b=function(a,b){var c=((new Date).getTime()-a.oS)/1E3;b.nR(a.kC/c)};a.interval=window.setInterval(b,1E3,a,this);a.onload=function(a){window.clearInterval(a.target.interval)};var c=this;a.kC=0;a.onprogress=function(a){a.lengthComputable&&(a.target.kC=a.loaded,c.or(a.loaded),b(a.target,c))}}a=new FormData;a.append("upload",this.file);this.bT.send(a);delete this.file}})();(function(){function a(a,c,d,e){a.execCommand(e?"moveFilesToFolder":"copyFilesToFolder",
{files:d,destination:c,fileCallback:function(a,b){for(var c=m.indexOf(a.basketFiles,b),d=1,e=a.basketFiles.length-1;c<e;c++)a.basketFiles[c]?a.basketFiles[c]=a.basketFiles[c+d]:d++;a.basketFiles.length=Math.max(e,0)}})}z.add("basket",{bM:["foldertree","filesview","contextmenu"],readOnly:!1,basketToolbar:[["clearBasket",{label:"BasketClear",command:"TruncateBasket",disableEmpty:!0}]],basketFileContextMenu:[["mu",{label:"BasketRemove",command:"RemoveFileFromBasket",group:"file3"}],["hN",{label:"BasketOpenFolder",
command:"OpenFileFolder",group:"file1"}]],bz:function(b){var c=window.top[d.nd+"cation"][d.jG+"st"],f=[],e=function(){for(var a=b.basketFiles.length?d.aS:d.aY,c=0,e=f.length;c<e;c++)b.cS(f[c]).bR(a)};b.bD("FolderPasteCopyBasket",{exec:function(b){var c=b.aV;c&&a(b,c,b.basketFiles)}});b.bD("FolderPasteMoveBasket",{exec:function(b){if(d.bF&&1==d.bs.indexOf(d.bF.substr(1,1))%5&&d.lS(c)!=d.lS(d.ed)||d.bF&&d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%
(d.bs.length-1),1))b.msgDialog("","This function is disabled in the demo version of CKFinder.<br />Please visit the <a href='http://ckfinder.com'>CKFinder web site</a> to obtain a valid license.");else{var f=b.aV;f&&(a(b,f,b.basketFiles,!0),e())}}});b.eU({folderPasteMoveBasket:{label:b.lang.BasketMoveFilesHere,command:"FolderPasteMoveBasket",group:"folder1"},folderPasteCopyBasket:{label:b.lang.BasketCopyFilesHere,command:"FolderPasteCopyBasket",group:"folder1"}});var k=b.basket=new d.aL.BasketFolder(b);
b.basketFiles=[];b.on("uiReady",function(a){function c(a){for(var b in a.plugins)if(a.plugins.hasOwnProperty(b)&&(b=a.plugins[b],b.basketToolbar))for(var d=0;d<b.basketToolbar.length;d++){var e=b.basketToolbar[d];if(!a.bY._.items[e[0]]){var g=m.deepCopy(e[1]),h=g.command;if(!g.command){var l=e[1].onClick,h="BasketToolbar_"+e[0];a.bD(h,{exec:function(a){l(a.cg)}});g.command=h}var k=m.capitalize(b.name);"function"==typeof g.label?g.label=g.label.call(b,a.cg):a.lang[b.name]&&a.lang[b.name][g.label]?
g.label=a.lang[b.name][g.label]:a.lang[k]&&a.lang[k][g.label]?g.label=a.lang[k][g.label]:a.lang[g.label]&&(g.label=a.lang[g.label]);g.basketToolbar=1;g.disableEmpty&&f.push(h);a.bY.add(e[0],CKFinder._.UI_BUTTON,g)}}}function l(a){if(a.eU)for(var b in a.plugins)if(a.plugins.hasOwnProperty(b)&&(b=a.plugins[b],b.basketFileContextMenu))for(var c=0;c<b.basketFileContextMenu.length;c++){var d=b.basketFileContextMenu[c];if(!a._.iG[d[0]]){var e=m.deepCopy(d[1]);if(!e.command){var g="BasketContextMenu_"+d[0],
h=d[1].onClick;a.bD("BasketContextMenu_"+d[0],{exec:function(a){h(a.cg)}});e.command=g}var l=m.capitalize(b.name);"function"==typeof e.label?e.label=e.label.call(b,a.cg):a.lang[b.name]&&a.lang[b.name][e.label]?e.label=a.lang[b.name][e.label]:a.lang[l]&&a.lang[l][e.label]?e.label=a.lang[l][e.label]:a.lang[e.label]&&(e.label=a.lang[e.label]);e.disableEmpty&&f.push(g);a.gp(d[0],e);n.push(d[0])}}}a=b.aG["foldertree.foldertree"];a.on("beforeAddFolder",function(a){a.removeListener();a.data.folders.push(k)});
a.on("beforeDroppable",function(a){if(a.data.target instanceof d.aL.BasketFolder&&(a.data.source instanceof d.aL.File&&(a.data.source=[a.data.source]),m.isArray(a.data.source)&&a.data.source.length&&a.data.source[0]instanceof d.aL.File)){for(var c=a.data.source,e=0,f=0,g=c.length,h,l;f<g;f++){h=0;for(l=b.basketFiles.length;h<l;h++)if(c[f].isSameFile(b.basketFiles[h])){e=1;break}e||b.basketFiles.push(c[f])}a.cancel(1)}});a.on("beforeContextMenu",function(a){a.data.folder instanceof d.aL.BasketFolder?
(a=a.data.bj,delete a.lI,delete a.removeFolder,delete a.kl,a.qT=b.basketFiles.length?d.aS:d.aY):(a=a.data.bj,a.folderPasteCopyBasket=b.basketFiles.length?d.aS:d.aY,a.folderPasteMoveBasket=b.basketFiles.length?d.aS:d.aY)});a.on("beforeKeyboardNavigation",function(a){if(a.data.folder instanceof d.aL.BasketFolder){var b=a.data.db();46!=b&&113!=b||a.cancel()}});b.bD("TruncateBasket",{exec:function(a){a.basketFiles.length&&a.fe("",a.lang.BasketTruncateConfirm,function(){a.basketFiles.length=0;a.oW("requestSelectFolder",
{folder:a.basket})})}});b.bD("RemoveFileFromBasket",{exec:function(a){var b=a.aG["filesview.filesview"].tools.oO();b&&b.length&&a.fe("",1==b.length?a.lang.BasketRemoveConfirm.replace("%1",b[0].name):a.lang.BasketRemoveConfirmMultiple.replace("%1",b.length),function(){for(var c=0,d=b.length,f;c<d;c++)for(f=0;f<a.basketFiles.length;f++)if(b[c].isSameFile(a.basketFiles[f])){a.basketFiles.splice(f,1);break}a.oW("requestSelectFolder",{folder:a.basket});e()})}});b.bD("OpenFileFolder",{exec:function(a){var b=
a.aG["filesview.filesview"].data().cG;b&&a.oW("requestSelectFolder",{folder:b.folder})}});b.eU&&b.gp("truncateBasket",{label:b.lang.BasketClear,command:"TruncateBasket",group:"folder"});var q=[];a=b.aG["filesview.filesview"];var n=[];a.on("beforeContextMenu",function(a){if(a.data.folder instanceof d.aL.BasketFolder){a=a.data.bj;delete a.renameFile;delete a.deleteFile;delete a.deleteFiles;a.mu=d.aS;a.hN=d.aS;for(var b=0;b<n.length;b++)a[n[b]]=d.aS}});a.on("beforeShowFolderFiles",function(a){if(a.data.folder instanceof
d.aL.BasketFolder){a.cancel(1);this.app.oW("requestRenderFiles",{files:b.basketFiles,mj:b.lang.BasketEmpty,eu:1,folder:a.data.folder});this.app.oW("requestRepaintFolder",a.data);c(this.app);l(this.app);e();for(var f=this.app.dh.fk,g=0;g<f.length;g++){var k=this.app.document.getById(f[g].id),n=['<span class="cke_toolgroup" id="basket">'],m;for(m in this.app.bY._.items)if(this.app.bY._.items.hasOwnProperty(m)){var p=b.bY._.items[m];if(p.mp[0].basketToolbar){var p=b.bY.create(m),p=p.er(b,n),u=f[g].items.push(p)-
1;0<u&&(p.previous=f[g].items[u-1],p.previous.next=p);q[g]||(q[g]=[]);q[g].push(u)}}n.push("</span>");k.appendHtml(n.join(""))}this.on("beforeShowFolderFiles",function(a){this.app.document.getById("basket").remove();for(var b=this.app.dh.fk,c=0;c<b.length;c++)for(var d=0;d<b[c].items.length;d++)q[c][d]&&delete b[c].items[d];a.removeListener()},null,null,1);this.oW("successShowFolderFiles",a.data);this.oW("afterShowFolderFiles",a.data)}});a.on("beforeKeyboardNavigation",function(a){var c=b.aV;c&&c instanceof
d.aL.BasketFolder&&(c=a.data.db(),46==c&&(a.cancel(),b.execCommand("RemoveFileFromBasket")),113==c&&a.cancel())})},null,null,20)}});d.aL.BasketFolder=m.createClass({$:function(a){d.aL.Folder.call(this,a,null,a.lang.BasketFolder);this.hasChildren=0;this.acl=new d.aL.Acl("1111111");this.isBasket=!0},base:d.aL.Folder,ej:{createNewFolder:function(){},getChildren:function(a){a.apply(this,null)},rename:function(){},remove:function(){},getUrl:function(){return"ckfinder://basketFolder"},getUploadUrl:function(){return null},
getPath:function(){return"/"},copyFiles:function(a){},moveFiles:function(a){}}})})();d.DIALOG_RESIZE_NONE=0;d.DIALOG_RESIZE_WIDTH=1;d.DIALOG_RESIZE_HEIGHT=2;d.DIALOG_RESIZE_BOTH=3;(function(){function a(){for(var a=this._.cU.length,b=m.indexOf(this._.cU,this._.gx)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.cU[c%a]][0].$.offsetHeight)return this._.cU[c%a];return null}function b(){for(var a=this._.cU.length,b=m.indexOf(this._.cU,this._.gx),c=b+1;c<b+a;c++)if(this._.tabs[this._.cU[c%a]][0].$.offsetHeight)return this._.cU[c%
a];return null}function c(a,b,c){this.element=b;this.cQ=c;this.fM=function(){return!b.getAttribute("disabled")&&b.isVisible()};this.focus=function(){a._.aW=this.cQ;this.element.focus()};b.on("keydown",function(a){a.data.db()in{32:1,13:1}&&this.oW("click")});b.on("focus",function(){this.oW("mouseover")});b.on("blur",function(){this.oW("mouseout")})}function f(a,b){this._={dialog:a};m.extend(this,b)}function e(a){function b(c){var g=a.hR(),k=d.document.getWindow().eR(),q=c.data.$.screenX,n=c.data.$.screenY,
m=q-e.x,r=n-e.y;e={x:q,y:n};f.x+=m;f.y+=r;a.move(f.x+l[3]<h?-l[3]:f.x-l[1]>k.width-g.width-h?k.width-g.width+l[1]:f.x,f.y+l[0]<h?-l[0]:f.y-l[2]>k.height-g.height-h?k.height-g.height+l[2]:f.y,1);c.data.preventDefault()}function c(a){d.document.removeListener("mousemove",b);d.document.removeListener("mouseup",c);p.ie6Compat&&(a=w.getChild(0).getFrameDocument(),a.removeListener("mousemove",b),a.removeListener("mouseup",c))}var e=null,f=null;a.getElement().getFirst();var g=a.eY(),h=g.config.dialog_magnetDistance,
l=g.skin.margins||[0,0,0,0];"undefined"==typeof h&&(h=20);a.bO.title.on("mousedown",function(g){e={x:g.data.$.screenX,y:g.data.$.screenY};d.document.on("mousemove",b);d.document.on("mouseup",c);f=a.gz();if(p.ie6Compat){var h=w.getChild(0).getFrameDocument();h.on("mousemove",b);h.on("mouseup",c)}g.data.preventDefault()},a)}function k(a){var b,c;function e(h){v=a.hR();h=h.data.$;var l=a.bO.contents;l.$.getElementsByTagName("iframe").length&&(t=A.kE('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),
l.append(t));n=v.height-a.bO.contents.hR("height",!(p.gecko||p.opera||y&&p.quirks));q=v.width-a.bO.contents.hR("width",1);b=h.screenX;c=h.screenY;r=d.document.getWindow().eR();d.document.on("mousemove",f);d.document.on("mouseup",g);p.ie6Compat&&(l=w.getChild(0).getFrameDocument(),l.on("mousemove",f),l.on("mouseup",g));h.preventDefault&&h.preventDefault()}function f(e){var g="rtl"==k.lang.dir,m=(e.data.$.screenX-b)*(g?-1:1),w=v.width,t=v.height,p=w+m*(a._.moved?1:2),D=t+(e.data.$.screenY-c)*(a._.moved?
1:2),K=a._.element.getFirst(),M=g&&K.getComputedStyle("right"),C=a.gz();M&&(M="auto"==M?r.width-(C.x||0)-K.hR("width"):parseInt(M,10));C.y+D>r.height&&(D=r.height-C.y);(g?M:C.x)+p>r.width&&(p=r.width-(g?M:C.x));l!=d.DIALOG_RESIZE_WIDTH&&l!=d.DIALOG_RESIZE_BOTH||g&&0<m&&!C.x||(w=Math.max(h.minWidth||0,p-q));if(l==d.DIALOG_RESIZE_HEIGHT||l==d.DIALOG_RESIZE_BOTH)t=Math.max(h.minHeight||0,D-n);a.resize(w,t);g=M;a._.moved&&"rtl"==k.lang.dir?(m=a._.element.getFirst(),m.setStyle("right",g+"px"),m.removeStyle("left")):
a._.moved||a.layout();e.data.preventDefault()}function g(){d.document.removeListener("mouseup",g);d.document.removeListener("mousemove",f);t&&(t.remove(),t=null);if(p.ie6Compat){var b=w.getChild(0).getFrameDocument();b.removeListener("mouseup",g);b.removeListener("mousemove",f)}if("rtl"==k.lang.dir){var b=a._.element.getFirst(),c=b.getComputedStyle("left"),c="auto"==c?r.width-parseInt(b.rd("right"),10)-a.hR().width:parseInt(c,10);b.removeStyle("right");a._.position.x+=1;a.move(c,a._.position.y)}}
var h=a.dg,l=h.resizable;if(l!=d.DIALOG_RESIZE_NONE){var k=a.eY(),q,n,r,v,t;a.on("load",function(){var b="";l==d.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":l==d.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical");b=A.kE('<div class="cke_resizer'+b+'" title="'+m.htmlEncode(k.lang.resize)+'"></div>');b.on("mousedown",e);a.bO.footer.append(b,1)});k.on("destroy",function(){m.removeFunction(e)})}}function g(a,b){var c=function(){e(this);b(this)},d=function(){e(this)},e=function(a){a.removeListener("ok",
c);a.removeListener("cancel",d)};a.on("ok",c);a.on("cancel",d)}d.dialog=function(c,f){function g(a){var b=t._.eO;a=a?1:-1;if(!(1>b.length)){for(var c=(t._.aW+a+b.length)%b.length,d=c;!b[d].fM()&&(d=(d+a+b.length)%b.length,d!=c););b[d].focus();"text"==b[d].type&&b[d].select()}}function l(c){if(t==d.dialog._.dL){var e=c.data.db();u=0;9==e||e==d.dy+9?(e=e==d.dy+9,t._.eC?(e=e?a.call(t):b.call(t),t.selectPage(e),t._.tabs[e][0].focus()):g(!e),u=1):e!=d.eJ+121||t._.eC?37!=e&&39!=e||!t._.eC||(e=37==e?a.call(t):
b.call(t),t.selectPage(e),t._.tabs[e][0].focus(),u=1):(t._.eC=!0,t._.tabs[t._.gx][0].focus(),u=1);u&&(c.stop(),c.data.preventDefault())}}function q(a){u&&a.data.preventDefault()}var n=d.dialog._.ev[f],n=m.extend(n(c),h),n=m.clone(n),n=new r(this,n),v=c.theme.pu(c);this._={app:c,element:v.element,name:f,hB:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},iX:{},tabs:{},cU:[],gx:null,nM:null,gV:0,qF:null,eC:!1,eO:[],aW:0,hasFocus:!1};this.bO=v.bO;this.bO.dialog.setStyles({position:p.ie6Compat?
"absolute":"fixed",top:0,left:0,visibility:"hidden"});d.event.call(this);this.dg=n=d.oW("dialogDefinition",{name:f,dg:n},c).dg;if(n.onLoad)this.on("load",n.onLoad);if(n.onShow)this.on("show",n.onShow);if(n.onHide)this.on("hide",n.onHide);if(n.onOk)this.on("ok",function(a){!1===n.onOk.call(this,a)&&(a.data.hide=!1)});if(n.onCancel)this.on("cancel",function(a){!1===n.onCancel.call(this,a)&&(a.data.hide=!1)});var t=this,D=function(a){var b=t._.contents,c=!1,d;for(d in b)for(var e in b[d])if(c=a.call(this,
b[d][e]))return};this.on("ok",function(a){D(function(b){if(b.validate){var d=b.validate(this);"string"==typeof d&&(c.document.getWindow().$.alert(d),d=!1);if(!1===d)return b.select?b.select():b.focus(),a.data.hide=!1,a.stop(),!0}})},this,null,0);this.on("cancel",function(a){D(function(b){if(b.isChanged())return c.document.getWindow().$.confirm(c.lang.common.confirmCancel)||(a.data.hide=!1),!0})},this,null,0);this.bO.close.on("click",function(a){!1!==this.oW("cancel",{hide:!0}).hide&&this.hide()},
this);var u;this.on("show",function(){d.document.on("keydown",l,this,null,0);if(p.opera||p.gecko&&p.mac)d.document.on("keypress",q,this);if(p.ie6Compat)w.getChild(0).getFrameDocument().on("keydown",l,this,null,0)});this.on("hide",function(){d.document.removeListener("keydown",l);(p.opera||p.gecko&&p.mac)&&d.document.removeListener("keypress",q)});this.on("iframeAdded",function(a){(new L(a.data.iframe.$.contentWindow.document)).on("keydown",l,this,null,0)});this.on("show",function(){this._.hasFocus||
(this._.aW=-1,g(!0))},this,null,4294967295);if(p.ie6Compat)this.on("load",function(a){a=this.getElement();var b=a.getFirst();b.remove();b.appendTo(a)},this);e(this);k(this);this.bO.title.setText(n.title);for(var F=0;F<n.contents.length;F++)this.addPage(n.contents[F]);var x=/cke_dialog_tab(\s|$|_)/;this.bO.tabs.on("click",function(a){var b=a.data.bK();if(x.test(b.$.className)||"a"==b.getName())b=b.$.id.substr(0,b.$.id.lastIndexOf("_")),this.selectPage(b),this._.eC&&(this._.eC=!1,this._.aW=-1,g(!0)),
a.data.preventDefault()},this);F=[];v=d.dialog._.gv.hbox.dQ(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:n.buttons},F).getChild();this.bO.footer.setHtml(F.join(""));for(F=0;F<v.length;F++)this._.buttons[v[F].id]=v[F];d.skins.load(c,"dialog")};d.dialog.prototype={resize:function(){return function(a,b){this._.hB&&this._.hB.width==a&&this._.hB.height==b||(d.dialog.oW("resize",{dialog:this,skin:this._.app.gd,width:a,height:b},this._.app),this._.hB={width:a,height:b})}}(),
hR:function(){var a=this._.element.getFirst();return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},mn:function(){var a=this.hR();a.height=a.height-(this.bO.title.$.offsetHeight||0)-(this.bO.footer.$.offsetHeight||0);return a},move:function(){var a;return function(b,c,e){var f=this._.element.getFirst();void 0===a&&(a="fixed"==f.getComputedStyle("position"));if(!a||!this._.position||this._.position.x!=b||this._.position.y!=c){this._.position={x:b,y:c};if(!a){var g=d.document.getWindow().hV();
b+=g.x;c+=g.y}f.setStyles({left:(0<b?b:0)+"px",top:(0<c?c:0)+"px"});e&&(this._.moved=1)}}}(),gz:function(){return m.extend({},this._.position)},show:function(){var a=this._.app;"qt"==a.mode&&y&&(a=a.getSelection())&&a.up();var a=this._.element,b=this.dg;if(!a.getParent()||!a.getParent().equals(d.document.bH())){a.appendTo(d.document.bH());if(p.gecko&&10900>p.version){var c=this.bO.dialog;c.setStyle("position","absolute");setTimeout(function(){c.setStyle("position","fixed")},0)}this.resize(this._.hB&&
this._.hB.width||b.minWidth,this._.hB&&this._.hB.height||b.minHeight);this.selectPage(this.dg.contents[0].id);this.reset();null===d.dialog._.gw&&(d.dialog._.gw=this._.app.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",d.dialog._.gw+=10);if(null===d.dialog._.dL){d.dialog._.dL=this;this._.ep=null;D(this._.app);a.on("keydown",x);a.on(p.opera?"keypress":"keyup",N);for(var e in{keyup:1,keydown:1,keypress:1})a.on(e,Q)}else this._.ep=d.dialog._.dL,this._.ep.getElement().getFirst().$.style.zIndex-=
Math.floor(this._.app.config.baseFloatZIndex/2),d.dialog._.dL=this;B(this,this,"\u001b",null,function(){var a=this.getButton("cancel");a?a.click():!1!==this.oW("cancel",{hide:!0}).hide&&this.hide()});this._.hasFocus=!1;m.setTimeout(function(){this.layout();this.bO.dialog.setStyle("visibility","");this.cr("load",{});this.oW("show",{});this._.app.oW("dialogShow",this);this.gh(function(a){a.jW&&a.jW()})},100,this)}},layout:function(){var a=d.document.getWindow().eR(),b=this.hR();this.move(this._.moved?
this._.position.x:(a.width-b.width)/2,this._.moved?this._.position.y:(a.height-b.height)/2)},gh:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a(this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset()};return function(){this.gh(a);return this}}(),rN:function(){var a=arguments;this.gh(function(b){b.qi&&b.qi.apply(b,a)})},sI:function(){var a=arguments;this.gh(function(b){b.rx&&b.rx.apply(b,a)})},hide:function(){this.oW("hide",{});this._.app.oW("dialogHide",
this);var a=this._.element;if(a.getParent()){a.remove();this.bO.dialog.setStyle("visibility","hidden");J(this);if(this._.ep){var b=this._.ep.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.app.config.baseFloatZIndex/2))}else t();if(d.dialog._.dL=this._.ep)d.dialog._.gw-=10;else{d.dialog._.gw=null;a.removeListener("keydown",x);a.removeListener(p.opera?"keypress":"keyup",N);for(var c in{keyup:1,keydown:1,keypress:1})a.removeListener(c,Q);a=this._.app;a.focus();
a._.activeElement=null;a._.oO=[];"qt"==a.mode&&y&&(a=a.getSelection())&&a.sd(!0)}this.gh(function(a){a.ki&&a.ki()})}},addPage:function(a){var b=[],c=a.label?' title="'+m.htmlEncode(a.label)+'"':"",e=d.dialog._.gv.vbox.dQ(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%; height: 100%;"},b),b=A.kE(b.join(""),d.document),c=A.kE(['<a class="cke_dialog_tab"',0<this._.gV?" cke_last":"cke_first",c,a.hidden?' style="display:none"':
"",' id="',a.id+"_",m.getNextNumber(),'" href="javascript:void(0)" hp="true">',a.label,"</a>"].join(""),d.document);0===this._.gV?this.bO.dialog.addClass("cke_single_page"):this.bO.dialog.removeClass("cke_single_page");this._.tabs[a.id]=[c,b];this._.cU.push(a.id);this._.gV++;this._.qF=c;for(var f=this._.contents[a.id]={},g=e.getChild();e=g.shift();)f[e.id]=e,"function"==typeof e.getChild&&g.push.apply(g,e.getChild());b.setAttribute("name",a.id);b.appendTo(this.bO.contents);c.unselectable();this.bO.tabs.append(c);
a.accessKey&&(B(this,this,"bP+"+a.accessKey,E,O),this._.iX["bP+"+a.accessKey]=a.id)},selectPage:function(a){for(var b in this._.tabs){var c=this._.tabs[b][0],d=this._.tabs[b][1];b!=a&&(c.removeClass("cke_dialog_tab_selected"),d.hide())}b=this._.tabs[a];b[0].addClass("cke_dialog_tab_selected");b[1].show();this._.gx=a;this._.nM=m.indexOf(this._.cU,a)},vJ:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&a.hide()},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&a.show()},getElement:function(){return this._.element},
getName:function(){return this._.name},getContentElement:function(a,b){return this._.contents[a][b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},vj:function(){return this._.gV},
getParentApi:function(){return this._.app.cg},eY:function(){return this._.app},rf:function(){return this.eY().getSelection().rf()},tQ:function(a,b){if("undefined"==typeof b)b=this._.eO.length,this._.eO.push(new c(this,a,b));else{this._.eO.splice(b,0,new c(this,a,b));for(var d=b+1;d<this._.eO.length;d++)this._.eO[d].cQ++}},setTitle:function(a){this.bO.title.setText(a)}};m.extend(d.dialog,{add:function(a,b){this._.ev[a]&&"function"!=typeof b||(this._.ev[a]=b)},exists:function(a){return!!this._.ev[a]},
getCurrent:function(){return d.dialog._.dL},okButton:function(){var a=function(a,b){b=b||{};return m.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog;!1!==a.oW("ok",{hide:!0}).hide&&a.hide()}},b,!0)};a.type="button";a.override=function(b){return m.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),cancelButton:function(){var a=function(a,b){b=b||{};return m.extend({id:"cancel",type:"button",label:a.lang.common.cancel,
"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog;!1!==a.oW("cancel",{hide:!0}).hide&&a.hide()}},b,!0)};a.type="button";a.override=function(b){return m.extend(function(c){return a(c,b)},{type:"button"},!0)};return a}(),addUIElement:function(a,b){this._.gv[a]=b}});d.dialog._={gv:{},ev:{},dL:null,gw:null};d.event.du(d.dialog);d.event.du(d.dialog.prototype,!0);var h={resizable:d.DIALOG_RESIZE_NONE,minWidth:600,minHeight:400,buttons:[d.dialog.okButton,d.dialog.cancelButton]},l=
function(a,b,c){for(var d=0,e;e=a[d];d++)if(e.id==b||c&&e[c]&&(e=l(e[c],b,c)))return e;return null},q=function(a,b,c,d,e){if(c){for(var f=0,g;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;if(d&&g[d]&&(g=q(g[d],b,c,d,!0)))return g}if(e)return null}a.push(b);return b},n=function(a,b,c){for(var d=0,e;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=n(e[c],b,c)))return e}return null},r=function(a,b){this.dialog=a;for(var c=b.contents,d=0,e;e=c[d];d++)c[d]=new f(a,e);m.extend(this,b)};r.prototype=
{vz:function(a){return l(this.contents,a)},getButton:function(a){return l(this.buttons,a)},uh:function(a,b){return q(this.contents,a,b)},qW:function(a,b){return q(this.buttons,a,b)},uP:function(a){n(this.contents,a)},uO:function(a){n(this.buttons,a)}};f.prototype={eB:function(a){return l(this.elements,a,"children")},add:function(a,b){return q(this.elements,a,b,"children")},remove:function(a){n(this.elements,a,"children")}};var v,w,D=function(a){var b=d.document.getWindow();if(!w){var c=a.config.dialog_backgroundCoverColor||
"white",e=['<div style="position: ',p.ie6Compat?"absolute":"fixed","; z-index: ",a.config.baseFloatZIndex,"; top: 0px; left: 0px; ",p.ie6Compat?"":"background-color: "+c,'" id="cke_dialog_background_cover">'];if(p.ie6Compat){var f=p.isCustomDomain(),c="<html><body style=\\'background-color:"+c+";\\'></body></html>";e.push('<iframe hp="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');e.push("void((function(){document.open();"+(f?"document.domain='"+document.domain+"';":"")+
"document.write( '"+c+"' );document.close();})())");e.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}e.push("</div>");w=A.kE(e.join(""),d.document)}var g=w,e=function(){var a=b.eR();g.setStyles({width:a.width+"px",height:a.height+"px"})},h=function(){var a=b.hV(),c=d.dialog._.dL;g.setStyles({left:a.x+"px",top:a.y+"px"});do a=c.gz(),c.move(a.x,a.y);while(c=c._.ep)};v=e;b.on("resize",e);e();if(p.ie6Compat){var l=
function(){h();arguments.callee.lw.apply(this,arguments)};b.$.setTimeout(function(){l.lw=window.onscroll||function(){};window.onscroll=l},0);h()}a=a.config.dialog_backgroundCoverOpacity;g.setOpacity("undefined"!=typeof a?a:.5);g.appendTo(d.document.bH())},t=function(){if(w){var a=d.document.getWindow();w.remove();a.removeListener("resize",v);p.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.lw||null},0);v=null}},F={},x=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,
c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=F[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.bf,b.dialog,b.iK),a.data.preventDefault())},N=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=F[(b?"bP+":"")+(c?"eJ+":"")+(d?"dy+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.bf,b.dialog,b.iK),a.data.preventDefault()))},
B=function(a,b,c,d,e){(F[c]||(F[c]=[])).push({bf:a,dialog:b,iK:c,keyup:e||a.eZ,keydown:d||a.iU})},J=function(a){for(var b in F){for(var c=F[b],d=c.length-1;0<=d;d--)c[d].dialog!=a&&c[d].bf!=a||c.splice(d,1);0===c.length&&delete F[b]}},O=function(a,b){a._.iX[b]&&a.selectPage(a._.iX[b])},E=function(a,b){},ba={27:1,13:1},Q=function(a){a.data.db()in ba&&a.data.stopPropagation()};(function(){u.dialog={bf:function(a,b,c,e,f,g,h){if(!(4>arguments.length)){var l=(e.call?e(b):e)||"div",k=["<",l," "],n=(f&&
f.call?f(b):f)||{},q=(g&&g.call?g(b):g)||{},r=(h&&h.call?h(a,b):h)||"",w=this.oJ=q.id||m.getNextNumber()+"_uiElement";this.id=b.id;q.id=w;var v={};b.type&&(v["cke_dialog_ui_"+b.type]=1);b.className&&(v[b.className]=1);for(var t=q["class"]&&q["class"].split?q["class"].split(" "):[],w=0;w<t.length;w++)t[w]&&(v[t[w]]=1);t=[];for(w in v)t.push(w);q["class"]=t.join(" ");b.title&&(q.title=b.title);v=(b.style||"").split(";");for(w in n)v.push(w+":"+n[w]);b.hidden&&v.push("display:none");for(w=v.length-1;0<=
w;w--)""===v[w]&&v.splice(w,1);0<v.length&&(q.style=(q.style?q.style+"; ":"")+v.join("; "));for(w in q)k.push(w+'="'+m.htmlEncode(q[w])+'" ');k.push(">",r,"</",l,">");c.push(k.join(""));(this._||(this._={})).dialog=a;"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged});"function"==typeof b.isChanged&&(this.isChanged=b.isChanged);d.event.du(this);this.nc(b);this.eZ&&this.iU&&b.accessKey&&B(this,a,"bP+"+b.accessKey);var p=this;a.on("load",function(){if(p.getInputElement())p.getInputElement().on("focus",
function(){a._.eC=!1;a._.hasFocus=!0;p.oW("focus")},p)});this.eA&&(this.cQ=a._.eO.push(this)-1,this.on("focus",function(){a._.aW=p.cQ}));m.extend(this,b)}},hbox:function(a,b,c,d,e){if(!(4>arguments.length)){this._||(this._={});this._.children=b;var f=e&&e.widths||null,g=e&&e.height||null,h;u.dialog.bf.call(this,a,e||{type:"hbox"},d,"table",{},e&&e.align&&{align:e.align}||null,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];for(h=0;h<c.length;h++){var b="cke_dialog_ui_hbox_child",d=[];
0===h&&(b="cke_dialog_ui_hbox_first");h==c.length-1&&(b="cke_dialog_ui_hbox_last");a.push('<td class="',b,'" ');f?f[h]&&d.push("width:"+m.cssLength(f[h])):d.push("width:"+Math.floor(100/c.length)+"%");g&&d.push("height:"+m.cssLength(g));e&&void 0!=e.padding&&d.push("padding:"+m.cssLength(e.padding));0<d.length&&a.push('style="'+d.join("; ")+'" ');a.push(">",c[h],"</td>")}a.push("</tr></tbody>");return a.join("")})}},vbox:function(a,b,c,d,e){if(!(3>arguments.length)){this._||(this._={});this._.children=
b;var f=e&&e.width||null,g=e&&e.vY||null;u.dialog.bf.call(this,a,e||{type:"vbox"},d,"div",null,null,function(){var b=['<table cellspacing="0" border="0" '];b.push('style="');e&&e.expand&&b.push("height:100%;");b.push("width:"+m.cssLength(f||"100%"),";");b.push('"');b.push('align="',m.htmlEncode(e&&e.align||("ltr"==a.eY().lang.dir?"left":"right")),'" ');b.push("><tbody>");for(var d=0;d<c.length;d++){var h=[];b.push("<tr><td ");f&&h.push("width:"+m.cssLength(f||"100%"));g?h.push("height:"+m.cssLength(g[d])):
e&&e.expand&&h.push("height:"+Math.floor(100/c.length)+"%");e&&void 0!=e.padding&&h.push("padding:"+m.cssLength(e.padding));0<h.length&&b.push('style="',h.join("; "),'" ');b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")}b.push("</tbody></table>");return b.join("")})}}}})();u.dialog.bf.prototype={getElement:function(){return d.document.getById(this.oJ)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a){this.getInputElement().setValue(a);
this.oW("change",{value:a});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););if(!a)return this;a=a.getAttribute("name");this._.dialog._.gx!=a&&this._.dialog.selectPage(a);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},nc:function(a){var b=/^on([A-Z]\w+)/,c,d=function(a,
b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})},e;for(e in a)if(c=e.match(b))this.dm[e]?this.dm[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]);return this},dm:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},iU:function(a,b){this.focus()},eZ:function(a,b){},disable:function(){var a=this.getInputElement();a.setAttribute("disabled","true");a.addClass("cke_disabled")},enable:function(){var a=
this.getInputElement();a.removeAttribute("disabled");a.removeClass("cke_disabled")},isEnabled:function(){return!this.getInputElement().getAttribute("disabled")},isVisible:function(){return this.getInputElement().isVisible()},fM:function(){return this.isEnabled()&&this.isVisible()?!0:!1}};u.dialog.hbox.prototype=m.extend(new u.dialog.bf,{getChild:function(a){if(1>arguments.length)return this._.children.concat();a.splice||(a=[a]);return 2>a.length?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?
this._.children[a[0]].getChild(a.slice(1,a.length)):null}},!0);u.dialog.vbox.prototype=new u.dialog.hbox;(function(){var a={dQ:function(a,b,c){for(var e=b.children,f,g=[],h=[],l=0;l<e.length&&(f=e[l]);l++){var k=[];g.push(k);h.push(d.dialog._.gv[f.type].dQ(a,f,k))}return new u.dialog[b.type](a,h,g,c,b)}};d.dialog.addUIElement("hbox",a);d.dialog.addUIElement("vbox",a)})();d.rB=function(a){this.ry=a};d.rB.prototype={exec:function(a){a.openDialog(this.ry)},sG:!1};(function(){var a=/^([a]|[^a])+$/,b=
/^\d*$/,c=/^\d*(?:\.\d+)?$/;d.sg=1;d.jb=2;d.dialog.validate={functions:function(){return function(){var a=this&&this.getValue?this.getValue():arguments[0],b=void 0,c=d.jb,e=[],f;for(f=0;f<arguments.length;f++)if("function"==typeof arguments[f])e.push(arguments[f]);else break;f<arguments.length&&"string"==typeof arguments[f]&&(b=arguments[f],f++);f<arguments.length&&"number"==typeof arguments[f]&&(c=arguments[f]);var g=c==d.jb?!0:!1;for(f=0;f<e.length;f++)g=c==d.jb?g&&e[f](a):g||e[f](a);return g?!0:
(void 0!==b&&alert(b),this&&(this.select||this.focus)&&(this.select||this.focus()),!1)}},regex:function(a,b){return function(c){c=this&&this.getValue?this.getValue():c;return a.test(c)?!0:(void 0!==b&&alert(b),this&&(this.select||this.focus)&&(this.select?this.select():this.focus()),!1)}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)},number:function(a){return this.regex(c,a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,
b){return this.functions(function(b){return b!=a},b)}}})();m.extend(d.application.prototype,{openDialog:function(a,b,c){var e=d.dialog._.ev[a];if("function"==typeof e)return c=this._.oB||(this._.oB={}),c=c[a]||(c[a]=new d.dialog(this,a)),b&&b.call(c,c),!this._.activeElement&&(this._.activeElement=this.document.$.activeElement),!this._.oO&&(this._.oO=this.aG["filesview.filesview"].tools.oO()),c.show(),c;if("failed"==e)throw Error('[CKFINDER.dialog.openDialog] Dialog "'+a+'" failed when loading dg.');
var f=d.document.bH(),g=f.$.style.cursor,h=this;f.setStyle("cursor","wait");d.scriptLoader.load(d.getUrl(e),function(){"function"!=typeof d.dialog._.ev[a]&&(d.dialog._.ev[a]="failed");h.openDialog(a,b);f.setStyle("cursor",g)},null,null,c);return null},hs:function(a,b,c,e){var d=this;setTimeout(function(){d.cg.openDialog("Input",function(f){f.show();f.setTitle(a||d.lang.common.inputTitle);f.getContentElement("tab1","msg").getElement().setHtml(b);f.getContentElement("tab1","input").setValue(c);g(f,
function(a){a=a.getContentElement("tab1","input").getValue();e(a)})})},0)},msgDialog:function(a,b,c){var d=this;setTimeout(function(){d.cg.openDialog("Msg",function(e){e.show();e.setTitle(a||d.lang.common.messageTitle);e.getContentElement("tab1","msg").getElement().setHtml(b);c&&g(e,function(a){c()})})},0)},fe:function(a,b,c){var e=this;setTimeout(function(){e.cg.openDialog("Confirm",function(d){d.show();d.setTitle(a||e.lang.common.confirmationTitle);d.getContentElement("tab1","msg").getElement().setHtml(b);
g(d,function(a){c()})})},0)},skippedFilesDialog:function(a,b,c,d){var e=this;setTimeout(function(){e.cg.openDialog("SkippedFiles",function(f){f.show();f.setTitle(a||e.lang.common.messageTitle);c?(f.getContentElement("tab1","msg").getElement().show(),f.getContentElement("tab1","msg").getElement().setHtml(c)):f.getContentElement("tab1","msg").getElement().hide();var h="",l="cke_files_list",k="",n=b.length;3<n&&(l+=" cke_files_list_many",k=' style="height: '+Math.min(n+.1,20)+'em"');for(var q=0;q<n;q++)h+=
"<li>"+("string"==typeof b[q]?b[q]:b[q].getAttribute("name"))+"</li>";f.getContentElement("tab1","skippedList").getElement().setHtml('<ul class="'+l+'"'+k+">"+h+"</ul>");d&&g(f,function(){d()})})},0)}});z.add("dialog",{bM:["dialogui"],onLoad:function(){d.dialog.add("Confirm",function(a){return{title:a.lang.common.confirmationTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});d.dialog.add("Msg",
function(a){return{title:a.lang.common.messageTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"}]}],buttons:[CKFinder.dialog.okButton]}});d.dialog.add("Input",function(a){return{title:a.lang.common.inputTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",elements:[{type:"html",html:"",id:"msg"},{type:"text",id:"input"}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});d.dialog.add("SkippedFiles",function(a){return{title:a.lang.common.messageTitle,
minWidth:400,minHeight:100,contents:[{id:"tab1",style:p.ie7Compat?"height: auto":"",expand:!0,padding:0,elements:[{type:"vbox",expand:!0,children:[{type:"html",className:"cke_dialog_msg",html:"",id:"msg"},{type:"html",id:"skippedDescription",className:"cke_dialog_msg",html:a.lang.SkippedFiles},{type:"html",id:"skippedList",className:"cke_dialog_msg",html:""}]}]}],buttons:[CKFinder.dialog.okButton]}})}})})();z.add("dialogui");(function(){var a=function(a){this._||(this._={});this._["default"]=this._.hq=
a["default"]||"";for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);b.push(!0);m.extend.apply(m,b);return this._},b={dQ:function(a,b,c){return new u.dialog.ju(a,b,c)}},c={dQ:function(a,b,c){return new u.dialog[b.type](a,b,c)}},f={isChanged:function(){return this.getValue()!=this.lu()},reset:function(){this.setValue(this.lu())},jW:function(){this._.hq=this.getValue()},ki:function(){this._.hq=this._["default"]},lu:function(){return this._.hq}},e=m.extend({},u.dialog.bf.prototype.dm,
{onChange:function(a,b){this._.pL||(a.on("load",function(){this.getInputElement().on("change",function(){this.oW("change",{value:this.getValue()})},this)},this),this._.pL=!0);this.on("change",b)}},!0),k=/^on([A-Z]\w+)/,g=function(a){for(var b in a)(k.test(b)||"title"==b||"type"==b)&&delete a[b];return a};m.extend(u.dialog,{dD:function(b,c,e,f){if(!(4>arguments.length)){var g=a.call(this,c);g.hz=m.getNextNumber()+"_label";this._.children=[];u.dialog.bf.call(this,b,c,e,"div",null,null,function(){var a=
[];if("horizontal"!=c.uC)a.push('<div class="cke_dialog_ui_labeled_label" id="',g.hz,'" >',c.label,"</div>",'<div class="cke_dialog_ui_labeled_content">',f(b,c),"</div>");else{var e={type:"hbox",widths:c.widths,padding:0,children:[{type:"html",html:'<span class="cke_dialog_ui_labeled_label" id="'+g.hz+'">'+m.htmlEncode(c.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content">'+f(b,c)+"</span>"}]};d.dialog._.gv.hbox.dQ(b,e,a)}return a.join("")})}},ju:function(b,c,e){if(!(3>
arguments.length)){a.call(this,c);var d=this._.le=m.getNextNumber()+"_textInput",f={"class":"cke_dialog_ui_input_"+c.type,id:d,type:"text"};c.validate&&(this.validate=c.validate);c.maxLength&&(f.uy=c.maxLength);c.size&&(f.size=c.size);var g=this,k=!1;b.on("load",function(){g.getInputElement().on("keydown",function(a){13==a.data.db()&&(k=!0)});g.getInputElement().on("keyup",function(a){13==a.data.db()&&k&&(b.getButton("ok")&&setTimeout(function(){b.getButton("ok").click()},0),k=!1)},null,null,1E3)});
u.dialog.dD.call(this,b,c,e,function(){var a=['<div class="cke_dialog_ui_input_',c.type,'"'];c.width&&a.push('style="width:'+c.width+'" ');a.push("><input ");for(var b in f)a.push(b+'="'+f[b]+'" ');a.push(" /></div>");return a.join("")})}},textarea:function(b,c,e){if(!(3>arguments.length)){a.call(this,c);var d=this,f=this._.le=m.getNextNumber()+"_textarea",g={};c.validate&&(this.validate=c.validate);g.rows=c.rows||5;g.cols=c.cols||20;u.dialog.dD.call(this,b,c,e,function(){var a=['<div class="cke_dialog_ui_input_textarea"><textarea class="cke_dialog_ui_input_textarea" id="',
f,'" '],b;for(b in g)a.push(b+'="'+m.htmlEncode(g[b])+'" ');a.push(">",m.htmlEncode(d._["default"]),"</textarea></div>");return a.join("")})}},checkbox:function(b,c,e){if(!(3>arguments.length)){var d=a.call(this,c,{"default":!!c["default"]});c.validate&&(this.validate=c.validate);u.dialog.bf.call(this,b,c,e,"span",null,null,function(){var a=m.extend({},c,{id:c.id?c.id+"_checkbox":m.getNextNumber()+"_checkbox"},!0),e=[],f={"class":"cke_dialog_ui_checkbox_input",type:"checkbox"};g(a);c["default"]&&
(f.checked="checked");d.checkbox=new u.dialog.bf(b,a,e,"input",null,f);e.push(' <label for="',f.id,'">',m.htmlEncode(c.label),"</label>");return e.join("")})}},radio:function(b,c,e){if(!(3>arguments.length)){a.call(this,c);this._["default"]||(this._["default"]=this._.hq=c.items[0][1]);c.validate&&(this.validate=c.sh);var d=[],f=this;u.dialog.dD.call(this,b,c,e,function(){for(var a=[],e=[],k=c.id?c.id+"_radio":m.getNextNumber()+"_radio",q=0;q<c.items.length;q++){var p=c.items[q],x=void 0!==p[2]?p[2]:
p[0],y=void 0!==p[1]?p[1]:p[0],A=m.extend({},c,{id:m.getNextNumber()+"_radio_input",title:null,type:null},!0),x=m.extend({},A,{id:null,title:x},!0),z={type:"radio","class":"cke_dialog_ui_radio_input",name:k,value:y},B=[];f._["default"]==y&&(z.checked="checked");g(A);g(x);d.push(new u.dialog.bf(b,A,B,"input",null,z));B.push(" ");new u.dialog.bf(b,x,B,"label",null,{"for":z.id},p[0]);a.push(B.join(""))}new u.dialog.hbox(b,[],a,e);return e.join("")});this._.children=d}},button:function(b,c,e){if(arguments.length){"function"==
typeof c&&(c=c(b.eY()));a.call(this,c,{disabled:c.disabled||!1});d.event.du(this);var f=this;b.on("load",function(a){var b=this.getElement();(function(){b.on("click",function(a){f.oW("click",{dialog:f.getDialog()});a.data.preventDefault()})})();b.unselectable()},this);var g=m.extend({},c);delete g.style;u.dialog.bf.call(this,b,g,e,"a",null,{style:c.style,href:"javascript:void(0)",title:c.label,hp:"true","class":c["class"]},'<span class="cke_dialog_ui_button">'+m.htmlEncode(c.label)+"</span>")}},select:function(b,
c,e){if(!(3>arguments.length)){var d=a.call(this,c);c.validate&&(this.validate=c.validate);u.dialog.dD.call(this,b,c,e,function(){var a=m.extend({},c,{id:c.id?c.id+"_select":m.getNextNumber()+"_select"},!0),e=[],f=[],k={"class":"cke_dialog_ui_input_select"};void 0!=c.size&&(k.size=c.size);void 0!=c.multiple&&(k.multiple=c.multiple);g(a);for(var q=0,p;q<c.items.length&&(p=c.items[q]);q++)f.push('<option value="',m.htmlEncode(void 0!==p[1]?p[1]:p[0]),'" /> ',m.htmlEncode(p[0]));d.select=new u.dialog.bf(b,
a,e,"select",null,k,f.join(""));return e.join("")})}},file:function(b,c,e){if(!(3>arguments.length)){void 0===c["default"]&&(c["default"]="");var f=m.extend(a.call(this,c),{dg:c,buttons:[]});c.validate&&(this.validate=c.validate);b.on("load",function(){d.document.getById(f.gL).getParent().addClass("cke_dialog_ui_input_file")});u.dialog.dD.call(this,b,c,e,function(){f.gL=m.getNextNumber()+"_fileInput";var a=p.isCustomDomain(),b=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" id="',
f.gL,'" title="',c.label,'" src="javascript:void('];b.push(a?"(function(){document.open();document.domain='"+document.domain+"';document.close();})()":"0");b.push(')"></iframe>');return b.join("")})}},fileButton:function(b,c,e){if(!(3>arguments.length)){a.call(this,c);var d=this;c.validate&&(this.validate=c.validate);var f=m.extend({},c),g=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button";f.onClick=function(a){var e=c["for"];g&&!1===g.call(this,a)||(b.getContentElement(e[0],
e[1]).submit(),this.disable())};b.on("load",function(){b.getContentElement(c["for"][0],c["for"][1])._.buttons.push(d)});u.dialog.button.call(this,b,f,e)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(e,d,f){if(!(3>arguments.length)){var g=[],k=d.html;"<"!=k.charAt(0)&&(k="<span>"+k+"</span>");if(d.focus){var m=this.focus;this.focus=function(){m.call(this);d.focus.call(this);this.oW("focus")};d.fM&&(this.fM=this.fM);this.eA=!0}u.dialog.bf.call(this,
e,d,g,"span",null,null,"");g=g.join("").match(a);k=k.match(b)||["","",""];c.test(k[1])&&(k[1]=k[1].slice(0,-1),k[2]="/"+k[2]);f.push([k[1]," ",g[1]||"",k[2]].join(""))}}}()},!0);u.dialog.html.prototype=new u.dialog.bf;u.dialog.dD.prototype=m.extend(new u.dialog.bf,{rW:function(a){var b=d.document.getById(this._.hz);1>b.iu()?(new x.text(a,d.document)).appendTo(b):b.getChild(0).$.nodeValue=a;return this},vt:function(){var a=d.document.getById(this._.hz);return!a||1>a.iu()?"":a.getChild(0).getText()},
dm:e},!0);u.dialog.button.prototype=m.extend(new u.dialog.bf,{click:function(){if(!this._.disabled)return this.oW("click",{dialog:this._.dialog});this.getElement().$.blur();return!1},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},dm:m.extend({},u.dialog.bf.prototype.dm,
{onClick:function(a,b){this.on("click",b)}},!0),eZ:function(){this.click()},iU:function(){this.focus()},eA:!0},!0);u.dialog.ju.prototype=m.extend(new u.dialog.dD,{getInputElement:function(){return d.document.getById(this._.le)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&(b.$.focus(),b.$.select())},0)},eZ:function(){this.select()},
setValue:function(a){return u.dialog.bf.prototype.setValue.call(this,null!==a?a:"")},eA:!0},f,!0);u.dialog.textarea.prototype=new u.dialog.ju;u.dialog.select.prototype=m.extend(new u.dialog.dD,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var e=new A("option",this.getDialog().eY().document),d=this.getInputElement().$;e.$.text=a;e.$.value=void 0===b||null===b?a:b;void 0===c||null===c?y?d.add(e.$):d.add(e.$,null):d.add(e.$,c);return this},remove:function(a){this.getInputElement().$.remove(a);
return this},clear:function(){for(var a=this.getInputElement().$;0<a.length;)a.remove(0);return this},eA:!0},f,!0);u.dialog.checkbox.prototype=m.extend(new u.dialog.bf,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a){this.getInputElement().$.checked=a;this.oW("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},eZ:function(){this.setValue(!this.getValue())},dm:{onChange:function(a,b){if(y)a.on("load",function(){var a=this._.checkbox.getElement();
a.on("propertychange",function(b){b=b.data.$;"checked"==b.propertyName&&this.oW("change",{value:a.$.checked})},this)},this),this.on("change",b);else return e.onChange.apply(this,arguments);return null}},eA:!0},f,!0);u.dialog.radio.prototype=m.extend(new u.dialog.bf,{setValue:function(a){for(var b=this._.children,c,e=0;e<b.length&&(c=b[e]);e++)c.getElement().$.checked=c.getValue()==a;this.oW("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();
return null},eZ:function(){var a=this._.children,b;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked){a[b].getElement().focus();return}a[0].getElement().focus()},dm:{onChange:function(a,b){if(y)a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$;"checked"==a.propertyName&&this.$.checked&&b.oW("change",{value:this.getAttribute("value")})})},this),this.on("change",b);else return e.onChange.apply(this,arguments);
return null}},eA:!0},f,!0);u.dialog.file.prototype=m.extend(new u.dialog.dD,f,{getInputElement:function(){var a=d.document.getById(this._.gL).getFrameDocument();return 0<a.$.forms.length?new A(a.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},vy:function(a){return this.getInputElement().getParent().$.action},reset:function(){function a(){b.$.open();p.isCustomDomain()&&(b.$.domain=document.domain);var d="";c.size&&(d=c.size-(y?
7:0));b.$.write(['<html><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;"><form enctype="multipart/form-data" method="POST" action="',m.htmlEncode(c.action),'"><input type="file" name="',m.htmlEncode(c.id||"cke_upload"),'" size="',m.htmlEncode(0<d?d:""),'" /></form></body></html>'].join(""));b.$.close();for(d=0;d<e.length;d++)e[d].enable()}var b=d.document.getById(this._.gL).getFrameDocument(),c=this._.dg,e=this._.buttons;p.gecko?setTimeout(a,500):a()},
getValue:function(){return""},dm:e,eA:!0},!0);u.dialog.fileButton.prototype=new u.dialog.button;d.dialog.addUIElement("text",b);d.dialog.addUIElement("password",b);d.dialog.addUIElement("textarea",c);d.dialog.addUIElement("checkbox",c);d.dialog.addUIElement("radio",c);d.dialog.addUIElement("button",c);d.dialog.addUIElement("select",c);d.dialog.addUIElement("file",c);d.dialog.addUIElement("fileButton",c);d.dialog.addUIElement("html",c);m.extend(CKFinder.dialog,d.dialog)})();(function(){z.add("help",
{bM:["toolbar","button"],bz:function(a){a.config.disableHelpButton||(a.bD("help",{exec:function(a){a.aG["filesview.filesview"].bn().focus();window.open(d.basePath+"help/"+(a.lang.HelpLang||"en")+"/index.html")}}),a.bY.add("Help",d.UI_BUTTON,{label:a.lang.Help,command:"help"}))}})})();(function(){function a(a,b,c,e,d){for(var g=0,h=0,k=[],l=0;l<a.length;l++)if(!e||e(a[l]))k.push('<a href="',b.folder.getUrl(),encodeURIComponent(a[l].name),'" title="',a[l].name,'" rel="',c,'">a</a>'),a[l].isSameFile(b)&&
(g=h),h++;f();v=new A("div",d);v.setAttribute("id","ckf_gallery");v.setHtml(k.join(""));v.appendTo(d.bH());v.hide();return g}function b(a){if(a&&a.inPopup){a=new L(a.document);var b=a.getWindow();if(!y&&!p.opera||b.$.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==b.$.top.name)return a}return d.oC}function c(a){return function(){a.$.activeElement&&a.$.activeElement.blur();a.$.activeElement&&a.$.activeElement.blur();p.gecko||(a.getWindow().focus(),a.bH().focus())}}function f(){v&&v.remove()}
function e(a){return function(){f();a&&a.focus(!0,!0)}}function k(a){if(a.click)a.click();else if(d.document.$.createEvent){var b=d.document.$.createEvent("MouseEvents");b.initEvent("click",!0,!0);a.dispatchEvent(b)}}function g(a,b,c){if(y&&9>p.version)a.$.onreadystatechange=function(){"loaded"!=this.readyState&&"complete"!=this.readyState||setTimeout(function(){b.callee.apply(c,b)},0)};else a.on("load",function(){setTimeout(function(){b.callee.apply(c,b)},0)})}function h(a,c){if(!a||!a.inPopup){a&&
a.aG["filesview.filesview"].on("afterRenderFiles",f);var e=b(c).getWindow().$;"undefined"!=typeof e.jQuery&&e.jQuery.fn.colorbox?l=1:"undefined"!=typeof e.jQuery&&e.jQuery.fn.fancybox?l=2:"undefined"!=typeof e.jQuery&&e.jQuery.fn.prettyPhoto?l=3:"undefined"!=typeof e.Shadowbox?l=4:"undefined"!=typeof e.Prototype&&"undefined"!=typeof e.Lightbox&&(l=5);l&&(q=1)}}var l=0,q=0,n=[],r,v;CKFinder.addPlugin("gallery",{bM:["filesview"],galleryCallback:function(d,p,t){q||h(null,d);var u=b(d),x=u.getWindow().$,
y=function(a){return a.isImage()};if(!l&&d.config.gallery_autoLoad){if(!y(p))return!1;var z=u.getHead(),y=CKFinder.getPluginPath("gallery")+"colorbox/",B=arguments,J="undefined"==typeof x.jQuery;if(!J){var E=x.jQuery.fn.jquery.split("."),L=parseInt(E[0],10),Q=parseInt(E[1],10),E=parseInt(E[2]||0,10);if(1>L||1==L&&4>Q||1==L&&4==Q&&3>E)J=!0}if(J)return x.jQuery&&(n=[x.jQuery,x.$]),u=new A("script",u),u.setAttribute("type","text/javascript"),u.setAttribute("src",y+"jquery.min.js"),g(u,B,x),u.appendTo(z),
!0;u.appendStyleSheet(y+"colorbox.css");u=new A("script",u);u.setAttribute("type","text/javascript");u.setAttribute("src",y+"jquery.colorbox-min.js");g(u,B,x);u.appendTo(z);return!0}n.length&&(r=x.jQuery.noConflict(!0),x.jQuery=n[0],x.$=n[1],n=[]);r||(r=x.jQuery);if(l){z=m.getNextNumber();switch(l){case 1:if(!y(p))return!1;y=a(t,p,"ckf_gallery_"+z,y,u);r("#ckf_gallery a").colorbox(m.extend({minWidth:"300",minHeight:"200",maxWidth:"95%",maxHeight:"95%",scalePhotos:!0,current:d.lang.Gallery.current},
d.config.gallery_config,{group:"ckf_gallery_"+z,onClosed:e(p),onOpen:c(u)},!0)).eq(y).click();break;case 2:y=function(a){return a.isImage()||"swf"==a.ext};if(!y(p))return!1;y=a(t,p,"ckf_gallery_"+z,y,u);x.jQuery("#ckf_gallery a").fancybox(m.extend({},d.config.gallery_config,{onClosed:f,onComplete:c(u),afterClose:e(p),afterShow:c(u)},!0)).eq(y).click();break;case 3:y=function(a){return a.isImage()||"swf"==a.ext||"mov"==a.ext};if(!y(p))return!1;y=a(t,p,"prettyPhoto[ckf_gallery_"+z+"]",y,u);x.jQuery("#ckf_gallery a").prettyPhoto(m.extend({},
d.config.gallery_config,{callback:e(p),changepicturecallback:c(u)},!0)).eq(y).click();break;case 4:y=function(a){return a.isImage()||"swf"==a.ext||"mov"==a.ext};if(!y(p))return!1;y=a(t,p,"ckf_gallery_"+z,y,u);x.Shadowbox.qi("#ckf_gallery a",m.extend({},d.config.gallery_config,{gallery:"ckf_gallery_"+z,onClose:e(p),onFinish:c(u)},!0));k(v.eG("a").getItem(y).$);break;case 5:if(!y(p))return!1;y=a(t,p,"lightbox[ckf_gallery_"+z+"]",y,u);k(v.eG("a").getItem(y).$);break;default:return!1}return!0}return!1},
bz:h})})();J.gallery_autoLoad=!0;(function(){function a(a){if(!a||a.type!=d.cv||"form"!=a.getName())return[];for(var b=[],c=["style","className"],e=0;e<c.length;e++){var f=a.$.elements.namedItem(c[e]);f&&(f=new A(f),b.push([f,f.nextSibling]),f.remove())}return b}function b(a,b){if(a&&a.type==d.cv&&"form"==a.getName()&&0<b.length)for(var c=b.length-1;0<=c;c--){var e=b[c][0],f=b[c][1];f?e.insertBefore(f):e.appendTo(a)}}function c(c,e){var d=a(c),f={},k=c.$;e||(f["class"]=k.className||"",k.className=
"");f.inline=k.style.cssText||"";e||(k.style.cssText="position: static; overflow: visible");b(d);return f}function f(c,e){var d=a(c),f=c.$;"class"in e&&(f.className=e["class"]);"inline"in e&&(f.style.cssText=e.inline);b(d)}var e=null,k=null;z.add("maximize",{bz:function(a){function b(c){var e=q.eR();!c&&n&&(c=[n]);if(c){for(var d=0,f=c.length;d<f;d++)c[d].setStyles({width:e.width+"px",height:e.height+"px"});a.oW("resize")}else a.resize(e.width,e.height)}var l=a.lang.Maximize,q=d.oC.getWindow(),n=
d.document.getWindow().$.frameElement&&new A(d.document.getWindow().$.frameElement),r=[0,0,0,0],v={},w,u;n&&!n.getFrameDocument().bH().hasClass("CKFinderFrameWindow")&&(n=null);a.bD("maximize",{oD:!1,exec:function(){var t=a.document.getWindow().$;if(a.cg.inPopup&&(!y&&!p.opera||t.top.location.href.match(/ckfinder.html/)||"CKFinderpopup"==t.top.name))t=a.document.getWindow().$.parent,this.bu==d.aS?(r[2]=t.screenLeft||t.screenX,r[3]=t.screenTop||t.screenY,t.moveTo(0,0),k||(k=[t.screenLeft||t.screenX,
t.screenTop||t.screenY]),r[2]-=k[0],r[3]-=k[1],t.outerHeight?(r[0]=t.outerWidth,r[1]=t.outerHeight):(r[0]=t.document.body.scrollWidth,r[1]=t.document.body.scrollHeight,e||(t.resizeTo(t.screen.availWidth,t.screen.availHeight),e=[t.screen.availWidth-t.document.body.scrollWidth,t.screen.availHeight-t.document.body.scrollHeight]),r[0]+=e[0],r[1]+=e[1]),t.resizeTo?t.resizeTo(t.screen.availWidth,t.screen.availHeight):(t.outerHeight=t.screen.availHeight,t.outerWidth=t.screen.availWidth)):(t.resizeTo?t.resizeTo(r[0],
r[1]):(t.outerWidth=r[0],t.outerHeight=r[1]),t.moveTo(r[2],r[3]));else{var x=n||a.element.getFirst();if(this.bu==d.aS){w=q.hV();for(var t=x,z;t=t.getParent();)z=m.getNextNumber(),v[z]=c(t),t.$.og=z,t.is("html","body")&&t.setStyle("overflow","hidden"),t.setStyle("z-index",a.config.baseFloatZIndex-1);z=m.getNextNumber();v[z]=c(x,!0);x.$.og=z;for(var B=[x],t=x.getDocument().getWindow().$;t.frameElement;)B.push(A.eB(t.frameElement)),t=t.parent;u=function(){b(B)};q.on("resize",u);t=new L(t.document);z=
{overflow:p.webkit?"":"hidden",width:0,height:0};t.gT().setStyles(z);!p.gecko&&t.gT().setStyle("position","fixed");t.bH().setStyles(z);y?setTimeout(function(){q.$.scrollTo(0,0)},0):q.$.scrollTo(0,0);z=0;for(var J=B.length;z<J;z++)t=B[z],t.setStyle("position","absolute"),t.$.offsetLeft,t.setStyles({"z-index":a.config.baseFloatZIndex-1,left:"0px",top:"0px"});B[0].addClass("cke_maximized");b(B);t=B[0].ir();B[0].setStyles({left:-1*t.x+"px",top:-1*t.y+"px"})}else{q.removeListener("resize",u);for(t=x;t;)f(t,
v[t.$.og]),t.$.og=null,t=t.getParent();v={};y?setTimeout(function(){q.$.scrollTo(w.x,w.y)},0):q.$.scrollTo(w.x,w.y);x.removeClass("cke_maximized");p.webkit&&(x.setStyle("display","inline"),setTimeout(function(){x.setStyle("display","block")},0));a.oW("resize")}}this.rJ();if(z=this.pW[0])t=this.bu==d.aS?l.maximize:l.minimize,z=a.document.getById(z._.id),z.getChild(1).setHtml(t),z.setAttribute("title",t),z.setAttribute("href",'javascript:void("'+t+'");')}});a.bY.qW("Maximize",{label:l.maximize,command:"maximize"})}})})();
(function(){function a(a,b){for(var e=0,d=b.length;e<d;e++)if(b[e].name&&b[e].name===a)return!0;return!1}var b={};CKFinder.addPlugin("zip",{uiReady:function(c){var d=c.lang.Zip;CKFinder.dialog.add("compressToFileName",function(a){var b=a.getSelectedFolder();return{title:a.lang.DestinationFile,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:a.lang.FileRename},
{type:"hbox",widths:["90%","10%"],padding:0,children:[{type:"text",label:"",id:"fileName","default":b.name,validate:function(){if(!this.getValue())return a.openMsgDialog("",a.lang.ErrorMsg.pg),!1}},{type:"html",html:".zip",id:"fileNameExt",onLoad:function(){this.getElement().getParent().setStyles({"vertical-align":"bottom","padding-bottom":"2px"})}}]}]}],buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("unzipDirExists",function(a){var c=a.getSelectedFolder(),
g=[[a.lang.ManuallyRename,"manuallyrename"]];c.acl.fileDelete&&c.acl.fileRename&&c.acl.folderRename&&c.acl.folderDelete&&g.push([d.removeAndExtract,"overwrite"],[d.extractAndOverwrite,"merge"]);return{title:a.lang.ErrorMsg.FolderNameExists,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:a.lang.common.makeDecision,
type:"radio",id:"option","default":"manuallyrename",items:g}]}]}],onOk:function(){var c=this.getValueOf("tab1","option");"manuallyrename"==c&&(c=null);b.extractTo(a.getSelectedFile(),c);return!0},onCancel:function(){b.ma(c);return!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("unzipFileExists",function(a){var c=a.getSelectedFolder();return{title:a.lang.FileExistsDlgTitle,minWidth:350,minHeight:120,contents:[{id:"tab1",label:"",title:"",style:CKFinder.env.ie7Compat?
"height:auto":"",expand:!0,padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",widths:["70%","30%"],html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{type:"radio",id:"option",label:a.lang.common.makeDecision,"default":"autorename",items:[[a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"],[a.lang.common.skip,"skip"]]}]},{type:"hbox",className:"cke_dialog_remember_decision",children:[{type:"checkbox",id:"remember",label:a.lang.common.rememberDecision}]}]}],
onCancel:function(){b.ma(c);return!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});CKFinder.dialog.add("compressFileExists",function(a){var c=a.getSelectedFolder(),d=[[a.lang.ManuallyRename,"manuallyrename"]];c.acl.fileDelete&&c.acl.fileRename&&d.push([a.lang.FileAutorename,"autorename"],[a.lang.FileOverwrite,"overwrite"]);return{title:a.lang.FileExistsDlgTitle,minWidth:270,minHeight:60,contents:[{id:"tab1",label:"",title:"",expand:!0,style:CKFinder.env.ie7Compat?"height:auto":
"",padding:0,elements:[{id:"msg",className:"cke_dialog_error_msg",type:"html",html:""},{type:"hbox",className:"cke_dialog_file_exist_options",children:[{label:a.lang.common.makeDecision,type:"radio",id:"option","default":"manuallyrename",items:d}]}]}],onOk:function(){var c=this.getValueOf("tab1","option");"manuallyrename"==c&&(c=null);b.nX(a.getSelectedFolder(),b.pp.download,c);return!0},onCancel:function(){b.ma(c);return!0},buttons:[CKFinder.dialog.okButton,CKFinder.dialog.cancelButton]}});c.connector.app.dZ("zip",
112);b={rQ:{iz:/[\\\/:\*\?"<>\|]/},iG:{extractHere:{label:d.extractHereLabel,command:"ExtractHere",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},extractTo:{label:d.extractToLabel,command:"ExtractTo",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},downloadZip:{label:d.downloadZipLabel,command:"DownloadZip",group:"zip",icon:CKFinder.getPluginPath("zip")+"images/zip.gif"},compressZip:{label:d.compressZipLabel,command:"CompressZip",group:"zip",icon:CKFinder.getPluginPath("zip")+
"images/zip.gif"}},ma:function(a){a.getChildren(function(b){a.close();a.showFiles();a.open()},!0)},oc:function(a){return a&&a.length?b.rQ.iz.test(a)?c.lang.ErrorMsg.FolderInvChar:!1:c.lang.ErrorMsg.FolderEmpty},nI:function(d){if(b.filesList[b.currentItem]){var f=[{name:"skip"},{name:"ok"}];b.filesList[b.currentItem].options&&a(b.filesList[b.currentItem].options,f)?(b.currentItem++,c.openDialog("unzipFileExists",b.nI)):(d.show(),f=c.lang.ErrorMsg["Folder"==b.filesList[b.currentItem].type?"FolderExists":
"FileExists"],f="<strong>"+f.replace("%s",b.filesList[b.currentItem].name)+"</strong>",d.getContentElement("tab1","msg").getElement().setHtml(f),d.on("ok",function(a){a.removeListener();var f=d.getValueOf("tab1","remember");a=d.getValueOf("tab1","option");if(f){for(var f=0,k=b.filesList.length;f<k;f++)b.filesList[f].options||(b.filesList[f].options=a);b.extractHere(c.getSelectedFile(),!0)}else{b.filesList[b.currentItem].options=a;for(b.currentItem++;b.currentItem<b.filesList.length&&b.filesList[b.currentItem].options&&
(!b.filesList[b.currentItem].options||"skip"==b.filesList[b.currentItem].options);)b.currentItem++;b.currentItem<b.filesList.length?setTimeout(function(){c.openDialog("unzipFileExists",b.nI)},0):b.extractHere(c.getSelectedFile(),!0)}}))}else b.extractHere(c.getSelectedFile(),!0)},extract:function(a){var k={},g=a.file;a.extra&&(k=a.extra);k.fileName=a.file.name;c.connector.sendCommandPost(a.action,null,k,function(a){b.filesList=[];if(303==a.getErrorNumber()){b.currentItem=0;for(var e=a.selectNodes("Connector/Errors/Error"),
g=a.selectNodes("Connector/UnzippedFiles/File"),k=0,m,p=0,w=e.length;p<w;p++)m="skip",115==e[p].getAttribute("code")&&(k=1,m=null),b.filesList[p]={name:e[p].getAttribute("name"),options:m,type:e[p].getAttribute("type"),code:e[p].getAttribute("code")};e=0;for(w=g.length;e<w;e++,p++)b.filesList[p]={name:g[e].getAttribute("name"),options:g[e].getAttribute("action"),type:"File",code:0};if(k){c.openDialog("unzipFileExists",b.nI);return}}else if(a.checkError())return;var u=a.selectNodes("Connector/FolderExists/Folder");
if(u&&u.length)c.openDialog("unzipDirExists",function(a){a.show();var b=c.lang.FolderNameExists,b="<strong>"+b.replace("%s",u[0].getAttribute("name"))+"</strong>";a.getContentElement("tab1","msg").getElement().setHtml(b)});else{if((g=a.selectNodes("Connector/UnzippedFiles/File"))&&g.length){a=[];p=0;for(k=g.length;p<k;p++)"skip"==g[p].getAttribute("action")&&a.push(g[p].getAttribute("name"));if(b.filesList)for(p=0,k=b.filesList.length;p<k;p++)a.push(b.filesList[p].name);if(a.length)return c.openSkippedFilesDialog(null,
a,d.extractSuccess),b.ma(c.getSelectedFolder()),!0}c.openMsgDialog("OK",d.extractSuccess);b.ma(c.getSelectedFolder());return!0}},g.folder.type,g.folder)},extractHere:function(a,k){if(k){for(var g=!1,h=0,l=b.filesList.length;h<l;h++)if(115==b.filesList[h].code&&"skip"!=b.filesList[h].options){g=!0;k={};h=0;for(l=b.filesList.length;h<l;h++)k["files["+h+"][name]"]=b.filesList[h].name,k["files["+h+"][options]"]=b.filesList[h].options;break}if(!g){g=[];h=0;for(l=b.filesList.length;h<l;h++)g.push(b.filesList[h].name);
c.openSkippedFilesDialog(null,g,d.extractSuccess,function(){b.ma(c.getSelectedFolder());return!0});return}}k=k||{};b.extract({action:"ExtractHere",file:a,extra:k})},extractTo:function(d,f){f?b.extract({action:"ExtractTo",file:d,extra:{extractDir:b.extractDir||"/",force:f}}):c.openInputDialog(c.lang.DestinationFolder,c.lang.FolderRename,"",function(g){var h=c.getSelectedFolder();g=CKFinder.tools.trim(g);var l=b.oc(g);if(l)return c.openConfirmDialog("",l,function(a){b.extractTo(d,f)}),!1;b.extractDir=
g;h.hasChildren?h.getChildren(function(f){a(g,f)?c.openDialog("unzipDirExists",function(a){a.show();var b=c.lang.ErrorMsg.FolderExists,b="<strong>"+b.replace("%s",g)+"</strong>";a.getContentElement("tab1","msg").getElement().setHtml(b)}):b.extract({action:"ExtractTo",file:d,extra:{extractDir:g}})},!0):(h.createNewFolder(g),b.extract({action:"ExtractTo",file:d,extra:{extractDir:g}}))})},downloadZip:function(a,b,d){a=c.connector.composeUrl("DownloadZip",{FileName:a,ZipName:b},d.type,d);c.connector.app.aG["filesview.filesview"].tools.downloadFile(new CKFinder.dom.document(c.document),
a)},oH:function(a,d){c.connector.sendCommandPost("CreateZip",null,d,function(c){if(!c.checkError()){if(d.download&&(c=c.selectSingleNode("Connector/ZipFile")))return c=c.getAttribute("name"),b.downloadZip(c,d.zipName,a);b.ma(a)}},a.type,a)},nX:function(d,f,g,h){var l={zipName:d.name+".zip",download:f};if(h)for(var m=0,n=h.length;m<n;m++)l["files["+m+"][name]"]=h[m].name,l["files["+m+"][type]"]=h[m].folder.type,l["files["+m+"][folder]"]=h[m].folder.getPath();if(g)return l=b.pp,l.fileExistsAction=g,
b.oH(d,l);if(d.isBasket||f){if(d.isBasket&&"undefined"===typeof h)for(l.zipName="basket.zip",m=0,n=c.basketFiles.length;m<n;m++)l["files["+m+"][name]"]=c.basketFiles[m].name,l["files["+m+"][type]"]=c.basketFiles[m].folder.type,l["files["+m+"][folder]"]=c.basketFiles[m].folder.getPath();d.isBasket&&(d=c.folders[1],l.basket=!0);return b.oH(d,l)}c.openDialog("compressToFileName",function(g){g.show();g.getContentElement("tab1","fileName").getElement().setValue(d.name);g.on("ok",function(h){h.removeListener();
var m=g.getValueOf("tab1","fileName"),m=CKFinder.tools.trim(m)+".zip";if(h=b.oc(m))return c.openConfirmDialog("",h,function(a){b.nX(d,f)}),!1;l.zipName=m;d.getFiles(function(f){if(a(m,f))return b.pp=l,c.openDialog("compressFileExists",function(a){a.show();var b=c.lang.ErrorMsg.FileExists,b="<strong>"+b.replace("%s",m)+"</strong>";a.getContentElement("tab1","msg").getElement().setHtml(b)}),!1;b.oH(d,l)},!0)})})}};c.addFileContextMenuOption(b.iG.extractHere,function(a,c){b.extractHere(c)},function(a){if(c.getSelectedFolder().isBasket)return!1;
var b=c.getSelectedFiles();return"zip"!==a.ext.toLowerCase()||c.config.selectMultiple&&1<b.length?!1:a.folder.acl.fileUpload&&a.folder.acl.folderCreate?!0:-1});c.addFileContextMenuOption(b.iG.extractTo,function(a,c){b.extractTo(c)},function(a){if(c.getSelectedFolder().isBasket)return!1;var b=c.getSelectedFiles();return"zip"!==a.ext.toLowerCase()||c.config.selectMultiple&&1<b.length?!1:a.folder.acl.fileUpload&&a.folder.acl.folderCreate?!0:-1});c.addFileContextMenuOption(b.iG.compressZip,function(a,
c){var d=a.getSelectedFiles(),f=a.getSelectedFolder();b.nX(f,!1,!1,d)},function(a){var b=c.getSelectedFolder();if(b.isBasket)return!1;var d=c.getSelectedFiles();return!c.config.selectMultiple||2>d.length?!1:a.folder.acl.fileUpload&&a.folder.acl.folderCreate&&b.getResourceType().isExtensionAllowed("zip")?!0:-1});c.addFileContextMenuOption(b.iG.downloadZip,function(a,c){var d=a.getSelectedFiles(),f=a.getSelectedFolder();b.nX(f,!0,!1,d)},function(a){var b=c.getSelectedFiles();return!c.config.selectMultiple||
2>b.length?!1:a.folder.acl.fileUpload?!0:-1});c.addFolderContextMenuOption(b.iG.compressZip,function(a,c){b.nX(c,!1)},function(a){return a.isBasket?!1:a.acl.fileUpload&&a.getResourceType().isExtensionAllowed("zip")&&(c.files.length||a.hasChildren)?!0:-1});c.addFolderContextMenuOption(b.iG.downloadZip,function(a,c){b.nX(c,!0)},function(a){return a.isBasket?a.app.basketFiles.length?!0:-1:a.acl.fileUpload&&(c.files.length||a.hasChildren)?!0:-1});c.connector.app.aG["filesview.filesview"].on("beforeContextMenu",
function(a){1<c.getSelectedFiles().length&&delete a.data.bj.downloadFile})},basketToolbar:[["DownloadZip",{label:"downloadZipLabel",icon:CKFinder.getPluginPath("zip")+"images/zip.gif",onClick:function(a){a=a.getSelectedFolder();a.app.basketFiles.length&&b.nX(a,!0)},disableEmpty:!0}]]})})();d.skins.add("kama",function(){var a=["images/loaders/16x16.gif","images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];y&&7>p.version&&a.push("images/sprites_ie6.png");return{ls:a,application:{css:["app.css"]},
host:{qx:1,css:["host.css"]},mA:7,kN:7,ps:1,bz:function(a){function c(a){a=a.getHead().append("style");a.setAttribute("id","cke_ui_color");a.setAttribute("type","text/css");return a}function f(a,b,c){for(var d,e,f,g=0;g<a.length;g++)if(p.webkit){for(e=0;e<a[g].$.sheet.rules.length;e++)a[g].$.sheet.removeRule(e);for(e=0;e<b.length;e++){f=b[e][1];for(d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[g].$.sheet.addRule(b[e][0],f)}}else{f=b;for(d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);y?a[g].$.styleSheet.cssText=
f:a[g].setHtml(f)}}a.config.width&&!isNaN(a.config.width)&&(a.config.width-=12);var e=[],k="/* UI Color Support */.cke_skin_kama .cke_menuitem .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover .cke_label,.cke_skin_kama .cke_menuitem a:focus .cke_label,.cke_skin_kama .cke_menuitem a:active .cke_label{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_label,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_label{\tbackground-color: transparent !important;}.cke_skin_kama .cke_menuitem a.cke_disabled:hover .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:focus .cke_icon_wrapper,.cke_skin_kama .cke_menuitem a.cke_disabled:active .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuitem a.cke_disabled .cke_icon_wrapper{\tbackground-color: $color !important;\tborder-color: $color !important;}.cke_skin_kama .cke_menuseparator{\tbackground-color: $color !important;}.cke_skin_kama .cke_menuitem a:hover,.cke_skin_kama .cke_menuitem a:focus,.cke_skin_kama .cke_menuitem a:active{\tbackground-color: $color !important;}";
if(p.webkit)for(var k=k.split("}").slice(0,-1),g=0;g<k.length;g++)k[g]=k[g].split("{");var h=/\$color/g;m.extend(a,{uiColor:null,rk:function(){return this.uiColor},setUiColor:function(g){var m,n,r=c(d.oC),v=c(this.document),u=".cke_"+a.name.replace(".","\\."),u=[u+" .cke_wrapper",u+"_dialog .cke_dialog_contents",u+"_dialog a.cke_dialog_tab",u+"_dialog .cke_dialog_footer"].join();p.webkit?(m=[[u,"background-color: $color !important;"]],n=[["body,"+u,"background-color: $color !important;"]]):(m=u+"{background-color: $color !important;}",
n="body,"+u+"{background-color: $color !important;}");return(this.setUiColor=function(c){var d=[[h,c]];a.uiColor=c;f([r],m,d);f([v],n,d);f(e,k,d)})(g)}});a.on("menuShow",function(d){d=d.data[0].element.eG("iframe").getItem(0).getFrameDocument();if(!d.getById("cke_ui_color")){d=c(d);e.push(d);var g=a.rk();g&&f([d],k,[[h,g]])}});if(a.config.uiColor)a.on("uiReady",function(){a.setUiColor(a.config.uiColor)})}}}());(function(){function a(){d.dialog.on("resize",function(a){a=a.data;var c=a.width,d=a.height,
e=a.dialog,k=e.bO.contents;"kama"==a.skin&&(k.setStyles({width:c+"px",height:d+"px"}),setTimeout(function(){var a=e.bO.dialog.getChild([0,0,0]),b=a.getChild(0),c=a.getChild(2);c.setStyle("width",b.$.offsetWidth+"px");c=a.getChild(7);c.setStyle("width",b.$.offsetWidth-28+"px");c=a.getChild(4);c.setStyle("height",b.$.offsetHeight-31-14+"px");c=a.getChild(5);c.setStyle("height",b.$.offsetHeight-31-14+"px")},100))})}d.dialog?a():d.on("dialogPluginReady",a)})();d.skins.add("v1",function(){var a=["images/loaders/16x16.gif",
"images/loaders/32x32.gif","images/ckffolder.gif","images/ckffolderopened.gif"];y&&7>p.version&&a.push("images/sprites_ie6.png");return{ls:a,application:{css:["app.css"]},ps:1,rv:-8,kN:0,host:{qx:1,css:["host.css"]}}}());(function(){function a(){d.dialog.on("resize",function(a){a=a.data;var c=a.width,d=a.height,e=a.dialog,k=e.bO.contents;"v1"==a.skin&&(k.setStyles({width:c+"px",height:d+"px"}),setTimeout(function(){var a=e.bO.dialog.getChild([0,0,0]),b=a.getChild(0),c=a.getChild(2);c.setStyle("width",
b.$.offsetWidth+"px");c=a.getChild(7);c.setStyle("width",b.$.offsetWidth-28+"px");c=a.getChild(4);c.setStyle("height",b.$.offsetHeight-31-14+"px");c=a.getChild(5);c.setStyle("height",b.$.offsetHeight-31-14+"px")},100))})}d.dialog?a():d.on("dialogPluginReady",a)})();d.gc.add("default",function(){return{dQ:function(a){function b(){p.ie6Compat&&(a.layout.oG=a.document.getWindow().eR())}var c=a.ff;if(a.element&&c!=d.kZ){a.layout=new d.application.layout(a);var c=a.oW("themeSpace",{space:"head",html:""}),
f=a.oW("themeSpace",{space:"sidebar",html:""}),e=a.oW("themeSpace",{space:"mainTop",html:""}),k=a.oW("themeSpace",{space:"mainMiddle",html:""}),g=a.oW("themeSpace",{space:"mainBottom",html:""}),h=a.config.skin.indexOf(","),h=(-1==h?a.config.skin:a.config.skin.substr(0,h))||"kama",c='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html lang="'+a.lang.LangCode+'" dir="'+a.lang.dir+'"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'+
c.html+"</head><body>"+(p.ie6Compat?'<div id="ckfinder" role="application">':'<div id="ckfinder" role="application" style="visibility: hidden">')+'\x3c!-- 1. CKE Skin class. --\x3e<div class="fake_wrapper cke_skin_'+h+'">\x3c!-- 2. High contrast class. --\x3e<div class="fake_wrapper">\x3c!-- Applicable: hc cke_hc --\x3e\x3c!-- 3. Browser class. --\x3e<div class="fake_wrapper '+p.cssClass+'">\x3c!-- 4. RTL class. --\x3e<div class="fake_wrapper cke_'+("ltr"==a.lang.dir||y&&8>p.version?"ltr":"rtl")+
'">\x3c!-- Applicable: rtl cke_rtl --\x3e\x3c!-- 5. Layout class. --\x3e<div class="fake_wrapper"><div id="ckfinder_view" class="columns_2">\x3c!-- Applicable: columns_1 columns_2 --\x3e<div id="sidebar_container" class="container" role="region"'+(a.config.sidebarWidth?' style="width: '+m.cssLength(a.config.sidebarWidth)+'"':"")+'><div id="sidebar_wrapper" class="wrapper">'+f.html+'</div></div><div id="main_container" class="container" role="region">'+e.html+k.html+g.html+"</div></div></div></div></div></div></div></div></body></html>";
d.log("[THEME] DOM flush using document.write");a.document.$.write(c);a.cr("themeLoaded");a.cr("uiReady",function(){b();a.cr("appReady",function(){function c(){f=f||a.document.getHead().eG("link").getItem(0);var d=0;if(f)try{f.$.sheet&&0<f.$.sheet.cssRules.length?d=1:f.$.styleSheet&&0<f.$.styleSheet.cssText.length?d=1:f.$.innerHTML&&0<f.$.innerHTML.length&&(d=1)}catch(e){}d?p.ie6Compat?(b(),a.layout.ea(),setTimeout(function(){a.layout.ea()},500)):(a.layout.ea(!0),setTimeout(function(){a.document.getById("ckfinder").removeStyle("visibility")})):
window.setTimeout(c,250)}b();if(p.ie8){var d=a.document.$,e;d.documentMode?e=d.documentMode:(e=5,d.compatMode&&"CSS1Compat"==d.compatMode&&(e=7));8>e&&(d=a.plugins.tools,d.showTool(d.addTool('<strong style="color: red;display:none;">Forced IE compatibility mode! CKFinder may not look as intended.</strong>')))}if(p.ie6Compat)a.document.getWindow().on("resize",b);a.document.getWindow().on("resize",function(){a.layout.ea.call(a.layout)});var f;c()})})}},pu:function(a){var b=m.getNextNumber();a=A.kE(['<div class="cke_compatibility cke_'+
a.name.replace(".","\\.")+"_dialog cke_skin_",a.gd,'" dir="',a.lang.dir,'" lang="',a.langCode,'"><table class="cke_dialog'," "+p.cssClass.replace(/browser/g,"cke_browser")," cke_",a.lang.dir,'" style="position:absolute"><tr><td><div class="%body"><div id="%title#" class="%title"></div><div id="%close_button#" class="%close_button"><span>X</span></div><div id="%tabs#" class="%tabs"></div><table class="%contents"><tr><td id="%contents#" class="%contents"></td></tr></table><div id="%footer#" class="%footer"></div></div><div id="%tl#" class="%tl"></div><div id="%tc#" class="%tc"></div><div id="%tr#" class="%tr"></div><div id="%ml#" class="%ml"></div><div id="%mr#" class="%mr"></div><div id="%bl#" class="%bl"></div><div id="%bc#" class="%bc"></div><div id="%br#" class="%br"></div></td></tr></table>',
y?"":"<style>.cke_dialog{visibility:hidden;}</style>","</div>"].join("").replace(/#/g,"_"+b).replace(/%/g,"cke_dialog_"),d.document);var b=a.getChild([0,0,0,0,0]),c=b.getChild(0),f=b.getChild(1);c.unselectable();f.unselectable();return{element:a,bO:{dialog:a.getChild(0),title:c,close:f,tabs:b.getChild(2),contents:b.getChild([3,0,0,0]),footer:b.getChild(4)}}},destroy:function(a){var b=a.container,c=a.ia;b&&b.remove();for(b=0;c&&b<c.length;b++)c[b].remove();a.element&&(a.ff==d.fc&&a.element.remove(),
delete a.element)}}}());d.application.prototype.vU=function(a){a=""+a;return this._[a]||(this._[a]=d.document.getById(a+"_"+this.name))};d.application.prototype.nJ=function(a){/^\d+$/.test(a)&&(a+="px");this.layout.dV().setStyle("width",a);this.oW("resize");this.layout.ea()};d.application.prototype.resize=function(a,b){this.element.getChild(0).setStyle("height",b+"px");this.element.getChild(0).setStyle("width",a+"px")};(function(){function a(a,b){for(var d=0,k=0,g=0;g<a.$.parentNode.childNodes.length;g++){var h=
a.$.parentNode.childNodes[g];if(1==h.nodeType){var l=h==a.$;if(h.offsetHeight||l)k++,l||(d+=h.offsetHeight)}}g=a.$.offsetHeight-a.$.clientHeight;k=(k-1)*b;!p.ie6Compat||p.ie8||p.ie7Compat||(k+=2*b);d=(y?a.$.parentNode.parentNode.parentNode.offsetHeight:a.$.parentNode.offsetHeight)-g-d-(k||0);try{a.setStyle("height",d+"px")}catch(m){}}function b(a){return d.bs.substr(9*a%32,1)}d.application.layout=function(a){this.app=a;this.jB=null};d.application.layout.prototype={ea:function(c){this.jB||(this.jB=
m.setTimeout(function(){d.log("[THEME] Repainting layout");var f=d.bs.indexOf(d.bF.substr(1,1))%5,e=[d.bF.substr(8,1),d.bF.substr(6,1)],k=d.bF&&d.bF.substr(3,1)!=d.bs.substr(9*(d.bs.indexOf(d.bF.substr(0,1))+d.bs.indexOf(d.bF.substr(2,1)))%(d.bs.length-1),1),e=!!d.ed&&e[1]!=b(d.ed.length+d.bs.indexOf(e[0]));if(d.bF&&1==f&&d.lS(window.top[d.nd+"cation"][d.jG+"st"])!=d.lS(d.ed)||4==f||k){for(var g=this.dV().getChild(0).getChildren(),h=0,l=0;l<g.count();l++)"static"==g.getItem(l).rd("position")&&(h=
1);h||this.dV().getChild(0).appendHtml(k||e||4!=f?" ":" <b>"+m.htmlEncode(d.ed)+"</b></div>")}f=this.pn();k=this.pS();e=d.skins.loaded[this.app.gd];e.ps&&y&&p.ie6Compat&&!p.ie8&&(g=this.mB(),h=this.dV(),g.setStyle("width",this.oG.width-h.$.offsetWidth-3*e.kN+(e.rv?e.rv:0)+"px"));f&&a(f,e.mA);k&&a(k,e.kN);this.jB=null;c=!1;this.app.oW("afterRepaintLayout");p.ie6Compat&&m.setTimeout(function(){this.app.element.$.style.cssText+=""},0,this)},!0===c?0:500,this))},dV:function(){this.kS||(this.kS=this.app.document.getById("sidebar_container"));
return this.kS},mB:function(){this.lb||(this.lb=this.app.document.getById("main_container"));return this.lb},pS:function(){"undefined"===typeof this.kK&&(this.kK=this.app.document.getById("folders_view"));return this.kK},pn:function(){"undefined"===typeof this.kD&&(this.kD=this.app.document.getById("files_view"));return this.kD}}})()})();